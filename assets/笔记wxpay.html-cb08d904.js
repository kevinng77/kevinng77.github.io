import{_ as o}from"./plugin-vue_export-helper-c27b6911.js";import{r as t,o as r,c as p,a as s,b as n,d as e,f as l}from"./app-e9b04ba5.js";const i="/assets/img/wxpay/image-20240202220819325.png",c="/assets/img/wxpay/image-20240202221101943.png",d="/assets/img/wxpay/image-20240202222832792.png",h={},y=s("h2",{id:"流程要点",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#流程要点","aria-hidden":"true"},"#"),n(" 流程要点")],-1),u={class:"hint-container info"},_=s("p",{class:"hint-container-title"},"相关信息",-1),m=s("p",null,[n("以下提到的微信 API 请求的 base URL 为 "),s("code",null,"https://api.mch.weixin.qq.com"),n("，如 "),s("code",null,"GET /v3/certificates"),n(" 表示 "),s("code",null,"GET https://api.mch.weixin.qq.com/v3/certificates "),n("。")],-1),g={href:"https://pay.weixin.qq.com/docs/merchant/development/interface-rules/signature-generation.html",target:"_blank",rel:"noopener noreferrer"},v=s("p",null,"用户发起支付时，大致的支付流程如下：",-1),b=s("h3",{id:"_1-用户提交订单",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_1-用户提交订单","aria-hidden":"true"},"#"),n(" 1. 用户提交订单")],-1),f=s("p",null,"比如点击付款按钮；该操作相当于以下业务流程图中的【步骤 1】。",-1),q=s("ul",null,[s("li",null,[s("strong",null,"【示例图步骤 2】"),n(" 前端发送 order id 等信息到后端。")])],-1),E=s("h3",{id:"_2-后台处理订单信息",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_2-后台处理订单信息","aria-hidden":"true"},"#"),n(" 2. 后台处理订单信息")],-1),x={href:"https://pay.weixin.qq.com/wiki/doc/apiv3/open/pay/chapter2_8_2.shtml",target:"_blank",rel:"noopener noreferrer"},w={href:"https://github.com/minibear2021/wechatpayv3?tab=readme-ov-file",target:"_blank",rel:"noopener noreferrer"},A={href:"https://pay.weixin.qq.com/docs/merchant/apis/mini-program-payment/query-by-out-trade-no.html",target:"_blank",rel:"noopener noreferrer"},C={href:"https://pay.weixin.qq.com/wiki/doc/apiv3/apis/chapter3_5_1.shtml",target:"_blank",rel:"noopener noreferrer"},k=s("li",null,[s("strong",null,"【示例图步骤 3】"),n(" 后端接受到用户请求，提取用户 openid 等信息，获取商品信息，生成订单。")],-1),F=s("code",null,"GET /v3/certificates",-1),D={href:"https://pay.weixin.qq.com/docs/merchant/development/interface-rules/signature-generation.html",target:"_blank",rel:"noopener noreferrer"},P={href:"https://github.com/minibear2021/wechatpayv3?tab=readme-ov-file",target:"_blank",rel:"noopener noreferrer"},I=s("h3",{id:"_3-后台进行小程序下单",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_3-后台进行小程序下单","aria-hidden":"true"},"#"),n(" 3. 后台进行小程序下单")],-1),S=s("strong",null,"【示例图步骤 4】",-1),T=s("code",null,"【POST】/v3/pay/transactions/jsapi",-1),z=s("code",null,"out_trade_no",-1),H={href:"https://pay.weixin.qq.com/docs/merchant/apis/mini-program-payment/mini-prepay.html",target:"_blank",rel:"noopener noreferrer"},N=s("li",null,[s("p",null,[s("strong",null,"【示例图步骤 6】"),n(" 后台会接收到微信发过来的 "),s("code",null,"prepay_id"),n("。")])],-1),j=s("strong",null,"【示例图步骤 7】",-1),M={href:"https://pay.weixin.qq.com/docs/merchant/apis/mini-program-payment/mini-transfer-payment.html",target:"_blank",rel:"noopener noreferrer"},O=l(`<div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#24292E;">prepay_id </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> result.get(</span><span style="color:#032F62;">&#39;prepay_id&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">timestamp </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">str</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">int</span><span style="color:#24292E;">(time.time()))</span></span>
<span class="line"><span style="color:#24292E;">noncestr </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">str</span><span style="color:#24292E;">(uuid.uuid4()).replace(</span><span style="color:#032F62;">&#39;-&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">package </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;prepay_id=&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> prepay_id</span></span>
<span class="line"><span style="color:#24292E;">sign </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> wxpay.sign(</span><span style="color:#E36209;">data</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">[</span><span style="color:#005CC5;">APPID</span><span style="color:#24292E;">, timestamp, noncestr, package]) </span><span style="color:#6A737D;"># 使用 RSAwithSHA256 或 HMAC_256 算法计算签名值供调起支付时使用</span></span>
<span class="line"><span style="color:#24292E;">signtype </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;RSA&#39;</span><span style="color:#24292E;">   </span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>【示例图步骤 8】</strong> 将结果发送到前端。</li></ul><h3 id="_4-用户在小程序进行支付" tabindex="-1"><a class="header-anchor" href="#_4-用户在小程序进行支付" aria-hidden="true">#</a> 4. 用户在小程序进行支付</h3>`,3),V=s("strong",null,"【示例图步骤 9】",-1),B=s("code",null,"wx.requestPayment",-1),G={href:"https://developers.weixin.qq.com/miniprogram/dev/api/payment/wx.requestPayment.html",target:"_blank",rel:"noopener noreferrer"},L=s("li",null,[s("p",null,[s("strong",null,"【示例图步骤 10】"),n(" 用户窗口弹出微信支付界面，显示订单信息，并询问是否确认支付。")])],-1),R=s("figure",null,[s("img",{src:i,alt:"image-20240202220819325",height:"300",tabindex:"0",loading:"lazy"}),s("figcaption",null,"image-20240202220819325")],-1),W=s("ul",null,[s("li",null,[s("strong",null,"【示例图步骤 13】"),n(" 用户点击确认支付后，会弹出输入密码，或者指纹支付界面。")])],-1),Q=s("figure",null,[s("img",{src:c,alt:"image-20240202221101943",height:"300",tabindex:"0",loading:"lazy"}),s("figcaption",null,"image-20240202221101943")],-1),U=s("h3",{id:"_5-后台订单处理",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_5-后台订单处理","aria-hidden":"true"},"#"),n(" 5. 后台订单处理")],-1),X=s("li",null,[n("在【示例图步骤 4】中，我们填写了 "),s("code",null,"notify_url"),n(" 及异步接收微信支付结果通知的回调地址。")],-1),Y=s("strong",null,"【示例图步骤 16】",-1),J=s("code",null,"/notify_url",-1),K={href:"https://pay.weixin.qq.com/docs/merchant/apis/mini-program-payment/payment-notice.html",target:"_blank",rel:"noopener noreferrer"},$={href:"https://github.com/minibear2021/wechatpayv3/blob/1.2.43/examples/server/examples.py#L197",target:"_blank",rel:"noopener noreferrer"},Z=s("strong",null,"【示例图步骤 18】",-1),ss=s("code",null,"notify_url",-1),ns={href:"https://pay.weixin.qq.com/docs/merchant/apis/mini-program-payment/payment-notice.html#%E9%80%9A%E7%9F%A5%E5%BA%94%E7%AD%94",target:"_blank",rel:"noopener noreferrer"},as=l('<h3 id="_6-用户收到支付结果" tabindex="-1"><a class="header-anchor" href="#_6-用户收到支付结果" aria-hidden="true">#</a> 6. 用户收到支付结果</h3><ul><li><strong>【示例图步骤 19】</strong> 用户界面跳出如下结果提示，和弹窗通知：</li></ul><figure><img src="'+d+'" alt="image-20240202222832792" height="400" tabindex="0" loading="lazy"><figcaption>image-20240202222832792</figcaption></figure><h3 id="_7-用户小程序状态变更" tabindex="-1"><a class="header-anchor" href="#_7-用户小程序状态变更" aria-hidden="true">#</a> 7. 用户小程序状态变更</h3><ul><li><strong>【示例图步骤 20】</strong> 前端发送请求到后端，查询支付结果。</li><li><strong>【示例图步骤 21】</strong> 后端调用 API，<code>【GET】/v3/pay/transactions/out-trade-no/{out_trade_no}</code>，查询对应的订单状态，并进行处理。比如，如果订单状态为 <code>成功</code>，那么，处理结果可能是将用户加入到会员列表当中等等。</li><li><strong>【示例图步骤 23】</strong> 后端将消息发送到前端进行展示，比如用户的界面上，显示了 <code>会员</code> 图标。</li></ul><h4 id="示例图" tabindex="-1"><a class="header-anchor" href="#示例图" aria-hidden="true">#</a> 示例图</h4>',6),es={href:"https://pay.weixin.qq.com/wiki/doc/apiv3/open/pay/chapter2_8_2.shtml",target:"_blank",rel:"noopener noreferrer"},ls=l(`<figure><img src="https://pay.weixin.qq.com/wiki/doc/apiv3/assets/assets/img/pay/wechatpay/6_2.png" alt="业务流程图" tabindex="0" loading="lazy"><figcaption>业务流程图</figcaption></figure><h2 id="操作对应" tabindex="-1"><a class="header-anchor" href="#操作对应" aria-hidden="true">#</a> 操作对应</h2><h3 id="前端" tabindex="-1"><a class="header-anchor" href="#前端" aria-hidden="true">#</a> 前端</h3><p>以下以 黑马程序员前端项目 uniapp 小兔鲜儿微信小程序项目视频教程 中的示例代码，对应上面的业务逻辑图进行梳理。</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// 订单支付</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onOrderPay</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">async</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">import</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">meta</span><span style="color:#24292E;">.env.</span><span style="color:#005CC5;">DEV</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 开发环境模拟支付</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getPayMockAPI</span><span style="color:#24292E;">({ orderId: query.id })</span></span>
<span class="line"><span style="color:#24292E;">  } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// #ifdef MP-WEIXIN</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 1. 进入小程序下单； 8. 获取小程序支付参数</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">res</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getPayWxPayMiniPayAPI</span><span style="color:#24292E;">({ orderId: query.id })</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 9. 调用 wx.requestPayment 发起微信支付</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> wx.</span><span style="color:#6F42C1;">requestPayment</span><span style="color:#24292E;">(res.result)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// #endif</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// 关闭当前页，再跳转支付结果页</span></span>
<span class="line"><span style="color:#24292E;">  uni.</span><span style="color:#6F42C1;">redirectTo</span><span style="color:#24292E;">({ url: </span><span style="color:#032F62;">\`/pagesOrder/payment/payment?id=\${</span><span style="color:#24292E;">query</span><span style="color:#032F62;">.</span><span style="color:#24292E;">id</span><span style="color:#032F62;">}\`</span><span style="color:#24292E;"> })</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5),os=s("code",null,"wx.requestPayment",-1),ts={href:"https://developers.weixin.qq.com/miniprogram/dev/api/payment/wx.requestPayment.html",target:"_blank",rel:"noopener noreferrer"},rs=s("h3",{id:"后端",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#后端","aria-hidden":"true"},"#"),n(" 后端")],-1),ps={href:"https://github.com/minibear2021/wechatpayv3?tab=readme-ov-file",target:"_blank",rel:"noopener noreferrer"},is={href:"https://pay.weixin.qq.com/docs/merchant/apis/mini-program-payment/query-by-out-trade-no.html",target:"_blank",rel:"noopener noreferrer"},cs={href:"https://pay.weixin.qq.com/wiki/doc/apiv3/open/pay/chapter2_8_0.shtml",target:"_blank",rel:"noopener noreferrer"},ds=s("ol",null,[s("li",null,"请求下单支付：")],-1),hs=s("code",null,"/v3/pay/transactions/jsapi",-1),ys={href:"https://pay.weixin.qq.com/docs/merchant/apis/mini-program-payment/mini-prepay.html",target:"_blank",rel:"noopener noreferrer"},us=l(`<p>简洁版的示例为：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">curl</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-X</span><span style="color:#24292E;"> </span><span style="color:#032F62;">POST</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">https://api.mch.weixin.qq.com/v3/pay/transactions/jsapi</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">-H</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;Authorization: WECHATPAY2-SHA256-RSA2048 mchid=</span><span style="color:#005CC5;">\\&quot;</span><span style="color:#032F62;">1900000001</span><span style="color:#005CC5;">\\&quot;</span><span style="color:#032F62;">,...&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">-H</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;Accept: application/json&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">-H</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;Content-Type: application/json&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;{</span></span>
<span class="line"><span style="color:#032F62;">    &quot;appid&quot; : &quot;wxd678efh567hg6787&quot;,</span></span>
<span class="line"><span style="color:#032F62;">    &quot;mchid&quot; : &quot;1230000109&quot;,</span></span>
<span class="line"><span style="color:#032F62;">    &quot;description&quot; : &quot;Image 形象店-深圳腾大-QQ 公仔&quot;,</span></span>
<span class="line"><span style="color:#032F62;">    &quot;out_trade_no&quot; : &quot;1217752501201407033233368018&quot;,</span></span>
<span class="line"><span style="color:#032F62;">    &quot;notify_url&quot; : &quot; https://www.weixin.qq.com/wxpay/pay.php&quot;,</span></span>
<span class="line"><span style="color:#032F62;">    &quot;amount&quot; : {</span></span>
<span class="line"><span style="color:#032F62;">      &quot;total&quot; : 100,</span></span>
<span class="line"><span style="color:#032F62;">      &quot;currency&quot; : &quot;CNY&quot;</span></span>
<span class="line"><span style="color:#032F62;">    },</span></span>
<span class="line"><span style="color:#032F62;">    &quot;payer&quot; : {</span></span>
<span class="line"><span style="color:#032F62;">      &quot;openid&quot; : &quot;oUpF8uMuAJO_M2pxb1Q9zNjWeS6o\\t&quot;</span></span>
<span class="line"><span style="color:#032F62;">    }</span></span>
<span class="line"><span style="color:#032F62;">  }&#39;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>appid</strong> 公众号 ID</li><li><strong>mchid</strong> 直连商户号</li><li><strong>description</strong> 商品描</li><li><strong>out_trade_no</strong> 商户系统内部订单号，可以用来查询订单。</li><li><strong>notify_url</strong> 异步接收微信支付结果通知的回调地址</li><li><strong>amount</strong> 金额，单位 分</li><li><strong>payer</strong> 支付者，需要提供 openid</li></ul>`,3),_s={href:"https://pay.weixin.qq.com/docs/merchant/development/interface-rules/signature-generation.html",target:"_blank",rel:"noopener noreferrer"},ms=s("h2",{id:"申请证书",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#申请证书","aria-hidden":"true"},"#"),n(" 申请证书")],-1),gs={href:"https://pay.weixin.qq.com/wiki/doc/apiv3/open/pay/chapter2_8_1.shtml",target:"_blank",rel:"noopener noreferrer"},vs={href:"https://pay.weixin.qq.com/wiki/doc/apiv3/wechatpay/wechatpay3_0.shtml",target:"_blank",rel:"noopener noreferrer"},bs=s("strong",null,"APIv3 证书与密钥使用说明",-1),fs=s("h2",{id:"资源",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#资源","aria-hidden":"true"},"#"),n(" 资源")],-1),qs=s("p",null,"https://github.com/minibear2021/wechatpayv3?tab=readme-ov-file",-1),Es={href:"https://pay.weixin.qq.com/wiki/doc/apiv3/open/pay/chapter2_8_1.shtml",target:"_blank",rel:"noopener noreferrer"};function xs(ws,As){const a=t("ExternalLinkIcon");return r(),p("div",null,[y,s("div",u,[_,m,s("p",null,[n("微信支付 API v3 要求商户对请求进行签名，微信支付会在收到请求后进行签名的验证。如果签名验证不通过，微信支付 API v3 将会拒绝处理请求，并返回 401 Unauthorized。制作签名参考"),s("a",g,[n("这里"),e(a)]),n("。")])]),v,b,f,q,E,s("p",null,[n("该部分开发指南有："),s("a",x,[n("官方指南"),e(a)]),n("，或"),s("a",w,[n("开源 wechatpayv3"),e(a)]),n("，"),s("a",A,[n("微信支付接口文档"),e(a)]),n("（主要参考），"),s("a",C,[n("接口文档 2"),e(a)]),n("（主要参考）")]),s("ul",null,[k,s("li",null,[n("必要时，获取并更新平台证书（"),F,n("），这一步可以参考"),s("a",D,[n("这里"),e(a)]),n("，当然如果使用开源方案，比如"),s("a",P,[n("wechatpayv3"),e(a)]),n("，我们是不需要手动去更新平台证书的。")])]),I,s("ul",null,[s("li",null,[s("p",null,[S,n(),T,n("。除了商户信息外，需要提交商户订单号（"),z,n("），用户信息，商品信息到微信 API。参考"),s("a",H,[n("这里"),e(a)]),n("。")])]),N,s("li",null,[s("p",null,[j,n(" 根据 prepay id 生成下单参数和签名信息，官方参考代码在"),s("a",M,[n("这里"),e(a)]),n("。wechatpay 参考实现：")])])]),O,s("ul",null,[s("li",null,[s("p",null,[V,n(" 前端调用 "),B,n(" ，可以配置回调函数，当用户取消支付或者支付成功后，调用相关函数，参考"),s("a",G,[n("这里"),e(a)]),n("。")])]),L]),R,W,Q,U,s("ul",null,[X,s("li",null,[Y,n(" ，在用户输入密码，完成支付之后，后台定义好的 "),J,n(" 对应的 api 接收到微信发送过来的信息，显示用户支付的情况。关于如何写这个接受函数，可以参考"),s("a",K,[n("官方接口文档"),e(a)]),n("和"),s("a",$,[n("开源实现"),e(a)]),n("。（不过怎么测试都出不来用户取消支付的通知。）")]),s("li",null,[Z,n(" 在 "),ss,n(" 中，我们需要返回接受结果给微信，具体回复格式查看"),s("a",ns,[n("官方接口文档"),e(a)]),n("。")])]),as,s("p",null,[n("参考"),s("a",es,[n("微信小程序开发指引"),e(a)]),n("实际前后端发生的流程图如下：")]),ls,s("p",null,[os,n(" 可以配置回调函数，当用户取消支付或者支付成功后，调用相关函数，参考"),s("a",ts,[n("这里"),e(a)]),n("。")]),rs,s("p",null,[n("参考 "),s("a",ps,[n("微信支付 API v3 Python SDK"),e(a)]),n("，"),s("a",is,[n("微信支付接口文档"),e(a)]),n("，官方"),s("a",cs,[n("微信支付说明文档"),e(a)]),n(" 等。")]),ds,s("p",null,[n("往 "),hs,n(" 发送请求，"),s("a",ys,[n("接口文档"),e(a)]),n("。")]),us,s("p",null,[n("除了 body 外，微信的接口还需要每个商家进行签名验证，请参考签名"),s("a",_s,[n("验证文档"),e(a)]),n("，生成签名信息。")]),ms,s("p",null,[s("a",gs,[n("小程序支付接入前准备"),e(a)])]),s("p",null,[s("a",vs,[bs,n(),e(a)])]),fs,qs,s("p",null,[s("a",Es,[n("微信支付官方文档 - 接入准备"),e(a)])])])}const Fs=o(h,[["render",xs],["__file","笔记wxpay.html.vue"]]);export{Fs as default};
