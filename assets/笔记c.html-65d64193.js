import{_ as p,Q as t,V as e,Z as n,a2 as s,Y as o,a1 as c,aQ as l,H as i}from"./framework-8ecb9d65.js";const u={},k=n("h1",{id:"c-非常入门笔记",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#c-非常入门笔记","aria-hidden":"true"},"#"),s(" C 非常入门笔记")],-1),r=n("p",null,"嵌入式自学开始啦~ 为了自己的贾维斯",-1),d={href:"https://www.bilibili.com/video/BV1FA411v7YW?p=530&spm_id_from=pageDriver",target:"_blank",rel:"noopener noreferrer"},m=l(`<h2 id="_1-1-入门" tabindex="-1"><a class="header-anchor" href="#_1-1-入门" aria-hidden="true">#</a> 1.1 入门</h2><ul><li>key word <ul><li><p>rigister (for char, int) - 不能对 register 取地址</p></li><li><p>static - 修饰的变量保存再内存的静态空间种 | const - 不能修改的值 | extern - 用于全局变量声明</p></li></ul></li></ul><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">char</span> a <span class="token operator">=</span> <span class="token char">&#39;e&#39;</span><span class="token punctuation">;</span>  <span class="token comment">// char a = 97; 其中 97 为 ASCII 值</span>
	<span class="token comment">//%c 对数字输出 ASCII 对应字符, %d 对字符，输出 ASCII 值</span>
	
	<span class="token operator">%</span>d 十进制；<span class="token operator">%</span>ld <span class="token keyword">long</span> 十进制有符号； <span class="token operator">%</span>u 十进制无符号； <span class="token operator">%</span>#o 八进制表示；<span class="token operator">%</span>#x 十六进制表示；<span class="token operator">%</span>f <span class="token keyword">float</span>；<span class="token operator">%</span>lf <span class="token keyword">double</span>；<span class="token operator">%</span>e 指数型浮点数；<span class="token operator">%</span>c 单个字符；<span class="token operator">%</span>s 字 c 符串；<span class="token operator">%</span>p 指针的值
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>类型转换</li></ul><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token operator">-</span> 自动转换：<span class="token keyword">char</span><span class="token punctuation">,</span> <span class="token keyword">short</span> <span class="token operator">&gt;</span> <span class="token keyword">signed</span> <span class="token keyword">int</span> <span class="token operator">&gt;</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> <span class="token operator">&gt;</span> <span class="token keyword">long</span> <span class="token operator">&gt;</span> <span class="token keyword">double</span>
<span class="token number">5</span><span class="token operator">/</span><span class="token number">2</span> <span class="token comment">// = 2</span>
<span class="token number">5.0</span><span class="token operator">/</span><span class="token number">2</span> <span class="token comment">//  = 2.5</span>

<span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
<span class="token keyword">float</span> a <span class="token operator">=</span> <span class="token number">8.1f</span><span class="token punctuation">;</span>
c <span class="token operator">=</span> a<span class="token punctuation">;</span> <span class="token comment">//c: 8</span>
<span class="token operator">-</span> 强制转换
<span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>a<span class="token punctuation">;</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>x <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//计算后再转换</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>运算符：</p><ul><li>三目运算符：(A)?(B):(C) -- return B if A else C</li></ul></li><li><p>A = (B,C,D) -- 依次执行 BCD，A 为 D 的结果</p></li><li><p>% 只对整数有用</p></li><li><p>&amp;&amp; ( and), || (or), ! (not)</p></li><li><p><mark>位运算(二进制的运算，计算机自动转换)</mark></p></li><li><p>| , 等于 or</p></li><li><p>~， 1 变 0，0 变 1</p></li><li><p>^，异或</p><ul><li>、&gt;&gt; 右移，逻辑右移：低位溢出，高位补 0/ 算数右移：高位补符号位</li></ul></li><li><p>b = a++ same as b = a, a += 1 b = ++a same as a += 1, b = a</p></li></ul><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">/</span><span class="token keyword">char</span> condition<span class="token punctuation">)</span>
<span class="token punctuation">{</span><span class="token keyword">case</span> condition1<span class="token operator">:</span>  <span class="token comment">// if condition = condition1</span>
 		<span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">// 如果没有 break，执行完后会执行下一个 case 的语句，知道遇到 break</span>
 <span class="token keyword">default</span><span class="token operator">:</span>
	<span class="token keyword">break</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">goto</span> NEXT<span class="token punctuation">;</span><span class="token punctuation">}</span>
NEXT<span class="token operator">:</span>
	跳转到这里
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="函数" tabindex="-1"><a class="header-anchor" href="#函数" aria-hidden="true">#</a> 函数</h3><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token comment">// myfun.h 头文件中用来声明函数</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>
<span class="token keyword">void</span> <span class="token function">myfun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//myfun.c 中</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span> <span class="token expression"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> </span></span><span class="token string">&quot;myfun.h&quot;</span></span>
<span class="token keyword">void</span> <span class="token function">myfun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;my functino&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">}</span>

<span class="token comment">//main</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span> <span class="token expression"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> </span></span><span class="token string">&quot;myfun.h&quot;</span><span class="token comment">//用“”包含当前目录下找文件，&lt;&gt;包含系统中头文件。不要#include xxx.c 文件</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">myfun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>内存分区</p><ul><li><p>虚拟内存</p><ul><li><p>再写程序的，%p 看到的都是虚拟内存</p></li><li><p>32 位操作系统中，虚拟内存分为 3G 用户空间和 1G 内核空间</p></li><li><p>堆，栈（存放局部变量），静态全局区，代码区，文字常量区</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">static</span> <span class="token keyword">int</span> num<span class="token punctuation">;</span>  <span class="token comment">// 静态全局变量， 只在定义的.c 文件中有效</span>
<span class="token keyword">void</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> a<span class="token punctuation">;</span> <span class="token comment">//默认随机值   </span>
  <span class="token keyword">static</span> <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">//静态局部变量只初始化一次，默认赋值 0}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><h2 id="宏" tabindex="-1"><a class="header-anchor" href="#宏" aria-hidden="true">#</a> 宏</h2><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">PI</span> <span class="token expression"><span class="token number">3.14</span>  </span><span class="token comment">//不带参宏，一般大写</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">undef</span> <span class="token expression">PI</span><span class="token comment">//</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">S</span><span class="token expression"><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>  </span><span class="token comment">//加上括号防止计算顺序错误  </span></span>
num <span class="token operator">=</span> <span class="token function">S</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>； <span class="token comment">//带参宏浪费空间，节省时间； 带参函数浪费空间，节省空间</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>选择编译: 只有一块代码会被编译，都是再预编译，预处理阶段执行的 // 常用于头文件中，防止重复包含</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">AAA</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">AAA</span></span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="指针-以下内存为虚拟内存用户空间" tabindex="-1"><a class="header-anchor" href="#指针-以下内存为虚拟内存用户空间" aria-hidden="true">#</a> 指针 （以下内存为虚拟内存用户空间）</h3><p><strong>指针类型的转换</strong></p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code> <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">0x1234</span>；
 <span class="token keyword">char</span> <span class="token operator">*</span>p1<span class="token punctuation">,</span><span class="token operator">*</span>p2<span class="token punctuation">;</span>
 p1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>a<span class="token punctuation">;</span>  <span class="token comment">//*p1 = 0x34,把&amp;a 转换成 char 地址，</span>
p1<span class="token operator">++</span><span class="token punctuation">;</span>  <span class="token comment">//*p1 = 0x12，*+指针 取值，char 类型后取一个字节，指针++为加上指针字节数量，char 加 1，int 指针加 4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>数组与指针</strong></p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code> <span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">int</span> <span class="token operator">*</span>p<span class="token punctuation">;</span> p <span class="token operator">=</span> a<span class="token punctuation">;</span>  
 <span class="token comment">//p 指向 a[] 第一个元素所在地址  </span>
 <span class="token comment">//p 和 a 的不同：p 是变量，可以被赋值，a 是常量，不能被修改,其他功能大致相同</span>
 p<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> 
 <span class="token operator">*</span><span class="token punctuation">(</span>p<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token comment">//等于*(a+2), p+2 等于&amp;a[2]为 index 2 所在位置（对于 int，p+2 相当于 16 进制的地址+8）</span>
 <span class="token comment">//指针相减，等于指针之间数据个数</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>指针数组</strong></p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token operator">*</span>p<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//指针变量的类型相同 这边都是 int</span>
<span class="token keyword">int</span> a<span class="token punctuation">,</span>b<span class="token punctuation">;</span> p<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>a<span class="token punctuation">;</span> p<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>b<span class="token punctuation">;</span>
q <span class="token operator">=</span> <span class="token operator">&amp;</span>p<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">char</span> <span class="token operator">*</span>name<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;follow me&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;???&quot;</span><span class="token punctuation">}</span> <span class="token comment">//常用于保存字符串</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>指针字符串</strong></p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">char</span> str<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">;</span> <span class="token comment">//str[0] = &quot;y&quot;可以执行修改。栈和全局内存中的内容课修改。通常使用再局部的函数</span>
<span class="token keyword">char</span> <span class="token operator">*</span>str <span class="token operator">=</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">;</span> <span class="token comment">//*str == &quot;a&quot;，几乎不用，执行*str = &quot;y&quot; error,文字常量区的内容不可修改. str == &quot;abc&quot;</span>
<span class="token keyword">char</span> <span class="token operator">*</span>str <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">*</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//动态申请了 10 个字节的储存空间。堆区中的内容可修改。</span>
 <span class="token operator">*</span><span class="token operator">*</span>如果想要再其他的文件中也是用对应的字符串，建议使用堆区。堆区空间手动申请，手动释放<span class="token operator">*</span><span class="token operator">*</span> 

<span class="token keyword">char</span> buf_aver<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">char</span> <span class="token operator">*</span>buf_point <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span> <span class="token comment">//字符数组，指针指向的字符串，可以直接初始化</span>
<span class="token keyword">char</span> <span class="token operator">*</span>buf_heap <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">*</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//堆中存放的字符串不能初始化，只能用 srcpy/scanf 复制</span>

<span class="token function">strcpy</span><span class="token punctuation">(</span>buf_heap<span class="token punctuation">,</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
buf_aver <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>  <span class="token comment">//error,这边 buf_aver 被定义成数组名。用 strcpy(buf_aver,&quot;hello&quot;)</span>
buf_point <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>  <span class="token comment">//可以，*buf_point 为 h，且无法修改</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>数组指针</strong> -- 用于给传入二维数组参数</p><div class="language-C line-numbers-mode" data-ext="C"><pre class="language-C"><code>int (*p)[5]; int a[3][5]; // 数组指针的作用是，可以保存二维数组的首地址；
p = a; //
void fun(int(*p)[5]);//可以将二维数组传参, 调用时候： fun(a);

int a[10]; // &amp;a 变成一个一维数组指针（升级指针）， (&amp;a) + 1 跳跃了 40 个字节。但是对 p 取地址变成一个 int 地址
int b[10][8]; // *b 表示地址的降级为列指针，b 为行指针，b+1 为下一行的首地址，*b +1 为下一个元素的地址
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>指针与函数</strong> (修改变量地址上的数值，实现对全局变量的修改)</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">void</span> <span class="token function">myfun</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>p<span class="token punctuation">,</span><span class="token keyword">int</span> <span class="token operator">*</span>q<span class="token punctuation">,</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token operator">*</span>z<span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">char</span> <span class="token operator">*</span>z<span class="token punctuation">;</span> <span class="token keyword">int</span> a<span class="token punctuation">,</span>b<span class="token punctuation">;</span> <span class="token function">myfun</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">,</span><span class="token operator">&amp;</span>b<span class="token punctuation">,</span><span class="token operator">&amp;</span>z<span class="token punctuation">)</span><span class="token comment">// 传参时取地址，myfun 函数中用取值</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>函数传参</strong></p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">void</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>p<span class="token punctuation">)</span> <span class="token comment">// 传入一维数组的地址</span>
<span class="token keyword">void</span> <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//传入 2 维数组，a[0][2]相当于 p[0][2]</span>
<span class="token keyword">void</span> <span class="token function">fun3</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>q<span class="token punctuation">)</span> <span class="token comment">//传指针数组</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>指针函数</strong> ，函数返回指针（用于返回字符串）</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">char</span> <span class="token operator">*</span><span class="token function">fun4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span><span class="token keyword">char</span> str<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span> <span class="token comment">//栈区定义的空间会在函数运行结束后释放，这样 return 的指针指向 null</span>
 <span class="token comment">// static char str[100] = &quot;hello&quot;; //静态区的空间不会随着函数的结束而释放</span>
<span class="token keyword">return</span> str<span class="token punctuation">;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>函数指针</strong> , 将一个函数作为参数传递给另一个函数</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span><span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
p <span class="token operator">=</span> max<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>回调函数</strong></p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span><span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> x<span class="token operator">+</span>y<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">)</span>
<span class="token punctuation">{</span><span class="token keyword">int</span> ret<span class="token punctuation">;</span>
ret <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> ret<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>num <span class="token operator">=</span> <span class="token function">process</span><span class="token punctuation">(</span>add<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>空类型指针</strong></p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">void</span> <span class="token operator">*</span>q<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token operator">*</span>p<span class="token punctuation">;</span>q <span class="token operator">=</span> p<span class="token punctuation">;</span> <span class="token comment">//void 通用指针,主要用在函数的参数和返回值</span>
<span class="token keyword">char</span> <span class="token operator">*</span>z <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>main 函数传参</strong></p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//argc：传入参数的个数；argv：保存每一个命令终端传入的参数</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="动态内存申请" tabindex="-1"><a class="header-anchor" href="#动态内存申请" aria-hidden="true">#</a> 动态内存申请</h3><p>malloc, calloc</p><ul><li>申请后一定要判断是否申请成功，多次申请的内存，内存不一定连续；</li></ul><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//一般用 memset 初始化</span>
<span class="token keyword">void</span> <span class="token function">free</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>ptr<span class="token punctuation">)</span> <span class="token comment">//释放堆区的空间，必须释放 malloc，calloc 或 relloc 的返回值对应的所有空间。</span>

<span class="token keyword">char</span> <span class="token operator">*</span>str <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">100</span> <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//强转指针类型，为 str 开辟堆区空间</span>

<span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">calloc</span><span class="token punctuation">(</span><span class="token class-name">size_t</span> nmemb<span class="token punctuation">,</span> <span class="token class-name">size_t</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//参数（申请个数，每块的大小）</span>
<span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">realloc</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>s<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> newsize<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 增加或减少原先申请的空间，参数（原空间首地址，重新开辟空间大小）</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>内存泄漏（首地址丢了）</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">void</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">char</span> <span class="token operator">*</span>p<span class="token punctuation">;</span>
p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> p<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//或 free(p)；释放</span>
<span class="token comment">// p = NULL； 防止野指针</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="字符串处理函数" tabindex="-1"><a class="header-anchor" href="#字符串处理函数" aria-hidden="true">#</a> 字符串处理函数</h3><p>字符串遇到\\0 结束</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token keyword">char</span> s1<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d&quot;</span><span class="token punctuation">,</span><span class="token function">strlen</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">char</span> <span class="token operator">*</span><span class="token function">strcpy</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>dest<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//赋值包括\\0，输出遇到\\0 结束，保证目的地参数足够大</span>
<span class="token keyword">char</span> <span class="token operator">*</span><span class="token function">strnpy</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>dest<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>src<span class="token punctuation">,</span> size_t_n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//复制前 n 个 char</span>
<span class="token keyword">char</span> <span class="token operator">*</span><span class="token function">strcat</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>dest<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//append 字符串,包括\\0</span>
<span class="token keyword">char</span> <span class="token operator">*</span><span class="token function">strncat</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>dest<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>src<span class="token punctuation">,</span> size_t_n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//append n 个字符串,包括\\0</span>
<span class="token keyword">char</span> <span class="token operator">*</span><span class="token function">strcmp</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>s1<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>s2<span class="token punctuation">)</span><span class="token comment">// 相等返回 0，strncmp 比较前 n 字符</span>
<span class="token keyword">char</span> <span class="token operator">*</span><span class="token function">strchr</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>s<span class="token punctuation">,</span> <span class="token keyword">int</span> c<span class="token punctuation">)</span> <span class="token comment">//找 ascii 码为 c 的字符，首次匹配。strrchr 末次匹配。 返回所在地址</span>
<span class="token keyword">char</span> <span class="token operator">*</span><span class="token function">strstr</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>haystack<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>needle<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//在 haystack 指向的字符串中找 needle 指像字符串</span>
<span class="token keyword">int</span> <span class="token function">atoi</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>nptr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//将 nptr 转为 int，“123”转成 123 #include &lt;stdlib.h&gt; 用 atof 转化字符串为浮点型的数字</span>
<span class="token keyword">char</span> <span class="token operator">*</span><span class="token function">strtok</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>str<span class="token punctuation">,</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>delim<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//切割字符串</span>
<span class="token keyword">char</span> <span class="token operator">*</span>ret<span class="token punctuation">;</span> <span class="token keyword">char</span> s<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;11:22:33:44:55&quot;</span>
ret  <span class="token operator">=</span> <span class="token function">strtok</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span><span class="token string">&quot;:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回 11</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ret <span class="token operator">=</span> <span class="token function">strtok</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span><span class="token string">&quot;:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s\\n&quot;</span><span class="token punctuation">,</span>ret<span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token comment">//返回 22 33 44 55</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>格式化字符串</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>buf<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span>format<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">sprintf</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span><span class="token string">&quot;%d,%d,%d&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// buf = ‘1,2,3&#39;</span>
<span class="token function">sscanf</span><span class="token punctuation">(</span><span class="token string">&quot;1:2:3&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;%d:%d:%d&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>a<span class="token punctuation">,</span><span class="token operator">&amp;</span>b<span class="token punctuation">,</span><span class="token operator">&amp;</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//a = 1, b = 2 匹配同样类型的字</span>
<span class="token function">sscanf</span><span class="token punctuation">(</span><span class="token string">&quot;1234 5678&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;%*d %4s&quot;</span><span class="token punctuation">,</span>buf<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//跳过数字， %[width]s 保存 n 个字</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>const</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">const</span> <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token comment">//全局变量，只读，不能修改</span>
<span class="token keyword">void</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">const</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token comment">//不能直接赋值修改，可以通过地址修改局部变量</span>
<span class="token keyword">void</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
    <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token operator">&amp;</span>c<span class="token punctuation">;</span> <span class="token comment">//这样无法修改 *p = 1;</span>
    <span class="token keyword">int</span> <span class="token operator">*</span> <span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token operator">&amp;</span>c<span class="token punctuation">;</span> <span class="token comment">//这样无法修改 p = &amp;d;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="结构体-共用体-枚举" tabindex="-1"><a class="header-anchor" href="#结构体-共用体-枚举" aria-hidden="true">#</a> 结构体，共用体，枚举</h3><p><strong>普通结构体变量</strong></p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">struct</span> <span class="token class-name">stu</span><span class="token punctuation">{</span> <span class="token keyword">int</span> num<span class="token punctuation">;</span> <span class="token keyword">char</span> name<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span>xiaoming<span class="token punctuation">,</span> xiaohong<span class="token punctuation">;</span><span class="token comment">//一般结构体都会定义在全局</span>
<span class="token keyword">struct</span> <span class="token class-name">stu</span> bob <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">123</span>，<span class="token string">&quot;bob&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//初始化变量</span>

<span class="token keyword">typedef</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token keyword">int</span> year<span class="token punctuation">;</span> <span class="token keyword">int</span> month<span class="token punctuation">;</span> <span class="token keyword">int</span> day<span class="token punctuation">}</span>BD<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span><span class="token keyword">int</span> num<span class="token punctuation">;</span> <span class="token keyword">char</span> name<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span> BD birthday<span class="token punctuation">;</span><span class="token punctuation">}</span>STU<span class="token punctuation">;</span> <span class="token comment">// STU 为结构体类型，相当于 struct + 结构体名</span>
STU xiaohong <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">123</span>，<span class="token string">&quot;小明&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">2008</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//或{123，“小明”,2008,12,12}</span>

xiaohong<span class="token punctuation">.</span>num <span class="token operator">=</span> <span class="token number">1001</span><span class="token punctuation">;</span>
<span class="token function">strcpy</span><span class="token punctuation">(</span>xiaohong<span class="token punctuation">.</span>name<span class="token punctuation">,</span><span class="token string">&quot;小红&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xiaohong<span class="token punctuation">.</span>birthday<span class="token punctuation">.</span>year <span class="token operator">=</span> <span class="token number">2008</span><span class="token punctuation">;</span>
xiaohong<span class="token punctuation">.</span>birthday<span class="token punctuation">.</span>month <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>

xiaohong <span class="token operator">=</span> xiaoming<span class="token punctuation">;</span> <span class="token comment">//相同结构的结构体可以互相赋值</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>结构体数组</strong></p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">struct</span> <span class="token class-name">stu</span> edu<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token number">123</span><span class="token punctuation">,</span><span class="token string">&quot;xiaoming&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token string">&quot;asd&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//edu[0],edu[1]..</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>结构体指针</strong></p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token keyword">struct</span> <span class="token class-name">stu</span> <span class="token operator">*</span>s<span class="token punctuation">;</span>  <span class="token punctuation">(</span><span class="token operator">*</span>s<span class="token punctuation">)</span><span class="token punctuation">.</span>num <span class="token operator">=</span> <span class="token number">101</span><span class="token punctuation">;</span> s <span class="token operator">-&gt;</span> <span class="token number">101</span><span class="token punctuation">;</span>
s <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">stu</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">stu</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//常用</span>
s<span class="token operator">-&gt;</span>num <span class="token operator">=</span> <span class="token number">101</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>结构体内存分配，</p><ul><li>按照最大的字节类型开辟空间，根据最大的字节类型进行字节对齐</li><li>出现数组时，可以看作多个变量</li></ul><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">struct</span> <span class="token class-name">stu</span><span class="token punctuation">{</span> <span class="token keyword">char</span> a<span class="token punctuation">;</span><span class="token keyword">short</span> <span class="token keyword">int</span> b<span class="token punctuation">;</span><span class="token keyword">int</span> c<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment">//8 字节 </span>
<span class="token keyword">struct</span> <span class="token class-name">stu</span><span class="token punctuation">{</span> <span class="token keyword">char</span> a<span class="token punctuation">;</span> <span class="token keyword">int</span> c<span class="token punctuation">;</span> <span class="token keyword">short</span> <span class="token keyword">int</span> b<span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token comment">//12 字节</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>位段</strong></p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">struct</span> <span class="token class-name">stu</span><span class="token punctuation">{</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> a<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">;</span> <span class="token keyword">int</span> b<span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// a 只能取 0-3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>共用体 （struct 换成 union)</strong></p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">union</span> un<span class="token punctuation">{</span><span class="token keyword">int</span> a<span class="token punctuation">;</span> <span class="token keyword">int</span> b<span class="token punctuation">;</span> <span class="token keyword">int</span> c<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">union</span> un myun<span class="token punctuation">;</span>
myun<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> myun<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span> myun<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span> <span class="token comment">//最后 abc 都是 300</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>枚举</strong></p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">enum</span> <span class="token class-name">week</span> <span class="token punctuation">{</span>mon <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>tue<span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> wed <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> fri <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span> 
<span class="token keyword">enum</span> <span class="token class-name">week</span> day1 <span class="token operator">=</span> mon<span class="token punctuation">;</span> <span class="token comment">//变量只能用里面的值，这边 day1 = 1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="链表" tabindex="-1"><a class="header-anchor" href="#链表" aria-hidden="true">#</a> 链表</h3><p><strong>单项链表</strong></p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">stu</span><span class="token punctuation">{</span> <span class="token keyword">int</span> num<span class="token punctuation">;</span> <span class="token keyword">char</span> name<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">struct</span> <span class="token class-name">stu</span> <span class="token operator">*</span>next<span class="token punctuation">;</span><span class="token punctuation">}</span>STU<span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">linked_list_append</span><span class="token punctuation">(</span>STU <span class="token operator">*</span><span class="token operator">*</span>p_head<span class="token punctuation">,</span>STU <span class="token operator">*</span>p_new<span class="token punctuation">)</span><span class="token punctuation">{</span>
    STU <span class="token operator">*</span>p_mov <span class="token operator">=</span> <span class="token operator">*</span>p_head<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">*</span>p_head <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>  <span class="token operator">*</span>p_head <span class="token operator">=</span> p_new<span class="token punctuation">;</span>
        p_new <span class="token operator">-&gt;</span> next <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>p_mov<span class="token operator">-&gt;</span>next <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span> p_mov <span class="token operator">=</span> p_mov<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span> <span class="token punctuation">}</span>
        p_mov <span class="token operator">-&gt;</span> next <span class="token operator">=</span> p_new<span class="token punctuation">;</span>
        p_new<span class="token operator">-&gt;</span>next <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    STU <span class="token operator">*</span>head <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">,</span><span class="token operator">*</span>p_new <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span> <span class="token keyword">int</span> num<span class="token punctuation">,</span>i<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>num<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        p_new <span class="token operator">=</span> <span class="token punctuation">(</span>STU<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>STU<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        p_new<span class="token operator">-&gt;</span>num <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token function">strcpy</span><span class="token punctuation">(</span>p_new<span class="token operator">-&gt;</span>name<span class="token punctuation">,</span><span class="token string">&quot;小红&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">linked_list_append</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>head<span class="token punctuation">,</span>p_new<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


STU head <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
STU node <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;node1&quot;</span><span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">}</span><span class="token punctuation">;</span> head <span class="token operator">-&gt;</span> next <span class="token operator">=</span> node<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>链表释放</p><ul><li>重新定义一个指针，保存 p-&gt; next。 然后释放 p free(p);p = NULL;</li></ul></li></ul><h3 id="文件" tabindex="-1"><a class="header-anchor" href="#文件" aria-hidden="true">#</a> 文件</h3><p>行缓冲 - 到换行，程序退出 或缓冲区满 1024 bytes 时候才刷新，执行读写操作</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;ello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//不加换行符不输出</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token function">ffulsh</span><span class="token punctuation">(</span><span class="token constant">stdout</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//刷新</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>文件结构体指针</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token constant">stdin</span> <span class="token punctuation">,</span> <span class="token constant">stdout</span><span class="token punctuation">,</span> <span class="token constant">stderr</span> <span class="token comment">// 三个特殊文件指针</span>
FILE <span class="token operator">*</span>fp<span class="token punctuation">;</span>
fp <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span> <span class="token string">&quot;c:/Users/file.txt&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;r&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>fp <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot; fail to open&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token function">fgetc</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//int fgetc(FILE *stream); 读取一个字节,可以读取到换行符。while((c = fgetc(fp)) != EOF)</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d&quot;</span><span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fputc</span><span class="token punctuation">(</span><span class="token string">&quot;w&quot;</span><span class="token punctuation">,</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//写入一个字节</span>

<span class="token keyword">char</span> buf<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token function">fgets</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 读取 7 个字节加上一个\\0， 遇到换行结束</span>
<span class="token function">fputs</span><span class="token punctuation">(</span>“hhhhhh”，fp<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token function">fclose</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code>num <span class="token operator">=</span> <span class="token function">fread</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//读取 3 块，每块 100 字节； 读到 200-299 个字，返回 2。</span>
<span class="token function">fwrite</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//返回实际写的块数。可以写入结构体</span>
<span class="token function">rewind</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//重置文件偏移量</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span>fp<span class="token punctuation">,</span><span class="token string">&quot;%d%d&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//写入字符串</span>
<span class="token function">fscanf</span><span class="token punctuation">(</span>fp<span class="token punctuation">,</span><span class="token string">&quot;%d%d&quot;</span><span class="token punctuation">,</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//读取文件，保存到 a,b</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>文件指定位置读写</strong></p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token function">ftell</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取当前指针位置 %ld</span>
<span class="token function">fseek</span><span class="token punctuation">(</span>fp<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token constant">SEEK_SET</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//开头后移 3 个位置，SEEK_SET,SEEK_CUR(当前位置),SEEK_END</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,82);function v(b,y){const a=i("ExternalLinkIcon");return t(),e("div",null,[k,n("blockquote",null,[r,n("p",null,[s("笔记总结 课程链接："),n("a",d,[s("千峰嵌入式教程"),o(a)])])]),c(" more"),m])}const w=p(u,[["render",v],["__file","笔记c.html.vue"]]);export{w as default};
