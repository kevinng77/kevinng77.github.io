import{_ as s}from"./plugin-vue_export-helper-c27b6911.js";import{o as n,c as a,f as l}from"./app-a26e9423.js";const e={},p=l(`<h2 id="frp-简易部署内网穿透" tabindex="-1"><a class="header-anchor" href="#frp-简易部署内网穿透" aria-hidden="true">#</a> FRP 简易部署内网穿透</h2><p>部署 FRP，需要在一台拥有公网 IP 的服务器上安装 FRP server，然后在本地需要进行内网穿透的机器上安装 FRP client。安装成功后，能够实现在访问 FRP server 某个端口时候，转接到 FRP client 对应的端口上。</p><h3 id="服务器端" tabindex="-1"><a class="header-anchor" href="#服务器端" aria-hidden="true">#</a> 服务器端</h3><p>在拥有公网 IP 的服务器上操作</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">vim</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/frp/frps.ini</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>而后在 <code>frps.ini</code> 中写入：</p><div class="language-ini line-numbers-mode" data-ext="ini"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">[common]</span></span>
<span class="line"><span style="color:#D73A49;">bind_port</span><span style="color:#24292E;"> = 7000</span></span>
<span class="line"><span style="color:#D73A49;">dashboard_port</span><span style="color:#24292E;"> = 7500</span></span>
<span class="line"><span style="color:#D73A49;">dashboard_user</span><span style="color:#24292E;"> = admin</span></span>
<span class="line"><span style="color:#D73A49;">dashboard_pwd</span><span style="color:#24292E;"> = dashbord_passwd</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">vhost_http_port</span><span style="color:#24292E;"> = 7080</span></span>
<span class="line"><span style="color:#D73A49;">vhost_https_port</span><span style="color:#24292E;"> = 7081</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">token</span><span style="color:#24292E;"> = your_passwd</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>而后在服务器上安装 frp docker 即可：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--restart=always</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--network</span><span style="color:#24292E;"> </span><span style="color:#032F62;">host</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/frp/frps.ini:/etc/frp/frps.ini</span><span style="color:#24292E;"> </span><span style="color:#032F62;">snowdreamtech/frps:0.48.0</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="客户端操作" tabindex="-1"><a class="header-anchor" href="#客户端操作" aria-hidden="true">#</a> 客户端操作</h3><p>创建 <code>frpc.ini</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">vim</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/frp/frpc.ini</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>写入：</p><div class="language-ini line-numbers-mode" data-ext="ini"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">[common]</span></span>
<span class="line"><span style="color:#D73A49;">server_addr</span><span style="color:#24292E;"> = your_srp_server_ip</span></span>
<span class="line"><span style="color:#D73A49;">server_port</span><span style="color:#24292E;"> = 7000</span></span>
<span class="line"><span style="color:#D73A49;">token</span><span style="color:#24292E;"> = your_passwd</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">[ssh]</span></span>
<span class="line"><span style="color:#D73A49;">type</span><span style="color:#24292E;"> = tcp</span></span>
<span class="line"><span style="color:#D73A49;">local_ip</span><span style="color:#24292E;"> = 127.0.0.1</span></span>
<span class="line"><span style="color:#D73A49;">local_port</span><span style="color:#24292E;"> = 22</span></span>
<span class="line"><span style="color:#D73A49;">remote_port</span><span style="color:#24292E;"> = 2222</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">[ssh]</span></span>
<span class="line"><span style="color:#D73A49;">type</span><span style="color:#24292E;"> = tcp</span></span>
<span class="line"><span style="color:#D73A49;">local_ip</span><span style="color:#24292E;"> = 192.168.1.229</span></span>
<span class="line"><span style="color:#D73A49;">local_port</span><span style="color:#24292E;"> = 80</span></span>
<span class="line"><span style="color:#D73A49;">remote_port</span><span style="color:#24292E;"> = 18022</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如上配置，访问 FRP server 公网 ip:2222 时，会被跳转到 <code>127.0.0.1:22</code> 端口上，访问 <code>18022</code> 端口则跳转到路由器网络内的另一台机子上 <code>192.168.1.229:80</code></p><p>可以配置映射的 IP 范围：</p><div class="language-ini line-numbers-mode" data-ext="ini"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">[range:FTP]</span></span>
<span class="line"><span style="color:#D73A49;">type</span><span style="color:#24292E;"> = tcp</span></span>
<span class="line"><span style="color:#D73A49;">local_port</span><span style="color:#24292E;"> = 5000-5050</span></span>
<span class="line"><span style="color:#D73A49;">remote_port</span><span style="color:#24292E;"> = 5000-5050</span></span>
<span class="line"><span style="color:#D73A49;">local_ip</span><span style="color:#24292E;"> = 127.0.0.1</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>同样的启动 frp client：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--restart=always</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--net=host</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/frp/:/etc/frp/</span><span style="color:#24292E;"> </span><span style="color:#032F62;">snowdreamtech/frpc:0.48.0</span><span style="color:#24292E;"> </span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="监控界面" tabindex="-1"><a class="header-anchor" href="#监控界面" aria-hidden="true">#</a> 监控界面</h3><p>通过 <code>公网 ip:7500</code> 可以看到 frp webui</p>`,21),i=[p];function o(r,c){return n(),a("div",null,i)}const v=s(e,[["render",o],["__file","笔记frp.html.vue"]]);export{v as default};
