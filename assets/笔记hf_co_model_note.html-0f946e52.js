import{_ as e,P as s,U as n,aQ as i}from"./framework-6cee4965.js";const a={},t=i(`<p>将本地模型训练完后，除了实用 huggingface transformers 自带的 upload to hub 功能之外，我们还可以实用 git 等工具上传到 huggingface.co 上。</p><h2 id="快速上手" tabindex="-1"><a class="header-anchor" href="#快速上手" aria-hidden="true">#</a> 快速上手</h2><ol><li>创建账户与仓库</li></ol><p>首先在 huggingface 上注册账户，而后点击用户头像选择添加新模型: <code>+ New Model</code></p><p>同创建 github 仓库一样，选择创建一个用于储存模型的仓库，如 <code>kevinng77/text_to_sql_t5_distill </code></p><ol start="2"><li>链接到你创建的仓库</li></ol><p>Huggingface 可以支持实用 http 链接，如：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># Make sure you have git-lfs installed (https://git-lfs.com)</span>
<span class="token function">git</span> lfs <span class="token function">install</span>
<span class="token function">git</span> clone https://huggingface.co/kevinng77/text_to_sql_t5_distill

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container info"><p class="hint-container-title">相关信息</p><p>如果没有安装 git lfs，可以用 <code>sudo apt-get install git-lfs</code></p></div><p>也可以用 ssh 链接，实用 ssh 的话，需要更换链接地址为：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">git</span> lfs <span class="token function">install</span>
<span class="token function">git</span> clone ssh://git@hf.co:kevinng77/text_to_sql_t5_distill
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>当然，你也可以直接添加 remote，而不需要 clone 整个仓库：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>git remote add origin ssh://git@hf.co:kevinng77/text_to_sql_t5_distill
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>用 ssh 时，需要在 huggingface 上传你的 ssh 公钥。</p></div><ol start="3"><li>commit 你的文件</li></ol><p>在 <code>git add</code> 你的模型权重之前，请先 track 你要上传的大文件（一般为模型权重）：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">git</span> lfs track *.bin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>完成后 <code>git add .</code>， <code>git commit -m &quot;update model&quot;</code> 即可。</p><ol start="4"><li>推送到 huggingface.co</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># git push origin 本机 branch:远端 branch</span>
<span class="token function">git</span> push origin master:main
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="一些坑" tabindex="-1"><a class="header-anchor" href="#一些坑" aria-hidden="true">#</a> 一些坑</h3><ol><li><p>使用 vscode 终端时，可能出现上传问题，可以尝试使用终端 ssh（不用 vscode 提供的终端）。</p></li><li><p>使用 ssh 时，可能出现 GIT LFS Locking API Error，可以使用通过暂时移除 lfs lock verify 来解决：</p></li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># Remote &quot;origin&quot; does not support the Git LFS locking API. Consider disabling it with:</span>
<span class="token function">git</span> config lfs.https://hf.co/kevinng77/text_to_sql_t5_distill.git/info/lfs.locksverify <span class="token boolean">false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>通过 http 链接到 huggignface，在 push 时候使用的密码，需要在 huggingface 上生成（settings-&gt;access token-&gt;generate access token），使用默认用户密码是登录不上去的。</li></ol>`,24),l=[t];function o(c,d){return s(),n("div",null,l)}const g=e(a,[["render",o],["__file","笔记hf_co_model_note.html.vue"]]);export{g as default};
