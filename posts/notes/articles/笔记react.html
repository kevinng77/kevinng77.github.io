<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.67" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="http://antarina.tech/posts/notes/articles/%E7%AC%94%E8%AE%B0react.html"><meta property="og:site_name" content="è®°å¿†ç¬”ä¹¦"><meta property="og:title" content="React å¿«é€Ÿäº†è§£åŸºç¡€"><meta property="og:description" content="åœ¨æœ€æ–°çš„å‰ç«¯å¼€å‘æŠ€æœ¯ä¸­ï¼ŒReact æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œä¸”è¢«å¹¿æ³›é‡‡ç”¨çš„ JavaScript åº“ ä¹‹ä¸€ã€‚React ä»¥å£°æ˜å¼çš„æ–¹å¼å¤„ç†ç”¨æˆ·ç•Œé¢ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿä½¿ç”¨ç»„ä»¶æ¥æ„å»ºå¯é‡ç”¨å’Œå¯ç»´æŠ¤çš„ç•Œé¢ã€‚è¿™ç¯‡æ–‡ç« å°†ä¼šå¸¦ä½ ä»åŸºç¡€å…¥é—¨å¼€å§‹ï¼Œæ„‰å¿«çš„å­¦ä¹  Reactï¼ å‚è€ƒ https://react.dev/learn ç¼–è¾‘å™¨ï¼šVS Codeï¼ˆè£…æ’ä»¶ï¼šESLintã€Prettierã€React Developer Tools æµè§ˆå™¨æ‰©å±•ï¼‰ 1. é¡¹ç›®ç»“æ„é€Ÿè§ˆï¼ˆè„šæ‰‹æ¶ç”Ÿæˆï¼‰ è®¸å¤šå·¥å…·éƒ½èƒ½å¤Ÿåˆ›å»ºä¸€ä¸ª react æ¨¡æ¿é¡¹ç›®ï¼Œå¦‚ React Router (v7)ã€‚"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="Kevin å´å˜‰æ–‡"><meta property="article:tag" content="webfront"><meta property="article:published_time" content="2025-09-10T00:00:00.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"React å¿«é€Ÿäº†è§£åŸºç¡€","image":[""],"datePublished":"2025-09-10T00:00:00.000Z","dateModified":null,"author":[{"@type":"Person","name":"Kevin å´å˜‰æ–‡"}]}</script><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;700&display=swap" rel="stylesheet"><link rel="icon" href="/logo.svg"><title>React å¿«é€Ÿäº†è§£åŸºç¡€ | è®°å¿†ç¬”ä¹¦</title><meta name="description" content="åœ¨æœ€æ–°çš„å‰ç«¯å¼€å‘æŠ€æœ¯ä¸­ï¼ŒReact æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œä¸”è¢«å¹¿æ³›é‡‡ç”¨çš„ JavaScript åº“ ä¹‹ä¸€ã€‚React ä»¥å£°æ˜å¼çš„æ–¹å¼å¤„ç†ç”¨æˆ·ç•Œé¢ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿä½¿ç”¨ç»„ä»¶æ¥æ„å»ºå¯é‡ç”¨å’Œå¯ç»´æŠ¤çš„ç•Œé¢ã€‚è¿™ç¯‡æ–‡ç« å°†ä¼šå¸¦ä½ ä»åŸºç¡€å…¥é—¨å¼€å§‹ï¼Œæ„‰å¿«çš„å­¦ä¹  Reactï¼ å‚è€ƒ https://react.dev/learn ç¼–è¾‘å™¨ï¼šVS Codeï¼ˆè£…æ’ä»¶ï¼šESLintã€Prettierã€React Developer Tools æµè§ˆå™¨æ‰©å±•ï¼‰ 1. é¡¹ç›®ç»“æ„é€Ÿè§ˆï¼ˆè„šæ‰‹æ¶ç”Ÿæˆï¼‰ è®¸å¤šå·¥å…·éƒ½èƒ½å¤Ÿåˆ›å»ºä¸€ä¸ª react æ¨¡æ¿é¡¹ç›®ï¼Œå¦‚ React Router (v7)ã€‚">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-99575b2e.css" as="style"><link rel="stylesheet" href="/assets/style-99575b2e.css">
    <link rel="modulepreload" href="/assets/app-c09ad24c.js"><link rel="modulepreload" href="/assets/ç¬”è®°react.html-ac6e64a6.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="modulepreload" href="/assets/ç¬”è®°react.html-4c83f2e3.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container no-sidebar has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand vp-brand" href="/"><!----><!----><span class="vp-site-name">è®°å¿†ç¬”ä¹¦</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a aria-label="ä¸»é¡µ" class="vp-link nav-link nav-link" href="/"><span class="font-icon icon iconfont icon-home" style=""></span>ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="å½’æ¡£" class="vp-link nav-link nav-link" href="/timeline/"><span class="font-icon icon iconfont icon-categoryselected" style=""></span>å½’æ¡£<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/kevinng77" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><!----><!--[--><button type="button" class="search-pro-button" role="search" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">æœç´¢</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->React å¿«é€Ÿäº†è§£åŸºç¡€</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">Kevin å´å˜‰æ–‡</span></span><span property="author" content="Kevin å´å˜‰æ–‡"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2025-09-10T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 22 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT22M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category7 clickable" role="navigation">çŸ¥è¯†ç¬”è®°</span><!--]--><meta property="articleSection" content="çŸ¥è¯†ç¬”è®°"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag7 clickable" role="navigation">webfront</span><!--]--><meta property="keywords" content="webfront"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<!----></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_1-é¡¹ç›®ç»“æ„é€Ÿè§ˆ-è„šæ‰‹æ¶ç”Ÿæˆ">1. é¡¹ç›®ç»“æ„é€Ÿè§ˆï¼ˆè„šæ‰‹æ¶ç”Ÿæˆï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_2-å¯åŠ¨é¡¹ç›®">2. å¯åŠ¨é¡¹ç›®</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_3-react-åŸºç¡€-ç»„ä»¶-jsx-çŠ¶æ€">3. React åŸºç¡€ï¼šç»„ä»¶ + JSX + çŠ¶æ€</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_4-äº‹ä»¶å¤„ç†">4. äº‹ä»¶å¤„ç†</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#å°†äº‹ä»¶å¤„ç†å™¨ä½œä¸º-props-ä¼ é€’-passing-event-handlers-as-props">å°†äº‹ä»¶å¤„ç†å™¨ä½œä¸º Props ä¼ é€’ï¼ˆPassing event handlers as propsï¼‰</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_5-çŠ¶æ€">5. çŠ¶æ€</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_1-æ·»åŠ å…ƒç´ -add">1. æ·»åŠ å…ƒç´ ï¼ˆAddï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_2-åˆ é™¤å…ƒç´ -remove">2. åˆ é™¤å…ƒç´ ï¼ˆRemoveï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_3-è½¬æ¢-æ›´æ–°å…ƒç´ -transform-replace">3. è½¬æ¢/æ›´æ–°å…ƒç´ ï¼ˆTransform / Replaceï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_4-æ’å…¥å…ƒç´ åˆ°ä¸­é—´ä½ç½®-insert">4. æ’å…¥å…ƒç´ åˆ°ä¸­é—´ä½ç½®ï¼ˆInsertï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_5-å…¶ä»–éœ€è¦æ³¨æ„çš„å˜åŠ¨-æ’åºã€åè½¬ã€æ·±å±‚åµŒå¥—ä¿®æ”¹">5. å…¶ä»–éœ€è¦æ³¨æ„çš„å˜åŠ¨ï¼ˆæ’åºã€åè½¬ã€æ·±å±‚åµŒå¥—ä¿®æ”¹ï¼‰</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_6-reducer">6. Reducer</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#ç¼–å†™-reducer-å‡½æ•°">ç¼–å†™ reducer å‡½æ•°</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#åœ¨ç»„ä»¶ä¸­ä½¿ç”¨-usereducer">åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ useReducer</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_7-context">7. Context</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_1-åˆ›å»º-context">1. åˆ›å»º Context</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_2-åœ¨éœ€è¦è¯»å–æ•°æ®çš„ç»„ä»¶ä¸­ä½¿ç”¨-usecontext">2. åœ¨éœ€è¦è¯»å–æ•°æ®çš„ç»„ä»¶ä¸­ä½¿ç”¨ useContext</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_3-åœ¨æä¾›æ•°æ®çš„ç»„ä»¶ä¸­ä½¿ç”¨-provider">3. åœ¨æä¾›æ•°æ®çš„ç»„ä»¶ä¸­ä½¿ç”¨ Provider</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_8-ref">8. Ref</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_1-å¯¼å…¥-useref">1. å¯¼å…¥ useRef</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_2-åœ¨ç»„ä»¶å†…éƒ¨è°ƒç”¨-æŒ‡å®šåˆå§‹å€¼">2. åœ¨ç»„ä»¶å†…éƒ¨è°ƒç”¨ï¼ŒæŒ‡å®šåˆå§‹å€¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_3-è®¿é—®æˆ–ä¿®æ”¹-ref-current">3. è®¿é—®æˆ–ä¿®æ”¹ ref.current</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_9-effect">9. Effect</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#ä¾‹å­-ç”¨-effect-æ§åˆ¶-video-æ’­æ”¾">ä¾‹å­ï¼šç”¨ Effect æ§åˆ¶ &lt;video&gt; æ’­æ”¾</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–æ•°ç»„">ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–æ•°ç»„ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#ä¸€ä¸ªç»å…¸å‘-åœ¨-effect-é‡Œç›´æ¥-setstate">ä¸€ä¸ªç»å…¸å‘ï¼šåœ¨ Effect é‡Œç›´æ¥ setState</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_10-react-ç”Ÿå‘½å‘¨æœŸ">10. React ç”Ÿå‘½å‘¨æœŸ</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#æ ¸å¿ƒç¤ºä¾‹-chatroom">æ ¸å¿ƒç¤ºä¾‹ï¼šChatRoom</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#ä¸ºä»€ä¹ˆä¸ä»…ä»…æ˜¯-æŒ‚è½½-å¸è½½">ä¸ºä»€ä¹ˆä¸ä»…ä»…æ˜¯â€œæŒ‚è½½ï¼å¸è½½â€ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#ä»-effect-è§’åº¦æ€è€ƒ">ä» Effect è§’åº¦æ€è€ƒ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#ä¾èµ–æ•°ç»„-dependencies-è¦ç‚¹">ä¾èµ–æ•°ç»„ï¼ˆDependenciesï¼‰è¦ç‚¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#å°ç»“">å°ç»“</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_11-hook">11. Hook</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#ä¾‹å­-æŠŠè¡¨å•è¾“å…¥çš„é‡å¤é€»è¾‘æŠ½å‡ºæ¥">ä¾‹å­ï¼šæŠŠè¡¨å•è¾“å…¥çš„é‡å¤é€»è¾‘æŠ½å‡ºæ¥</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#å°ç»“-1">å°ç»“</a></li><!----><!--]--></ul></li><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><p>åœ¨æœ€æ–°çš„å‰ç«¯å¼€å‘æŠ€æœ¯ä¸­ï¼ŒReact æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œä¸”è¢«å¹¿æ³›é‡‡ç”¨çš„ <strong>JavaScript åº“</strong> ä¹‹ä¸€ã€‚React ä»¥å£°æ˜å¼çš„æ–¹å¼å¤„ç†ç”¨æˆ·ç•Œé¢ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿä½¿ç”¨ç»„ä»¶æ¥æ„å»ºå¯é‡ç”¨å’Œå¯ç»´æŠ¤çš„ç•Œé¢ã€‚è¿™ç¯‡æ–‡ç« å°†ä¼šå¸¦ä½ ä»åŸºç¡€å…¥é—¨å¼€å§‹ï¼Œæ„‰å¿«çš„å­¦ä¹  Reactï¼</p><p>å‚è€ƒ https://react.dev/learn</p><!--more--><p>ç¼–è¾‘å™¨ï¼šVS Codeï¼ˆè£…æ’ä»¶ï¼šESLintã€Prettierã€React Developer Tools æµè§ˆå™¨æ‰©å±•ï¼‰</p><hr><h2 id="_1-é¡¹ç›®ç»“æ„é€Ÿè§ˆ-è„šæ‰‹æ¶ç”Ÿæˆ" tabindex="-1"><a class="header-anchor" href="#_1-é¡¹ç›®ç»“æ„é€Ÿè§ˆ-è„šæ‰‹æ¶ç”Ÿæˆ" aria-hidden="true">#</a> 1. é¡¹ç›®ç»“æ„é€Ÿè§ˆï¼ˆè„šæ‰‹æ¶ç”Ÿæˆï¼‰</h2><p>è®¸å¤šå·¥å…·éƒ½èƒ½å¤Ÿåˆ›å»ºä¸€ä¸ª react æ¨¡æ¿é¡¹ç›®ï¼Œå¦‚ React Router (v7)ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">npx</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create-react-router@latest</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è„šæ‰‹æ¶ä¼šç”Ÿæˆä¸€ä¸ªä»¥ <strong>æ•°æ®è·¯ç”±ï¼ˆData Routersï¼‰</strong> ä¸ºä¸­å¿ƒçš„ç»“æ„ï¼Œå¤§è‡´åŒ…å«ï¼š</p><table><thead><tr><th>æ–‡ä»¶å¤¹/æ–‡ä»¶</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>app/</code></td><td>ä¸»è¦ä»£ç ç›®å½•ï¼ˆç±»ä¼¼ Remixï¼‰</td></tr><tr><td>â”£ <code>routes/</code></td><td>è·¯ç”±æ–‡ä»¶å¤¹ï¼ˆæ–‡ä»¶å³è·¯ç”±ï¼‰</td></tr><tr><td>â”ƒ â”£ <code>home.tsx</code></td><td><code>/home</code> é¡µé¢ç»„ä»¶</td></tr><tr><td>â”ƒ â”— <code>routes.ts</code></td><td>å¯¼å‡ºè·¯ç”±å®šä¹‰ï¼ˆè‡ªåŠ¨ç”Ÿæˆç”¨ï¼‰</td></tr><tr><td>â”£ <code>welcome/</code></td><td>å¯é€‰åµŒå¥—è·¯ç”±æˆ–ç»„ä»¶ç›®å½•</td></tr><tr><td>â”£ <code>root.tsx</code></td><td>æ ¹è·¯ç”±ï¼ŒåŒ…å«å…¨å±€å¸ƒå±€ã€å¯¼èˆªã€é”™è¯¯è¾¹ç•Œç­‰</td></tr><tr><td>â”— <code>app.css</code></td><td>å…¨å±€æ ·å¼</td></tr><tr><td><code>react-router.config.ts</code></td><td>React Router é…ç½®æ–‡ä»¶ï¼ˆä¾‹å¦‚ SSR è®¾ç½®ï¼‰</td></tr><tr><td><code>vite.config.ts</code></td><td>Vite æ„å»ºé…ç½®</td></tr><tr><td><code>tsconfig.json</code></td><td>TypeScript é…ç½®</td></tr><tr><td><code>Dockerfile</code></td><td>å®¹å™¨éƒ¨ç½²é…ç½®ï¼ˆå¯å¿½ç•¥ï¼‰</td></tr></tbody></table><blockquote><p>v7 çš„ç†å¿µï¼š <strong>ç»„ä»¶è·¯ç”±ä¾ç„¶å¯ç”¨ï¼Œä½†æ¨èè·¯ç”±æ¨¡å—ï¼ˆæ–‡ä»¶å³è·¯ç”±ï¼‰+ æ•°æ® APIï¼ˆloader/actionï¼‰</strong> ï¼›åŒæ—¶ v7 ä¿æŒä¸ v6 çš„éç ´åå‡çº§ï¼Œå¹¶å‘ React 19 çš„æœåŠ¡ç«¯èƒ½åŠ›è¿‡æ¸¡ã€‚<a href="https://reactrouter.com/?utm_source=chatgpt.com" target="_blank" rel="noopener noreferrer">React Router<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><hr><h2 id="_2-å¯åŠ¨é¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#_2-å¯åŠ¨é¡¹ç›®" aria-hidden="true">#</a> 2. å¯åŠ¨é¡¹ç›®</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># è¿›å…¥é¡¹ç›®</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">my-react-router-app</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># å®‰è£…ä¾èµ–</span></span>
<span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># å¯åŠ¨å¼€å‘æœåŠ¡å™¨</span></span>
<span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dev</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é»˜è®¤æƒ…å†µä¸‹å¯åŠ¨åœ¨ 5173 ç«¯å£</p><hr><h2 id="_3-react-åŸºç¡€-ç»„ä»¶-jsx-çŠ¶æ€" tabindex="-1"><a class="header-anchor" href="#_3-react-åŸºç¡€-ç»„ä»¶-jsx-çŠ¶æ€" aria-hidden="true">#</a> 3. React åŸºç¡€ï¼šç»„ä»¶ + JSX + çŠ¶æ€</h2><p>æˆ‘ä»¬å…ˆä»æœ€æ ¸å¿ƒçš„ React æ¦‚å¿µè®²èµ·ï¼š</p><ol><li>ä»€ä¹ˆæ˜¯ç»„ä»¶ï¼Ÿ</li></ol><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Profile</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">img</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">src</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;https://i.imgur.com/MK3eW3Am.jpg&quot;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">alt</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;Katherine Johnson&quot;</span></span>
<span class="line"><span style="color:#24292E;">    /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  )</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š</p><ul><li><code>Profile</code> æ˜¯ç»„ä»¶åã€‚</li><li>å®ƒè¿”å›ä¸€ä¸ª <code>&lt;img /&gt;</code> æ ‡ç­¾ã€‚</li><li>é€šè¿‡ <code>export default</code> å¯¼å‡ºï¼Œä¾¿äºåœ¨å…¶ä»–æ–‡ä»¶ä¸­ <code>import Profile from &#39;./Profile&#39;</code> ä½¿ç”¨ã€‚</li></ul><hr><ol start="2"><li>å¦‚ä½•ä½¿ç”¨ç»„ä»¶ï¼Ÿ</li></ol><p>ä½ å®šä¹‰å¥½äº†ç»„ä»¶ï¼Œå°±å¯ä»¥åœ¨å…¶ä»–ç»„ä»¶ä¸­åƒä½¿ç”¨ HTML æ ‡ç­¾é‚£æ ·ä½¿ç”¨å®ƒï¼š</p><div class="language-tsx line-numbers-mode" data-ext="tsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Profile</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">img</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">src</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;https://i.imgur.com/MK3eW3Am.jpg&quot;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">alt</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;Katherine Johnson&quot;</span></span>
<span class="line"><span style="color:#24292E;">    /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Gallery</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">section</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">h1</span><span style="color:#24292E;">&gt;Amazing scientists&lt;/</span><span style="color:#22863A;">h1</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#005CC5;">Profile</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#005CC5;">Profile</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#005CC5;">Profile</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">section</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼š</p><ul><li><p><code>&lt;section&gt;</code> æ˜¯ HTML åŸç”Ÿæ ‡ç­¾ï¼Œå› ä¸ºé¦–å­—æ¯æ˜¯å°å†™ã€‚</p></li><li><p><code>&lt;Profile /&gt;</code> æ˜¯æˆ‘ä»¬å®šä¹‰çš„ç»„ä»¶ï¼Œå› ä¸ºé¦–å­—æ¯å¤§å†™ã€‚</p></li><li><p>ç»„ä»¶å¯ä»¥è¢«é‡å¤ä½¿ç”¨ã€åµŒå¥—ç»„åˆï¼Œä»è€Œæ„å»ºå¤æ‚ç•Œé¢ã€‚</p></li><li><p>ç»„ä»¶ä¼ é€’å‚æ•°æ–¹å¼ï¼š</p></li></ul><p>ç¤ºä¾‹ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// çˆ¶ç»„ä»¶</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">Avatar</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">person</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{{ name: </span><span style="color:#032F62;">&#39;Lin Lanying&#39;</span><span style="color:#24292E;">, imageId: </span><span style="color:#032F62;">&#39;1bX5QH6&#39;</span><span style="color:#24292E;"> }} </span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">size</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{</span><span style="color:#005CC5;">100</span><span style="color:#24292E;">} </span></span>
<span class="line"><span style="color:#24292E;">/&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ <code>Avatar</code> ç»„ä»¶ä¸Šï¼Œæˆ‘ä»¬ä¼ é€’äº†ä¸¤ä¸ª propsï¼š<code>person</code>ï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰å’Œ <code>size</code>ï¼ˆä¸€ä¸ªæ•°å­—ï¼‰<a href="https://react.dev/learn/passing-props-to-a-component" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>è¯»å– props</li></ul><p>åœ¨å­ç»„ä»¶ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡å‡½æ•°å‚æ•°æ¥æ”¶åˆ° props å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Avatar</span><span style="color:#24292E;">({ </span><span style="color:#E36209;">person</span><span style="color:#24292E;">, </span><span style="color:#E36209;">size</span><span style="color:#24292E;"> }) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// æ­¤å¤„ person å’Œ size å¯ç”¨</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">img</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">src</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{</span><span style="color:#6F42C1;">getImageUrl</span><span style="color:#24292E;">(person)}</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">alt</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{person.name}</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">width</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{size}</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">height</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{size}</span></span>
<span class="line"><span style="color:#24292E;">    /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯´æ˜ï¼š</p><ul><li><code>function Avatar(props)</code> æ˜¯ä¼ ç»Ÿå½¢å¼ï¼›è€Œ <code>function Avatar({ person, size })</code> æ˜¯é€šè¿‡ <strong>è§£æ„èµ‹å€¼</strong> ï¼ˆdestructuringï¼‰æ¥ç›´æ¥è·å–æ‰€éœ€å±æ€§ã€‚ <a href="https://react.dev/learn/passing-props-to-a-component" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>åœ¨å­ç»„ä»¶å†…éƒ¨ï¼Œå°±åƒä½¿ç”¨å±€éƒ¨å˜é‡ä¸€æ ·ä½¿ç”¨è¿™äº› propsã€‚</li></ul><p>React ç»„ä»¶å¯ä»¥æ¥æ”¶ <code>children</code> propï¼Œè¡¨ç¤ºæ ‡ç­¾é‡ŒåµŒå¥—çš„å†…å®¹ï¼ˆchildren æ˜¯ä¸€ä¸ª componentï¼‰ï¼š</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Card</span><span style="color:#24292E;">({ </span><span style="color:#E36209;">children</span><span style="color:#24292E;"> }) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">className</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;card&quot;</span><span style="color:#24292E;">&gt;{children}&lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ä½¿ç”¨</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">Card</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">Avatar</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">size</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{</span><span style="color:#005CC5;">100</span><span style="color:#24292E;">} </span><span style="color:#6F42C1;">person</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{â€¦} /&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#005CC5;">Card</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªç”¨æ³•ä¸­ï¼Œ<code>&lt;Avatar â€¦/&gt;</code> è¢«å½“ä½œ <code>Card</code> çš„ <code>children</code>ï¼Œä½¿ <code>Card</code> èƒ½åŒ…è£¹ä»»æ„å†…å®¹ã€‚ <a href="https://react.dev/learn/passing-props-to-a-component" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> è¿™æ˜¯æ„å»ºå¯ç»„åˆ UI ç»„ä»¶ï¼ˆPanelã€Wrapperã€å¸ƒå±€å®¹å™¨ç­‰ï¼‰éå¸¸å¸¸è§çš„æ¨¡å¼ã€‚</p><hr><p>é»˜è®¤å¯¼å‡ºï¼ˆdefault exportï¼‰ vs å‘½åå¯¼å‡ºï¼ˆnamed exportï¼‰</p><p>::: important</p><p>å¼•ç”¨å’Œå®šä¹‰ç»„ä»¶è¯·ä½¿ç”¨å¤§å†™å¼€å¤´ã€‚</p><p>æ³¨æ„ï¼šä¸€ä¸ªæ–‡ä»¶æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªé»˜è®¤å¯¼å‡ºï¼Œä½†å¯ä»¥æœ‰å¤šä¸ªå‘½åå¯¼å‡ºã€‚</p><p>ä¸è¦åœ¨ä¸€ä¸ª component é‡Œé¢å®šä¹‰å¦ä¸€ä¸ª componentã€‚</p><table><thead><tr><th>Syntax</th><th>Export statement</th><th>Import statement</th></tr></thead><tbody><tr><td>Default</td><td><code>export default function Button() {}</code></td><td><code>import Button from &#39;./Button.js&#39;;</code></td></tr><tr><td>Named</td><td><code>export function Button() {}</code></td><td><code>import { Button } from &#39;./Button.js&#39;;</code></td></tr></tbody></table><p>:::</p><hr><ol start="3"><li>JSX</li></ol><p>JSX æ˜¯ JavaScript çš„ä¸€ä¸ªè¯­æ³•æ‰©å±•ï¼Œå…è®¸ä½ åœ¨ JS æ–‡ä»¶é‡Œå†™çœ‹èµ·æ¥åƒ HTML çš„æ ‡è®°ï¼ˆmarkupï¼‰æ¥æè¿° UIã€‚è™½ç„¶ä¸æ˜¯å¿…é¡»ï¼Œä½†å¤§å¤šæ•° React å¼€å‘è€…æ›´å–œæ¬¢ä½¿ç”¨ JSXï¼Œå› ä¸ºå®ƒè®© â€œæ¸²æŸ“é€»è¾‘â€ ä¸ â€œæ ‡è®°å†…å®¹â€ ç´§å¯†ç»“åˆã€‚</p><p>åœ¨ä¼ ç»Ÿ Web å¼€å‘ä¸­ï¼šå†…å®¹ (HTML)ã€æ ·å¼ (CSS)ã€é€»è¾‘ (JavaScript) å¾€å¾€åˆ†ç¦»ï¼›ä½†éšç€äº¤äº’å˜å¤šï¼Œé€»è¾‘ä¸»å¯¼å†…å®¹è¶Šæ¥è¶Šå¸¸è§ã€‚JSX æ”¯æŒå°†é€»è¾‘ + æ ‡è®°æ”¾åœ¨ä¸€èµ·ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong> ä¸€ä¸ªå¸¸è§çš„ HTML ç‰‡æ®µï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#24292e;">&lt;h1&gt;Hedy Lamarr&#39;s Todos&lt;/h1&gt;</span></span>
<span class="line"><span style="color:#24292e;">![ç›¸å…³å›¾ç‰‡](https://i.imgur.com/yXOvdOSs.jpg )</span></span>
<span class="line"><span style="color:#24292e;">&lt;ul&gt;</span></span>
<span class="line"><span style="color:#24292e;">  &lt;li&gt;Invent new traffic lights&lt;/li&gt;</span></span>
<span class="line"><span style="color:#24292e;">  &lt;li&gt;Rehearse a movie scene&lt;/li&gt;</span></span>
<span class="line"><span style="color:#24292e;">  &lt;li&gt;Improve the spectrum technology&lt;/li&gt;</span></span>
<span class="line"><span style="color:#24292e;">&lt;/ul&gt;</span></span>
<span class="line"><span style="color:#24292e;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœç›´æ¥å¤åˆ¶åˆ° JSX ä¸­ï¼Œä¼šæŠ¥é”™ã€‚åŸå› æ˜¯ JSX æœ‰ä¸€äº›æ›´ä¸¥æ ¼æˆ–ä¸åŒçš„è§„åˆ™ã€‚ <a href="https://react.dev/learn/writing-markup-with-jsx" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ä¸»è¦å·®åˆ«åŒ…æ‹¬ï¼š</p><ul><li>å¿…é¡»æœ‰ä¸€ä¸ªå•ä¸€æ ¹å…ƒç´ ï¼ˆæˆ–ä½¿ç”¨ Fragmentï¼‰</li><li>æ‰€æœ‰æ ‡ç­¾å¿…é¡»é—­åˆï¼ŒåŒ…æ‹¬è‡ªé—­åˆæ ‡ç­¾ï¼ˆå¦‚ <code>&lt;img /&gt;</code>ï¼‰</li><li>å±æ€§åå¤§å¤šä½¿ç”¨ camelCaseï¼ˆè€Œä¸æ˜¯ HTML çš„ kebab-case æˆ– â€œclassâ€ï¼‰</li><li>æŸäº› HTML å±æ€§ååœ¨ JSX ä¸­è¢«æ›¿æ¢ï¼Œæ¯”å¦‚ <code>class</code> â†’ <code>className</code>ï¼Œ<code>stroke-width</code> â†’ <code>strokeWidth</code> ç­‰ã€‚</li></ul><p>ä»¥ä¸‹ä¸ºæ­£ç¡® jsx ç¤ºä¾‹</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TodoList</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    &lt;&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">h1</span><span style="color:#24292E;">&gt;Hedy Lamarr&#39;s Todos&lt;/</span><span style="color:#22863A;">h1</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">img</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">src</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;https://i.imgur.com/yXOvdOSs.jpg&quot;</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">alt</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;Hedy Lamarr&quot;</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">className</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;photo&quot;</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">      /&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">ul</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">li</span><span style="color:#24292E;">&gt;Invent new traffic lights&lt;/</span><span style="color:#22863A;">li</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">li</span><span style="color:#24292E;">&gt;Rehearse a movie scene&lt;/</span><span style="color:#22863A;">li</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">li</span><span style="color:#24292E;">&gt;Improve the spectrum technology&lt;/</span><span style="color:#22863A;">li</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;/</span><span style="color:#22863A;">ul</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/&gt;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p>JSX ä¸­çš„æ¡ä»¶æ¸²æŸ“</p><ul><li>åœ¨ React ä¸­ï¼Œç”¨ JavaScript æ§åˆ¶åˆ†æ”¯é€»è¾‘ï¼ˆifã€? :ã€&amp;&amp;ï¼‰ã€‚ <a href="https://react.dev/learn/conditional-rendering" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><code>{ cond ? &lt;A /&gt; : &lt;B /&gt; }</code> è¡¨ç¤ºâ€œå¦‚æœ cond æ¸²æŸ“ Aï¼Œå¦åˆ™ Bâ€ã€‚ <a href="https://react.dev/learn/conditional-rendering" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><code>{ cond &amp;&amp; &lt;A /&gt; }</code> è¡¨ç¤ºâ€œå¦‚æœ cond æ¸²æŸ“ Aï¼Œå¦åˆ™ä»€ä¹ˆéƒ½ä¸æ¸²æŸ“â€ã€‚ <a href="https://react.dev/learn/conditional-rendering" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>è™½ç„¶å¿«æ·è¯­æ³•å¸¸è§ï¼Œä½†ä¹Ÿå¯ä»¥å›åˆ°æœ€åŸºç¡€çš„ if è¯­å¥ï¼Œä»¥ç¡®ä¿æ¸…æ™°ã€‚ <a href="https://react.dev/learn/conditional-rendering" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Item</span><span style="color:#24292E;">({ </span><span style="color:#E36209;">name</span><span style="color:#24292E;">, </span><span style="color:#E36209;">isPacked</span><span style="color:#24292E;"> }) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (isPacked) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> &lt;</span><span style="color:#22863A;">li</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">className</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;item&quot;</span><span style="color:#24292E;">&gt;{name} âœ…&lt;/</span><span style="color:#22863A;">li</span><span style="color:#24292E;">&gt;;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// ä»€ä¹ˆéƒ½ä¸æƒ³æ¸²æŸ“ï¼Œå¯ä»¥ return null</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> &lt;</span><span style="color:#22863A;">li</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">className</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;item&quot;</span><span style="color:#24292E;">&gt;{name}&lt;/</span><span style="color:#22863A;">li</span><span style="color:#24292E;">&gt;;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p>JSX ä¸­æ¸²æŸ“åˆ—è¡¨</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">people</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">  { id: </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, name: </span><span style="color:#032F62;">&#39;Creola Katherine Johnson&#39;</span><span style="color:#24292E;">, profession: </span><span style="color:#032F62;">&#39;mathematician&#39;</span><span style="color:#24292E;">, â€¦ },</span></span>
<span class="line"><span style="color:#24292E;">  { id: </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, name: </span><span style="color:#032F62;">&#39;Mario JosÃ© Molina-Pasquel HenrÃ­quez&#39;</span><span style="color:#24292E;">, profession: </span><span style="color:#032F62;">&#39;chemist&#39;</span><span style="color:#24292E;">, â€¦ },</span></span>
<span class="line"><span style="color:#24292E;">  â€¦</span></span>
<span class="line"><span style="color:#24292E;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">chemists</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> people.</span><span style="color:#6F42C1;">filter</span><span style="color:#24292E;">(</span><span style="color:#E36209;">person</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span></span>
<span class="line"><span style="color:#24292E;">  person.profession </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;chemist&#39;</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">listItems</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> chemists.</span><span style="color:#6F42C1;">map</span><span style="color:#24292E;">(</span><span style="color:#E36209;">person</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">li</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">key</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{person.id}&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">img</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">src</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{</span><span style="color:#6F42C1;">getImageUrl</span><span style="color:#24292E;">(person)} </span><span style="color:#6F42C1;">alt</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{person.name} /&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">b</span><span style="color:#24292E;">&gt;{person.name}:&lt;/</span><span style="color:#22863A;">b</span><span style="color:#24292E;">&gt; {person.profession} known for {person.accomplishment}</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;/</span><span style="color:#22863A;">li</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">return</span><span style="color:#24292E;"> &lt;</span><span style="color:#22863A;">ul</span><span style="color:#24292E;">&gt;{listItems}&lt;/</span><span style="color:#22863A;">ul</span><span style="color:#24292E;">&gt;;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å°†æ•°æ®ä»ç»„ä»¶ä¸­æŠ½ç¦»å‡ºæ¥ï¼ˆç”¨æ•°ç»„ï¼å¯¹è±¡ï¼‰ã€‚ <a href="https://react.dev/learn/rendering-lists" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>ä½¿ç”¨ <code>map()</code> å¯¹æ•°æ®è¿›è¡Œè½¬æ¢ â†’ æ¸²æŸ“æˆå¤šä¸ªç»„ä»¶ï¼å…ƒç´ ã€‚ <a href="https://react.dev/learn/rendering-lists" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>ä½¿ç”¨ <code>filter()</code> å¯ä»¥å…ˆç­›é€‰ä¸€éƒ¨åˆ†æ•°æ®ï¼Œå†æ¸²æŸ“ã€‚ <a href="https://react.dev/learn/rendering-lists" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>æ¯ä¸ªåˆ—è¡¨é¡¹è¦è®¾ç½® <code>key</code> å±æ€§ï¼Œä¿è¯ React èƒ½æ­£ç¡®è¿½è¸ªã€‚ <a href="https://react.dev/learn/rendering-lists" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><hr><h2 id="_4-äº‹ä»¶å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_4-äº‹ä»¶å¤„ç†" aria-hidden="true">#</a> 4. äº‹ä»¶å¤„ç†</h2><p>React å…è®¸ä½ åœ¨ JSX ä¸­ç»™å…ƒç´ æ·»åŠ äº‹ä»¶å¤„ç†å™¨ï¼ˆevent handlersï¼‰ï¼Œç”¨æ¥å“åº”ç‚¹å‡» (click)ã€æ‚¬æµ® (hover)ã€è¾“å…¥ç„¦ç‚¹ (focus)ã€è¡¨å•æäº¤ (submit) ç­‰ç”¨æˆ·äº¤äº’ã€‚</p><p>åœ¨ JSX å…ƒç´ ä¸Šé€šè¿‡åƒ <code>onClick={â€¦}</code> çš„ prop æ¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ã€‚ <a href="https://react.dev/learn/responding-to-events" target="_blank" rel="noopener noreferrer">React+1<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>å¸¸è§æ­¥éª¤ï¼š</p><ol><li>åœ¨ç»„ä»¶å†…éƒ¨å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼ˆå¦‚ <code>handleClick</code>ï¼‰</li><li>åœ¨å‡½æ•°ä½“å†…å®ç°é€»è¾‘ï¼ˆä¾‹å¦‚ <code>alert(&#39;You clicked me!&#39;)</code>ï¼‰</li><li>åœ¨ JSX ä¸­ <code>&lt;button onClick={handleClick}&gt;â€¦&lt;/button&gt;</code>ã€‚ <a href="https://react.dev/learn/responding-to-events" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ol><p>å‡½æ•°å¯ä»¥å®šä¹‰åœ¨ç»„ä»¶é‡Œï¼Œä¹Ÿå¯ä»¥ç”¨å†…è”ï¼ˆinlineï¼‰åŒ¿åå‡½æ•°æˆ–ç®­å¤´å‡½æ•°ã€‚ <a href="https://react.dev/learn/responding-to-events" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><strong>é‡è¦å‘</strong> ï¼šå¿…é¡» <em>ä¼ é€’</em> å‡½æ•°ï¼Œè€Œä¸æ˜¯ <em>è°ƒç”¨</em> å‡½æ•°ã€‚å½“ä½ å†™ <code>onClick={handleClick()}</code> åˆ™ä¼šåœ¨æ¸²æŸ“æ—¶ç«‹å³æ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨ç‚¹å‡»æ—¶æ‰§è¡Œã€‚</p><h3 id="å°†äº‹ä»¶å¤„ç†å™¨ä½œä¸º-props-ä¼ é€’-passing-event-handlers-as-props" tabindex="-1"><a class="header-anchor" href="#å°†äº‹ä»¶å¤„ç†å™¨ä½œä¸º-props-ä¼ é€’-passing-event-handlers-as-props" aria-hidden="true">#</a> å°†äº‹ä»¶å¤„ç†å™¨ä½œä¸º Props ä¼ é€’ï¼ˆPassing event handlers as propsï¼‰</h3><p><strong>è¦ç‚¹</strong> ï¼š</p><ul><li><p>å¦‚æœä½ æœ‰ä¸€ä¸ªé€šç”¨ç»„ä»¶ï¼ˆä¾‹å¦‚ <code>Button</code>ï¼‰ï¼Œå®ƒå¹¶ä¸çŸ¥é“æ¯æ¬¡ç‚¹å‡»åº”è¯¥åšä»€ä¹ˆã€‚ä½ å¯ä»¥æŠŠè¡Œä¸ºï¼ˆå‡½æ•°ï¼‰ä½œä¸º prop ä¼ ç»™å®ƒï¼š</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Button</span><span style="color:#24292E;">({ </span><span style="color:#E36209;">onClick</span><span style="color:#24292E;">, </span><span style="color:#E36209;">children</span><span style="color:#24292E;"> }) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{onClick}&gt;{children}&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>çˆ¶ç»„ä»¶å†³å®šè¦åšçš„äº‹æƒ…ï¼Œæ¯”å¦‚ï¼š</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">PlayButton</span><span style="color:#24292E;">({ </span><span style="color:#E36209;">movieName</span><span style="color:#24292E;"> }) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handlePlayClick</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">alert</span><span style="color:#24292E;">(</span><span style="color:#032F62;">`Playing ${</span><span style="color:#24292E;">movieName</span><span style="color:#032F62;">}!`</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> &lt;</span><span style="color:#005CC5;">Button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{handlePlayClick}&gt;Play &quot;{movieName}&quot;&lt;/</span><span style="color:#005CC5;">Button</span><span style="color:#24292E;">&gt;;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>å…³äºäº‹ä»¶ handler prop å‘½åçš„çº¦å®šï¼šå¯¹äºè‡ªå®šä¹‰ç»„ä»¶ï¼Œé€šå¸¸å°† prop åä»¥ <code>onâ€¦</code> å¼€å¤´ï¼Œå¦‚ <code>onClick</code>ã€<code>onSmash</code> ç­‰ã€‚è¿™æ ·ä»£ç æ˜“è¯»ã€æ„ä¹‰æ˜ç¡®ã€‚</p></li></ul><hr><h2 id="_5-çŠ¶æ€" tabindex="-1"><a class="header-anchor" href="#_5-çŠ¶æ€" aria-hidden="true">#</a> 5. çŠ¶æ€</h2><p>åœ¨ React ä¸­ï¼Œç”¨ Hook <code>useState</code> æ¥åˆ›å»ºçŠ¶æ€å˜é‡ã€‚æ–‡æ¡£ç¤ºä¾‹ï¼š</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { useState } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;react&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">index</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">setIndex</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ Hooks çš„ä½¿ç”¨è§„åˆ™ï¼š</p><ul><li>åªèƒ½åœ¨å‡½æ•°ç»„ä»¶çš„æœ€é¡¶å±‚è°ƒç”¨ï¼Œä¸èƒ½åœ¨å¾ªç¯ã€æ¡ä»¶æˆ–åµŒå¥—å‡½æ•°é‡Œè°ƒç”¨ã€‚<a href="https://react.dev/learn/state-a-components-memory" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>è¿™ä¿è¯æ¯æ¬¡æ¸²æŸ“æ—¶ <code>useState</code> è¢«è°ƒç”¨çš„æ¬¡æ•°ä¸é¡ºåºä¸å˜ï¼Œè¿™æ˜¯ React åŒºåˆ†ä¸åŒçŠ¶æ€å˜é‡çš„å…³é”®ã€‚</li></ul><p>çŠ¶æ€çš„ã€Œç§æœ‰æ€§ã€ä¸â€œéš”ç¦»â€</p><ul><li>çŠ¶æ€æ˜¯ <strong>ç»„ä»¶å®ä¾‹</strong> ä¸“å±çš„ã€‚è‹¥ä½ åœ¨ UI ä¸Šæ¸²æŸ“åŒä¸€ä¸ªç»„ä»¶ä¸¤æ¬¡ï¼Œ <strong>æ¯ä¸€ä¸ªå®ä¾‹</strong> éƒ½ä¼šæœ‰è‡ªå·±çš„çŠ¶æ€æ‹·è´ï¼Œäº’ä¸å½±å“ã€‚</li><li>çˆ¶ç»„ä»¶æ— æ³•ç›´æ¥ â€œæ“æ§â€ å­ç»„ä»¶å†…éƒ¨å£°æ˜çš„çŠ¶æ€ï¼ˆé™¤éä½ é€šè¿‡ props æˆ–å›è°ƒæŠŠçŠ¶æ€æå‡ä¸Šæ¥ï¼‰ã€‚çŠ¶æ€é»˜è®¤åªæ˜¯ç»„ä»¶è‡ªå·±çš„â€œç§æœ‰è®°å¿†â€ã€‚</li></ul><hr><p>åœ¨ä¸€æ¬¡æ¸²æŸ“å‘¨æœŸï¼ˆrenderï¼‰ä¸­ï¼Œstate çš„å€¼ <strong>å¯¹è¯¥æ¸²æŸ“å‡½æ•°åŠå…¶äº‹ä»¶å¤„ç†å™¨è€Œè¨€æ˜¯å›ºå®šçš„</strong> ã€‚å¦‚æœåœ¨åŒä¸€ä¸ªæ¸²æŸ“ä¸­å¤šæ¬¡ <code>setState(state + 1)</code>ï¼Œé‚£ä¹ˆæ¯æ¬¡ <code>state</code> çš„ â€œå¿«ç…§å€¼â€ å‡ä¸ä¼šæ›´æ–°ï¼Œå› æ­¤å¯èƒ½ä¸ä¼šæŒ‰ä½ é¢„æœŸç´¯åŠ å¤šæ¬¡ã€‚ç¤ºä¾‹ï¼šç‚¹å‡» â€œ+3â€ æŒ‰é’®åªåŠ  1ã€‚</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { useState } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;react&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Counter</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">number</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">setNumber</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    &lt;&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">h1</span><span style="color:#24292E;">&gt;{number}&lt;/</span><span style="color:#22863A;">h1</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">setNumber</span><span style="color:#24292E;">(number </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">setNumber</span><span style="color:#24292E;">(number </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">setNumber</span><span style="color:#24292E;">(number </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">      }}&gt;+3&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/&gt;</span></span>
<span class="line"><span style="color:#24292E;">  )</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å†™ <code>useState</code> + äº‹ä»¶å¤„ç†çš„æ—¶å€™ï¼Œ <strong>å‡è®¾ state åœ¨å½“å‰æ¸²æŸ“ä¸­æ˜¯å›ºå®šä¸å˜çš„</strong> ã€‚</p><p>é¿å…åœ¨ä¸€ç³»åˆ— <code>setState(state + 1)</code> ä¸­é¢„æœŸâ€œè¿ç»­æ›´æ–°â€è€Œä¸ä½¿ç”¨å‡½æ•°å¼æ›´æ–°ã€‚</p><p>å¦‚æœä½ çš„å¤„ç†é€»è¾‘éœ€è¦ â€œæœ€æ–°â€ state å€¼ï¼ˆå¦‚ +3ã€+5ã€åŸºäºå½“å‰å€¼ç´¯åŠ ç­‰ï¼‰ï¼Œå»ºè®®æ”¹å†™ä¸ºï¼š</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">setNumber</span><span style="color:#24292E;">(</span><span style="color:#E36209;">prev</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> prev </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6F42C1;">setNumber</span><span style="color:#24292E;">(</span><span style="color:#E36209;">prev</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> prev </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6F42C1;">setNumber</span><span style="color:#24292E;">(</span><span style="color:#E36209;">prev</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> prev </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ–è€…ç›´æ¥ï¼š<code>setNumber(prev =&gt; prev + 3);</code></p><hr><p><strong>æ–‡ä¸­å¼ºè°ƒï¼šä½ åº”å½“æŠŠ state ä¸­çš„å¯¹è±¡å½“ä½œâ€œåªè¯»â€çš„ï¼ˆread-onlyï¼‰ã€‚ä¸è¦ç›´æ¥ä¿®æ”¹ã€‚</strong></p><p>ä½†å¦‚æœä½ æƒ³è¦ä¿®æ”¹ state ä¸­çš„å¯¹è±¡ï¼Œä¸¾ä¾‹ï¼š</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">position</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">setPosition</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292E;">({ x:</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, y:</span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> });</span></span>
<span class="line"><span style="color:#24292E;">position.x </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> e.clientX;  </span><span style="color:#6A737D;">// ç›´æ¥ä¿®æ”¹å¯¹è±¡ â€”â€” é—®é¢˜åœ¨è¿™é‡Œ</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ç§åšæ³•ä¼šå¯¼è‡´ React <strong>æ— æ³•æ£€æµ‹åˆ°å˜åŒ–</strong> ï¼Œæ‰€ä»¥ç»„ä»¶ä¸ä¼šé‡æ–°æ¸²æŸ“ã€‚</p><p>å¦‚æœä½ çš„ state å­˜çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä½ åªæƒ³æ›´æ–°å¯¹è±¡ä¸­çš„ä¸€ä¸ªå­—æ®µï¼Œå¯ä»¥ä½¿ç”¨å¯¹è±¡çš„æ‹·è´è¯­æ³•ï¼ˆspreadï¼‰æ¥åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">setPerson</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">...</span><span style="color:#24292E;">person,           </span><span style="color:#6A737D;">// å¤åˆ¶ä»¥å‰çš„æ‰€æœ‰å­—æ®µ</span></span>
<span class="line"><span style="color:#24292E;">  firstName: e.target.value  </span><span style="color:#6A737D;">// è¦†ç›–æŸä¸ªå­—æ®µ</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·å¯ä»¥é¿å…æ‰‹åŠ¨å†™å‡ºæ‰€æœ‰å­—æ®µï¼Œæ¯”è¾ƒæ–¹ä¾¿ã€‚</p><hr><ul><li>çŠ¶æ€ä¸­çš„ Array</li></ul><p>React çš„çŠ¶æ€æ›´æ–°æœºåˆ¶ä¾èµ– <strong>å¼•ç”¨å˜åŒ–</strong> æ¥å†³å®šæ˜¯å¦éœ€è¦é‡æ–°æ¸²æŸ“ã€‚è‹¥ç›´æ¥æ”¹å˜å·²æœ‰æ•°ç»„ï¼ˆå¦‚ <code>arr.push()</code> æˆ– <code>arr[0] = â€¦</code>ï¼‰ï¼ŒåŸæ•°ç»„å¼•ç”¨ä¸å˜ï¼Œå¯èƒ½å¯¼è‡´ React <strong>æ— æ³•è¯†åˆ«å˜åŒ–</strong> ï¼Œæˆ–è€…é€ æˆéš¾ä»¥å‘ç°çš„å‰¯ä½œç”¨ã€‚</p><h3 id="_1-æ·»åŠ å…ƒç´ -add" tabindex="-1"><a class="header-anchor" href="#_1-æ·»åŠ å…ƒç´ -add" aria-hidden="true">#</a> 1. æ·»åŠ å…ƒç´ ï¼ˆAddï¼‰</h3><p><strong>ä¸æ¨èï¼š</strong> ä½¿ç”¨ <code>push()</code> ç­‰ä¼šæ”¹å˜åŸæ•°ç»„çš„æ–¹æ³•ã€‚ <a href="https://react.dev/learn/updating-arrays-in-state" target="_blank" rel="noopener noreferrer">React+1<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><strong>æ¨èï¼š</strong> ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼ˆspreadï¼‰å’Œ/æˆ– <code>concat()</code> åˆ›å»ºæ–°æ•°ç»„ã€‚ç¤ºä¾‹ï¼š</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// TypeScript + React</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">items</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">setItems</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292E;">&lt;</span><span style="color:#6F42C1;">MyItemType</span><span style="color:#24292E;">[]&gt;([]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// åœ¨æœ«å°¾æ·»åŠ ï¼š</span></span>
<span class="line"><span style="color:#6F42C1;">setItems</span><span style="color:#24292E;">([</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">...</span><span style="color:#24292E;">items,</span></span>
<span class="line"><span style="color:#24292E;">  newItem</span></span>
<span class="line"><span style="color:#24292E;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// åœ¨å¼€å¤´æ·»åŠ ï¼š</span></span>
<span class="line"><span style="color:#6F42C1;">setItems</span><span style="color:#24292E;">([</span></span>
<span class="line"><span style="color:#24292E;">  newItem,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">...</span><span style="color:#24292E;">items</span></span>
<span class="line"><span style="color:#24292E;">]);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°æ–¹æ³•ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„æ•°ç»„å¼•ç”¨ï¼Œä»è€Œè§¦å‘ React é‡æ–°æ¸²æŸ“ã€‚ <a href="https://react.dev/learn/updating-arrays-in-state" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><hr><h3 id="_2-åˆ é™¤å…ƒç´ -remove" tabindex="-1"><a class="header-anchor" href="#_2-åˆ é™¤å…ƒç´ -remove" aria-hidden="true">#</a> 2. åˆ é™¤å…ƒç´ ï¼ˆRemoveï¼‰</h3><p>æ¨èä½¿ç”¨ <code>filter()</code> æ–¹æ³•ï¼š</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">setItems</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  items.</span><span style="color:#6F42C1;">filter</span><span style="color:#24292E;">(</span><span style="color:#E36209;">item</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> item.id </span><span style="color:#D73A49;">!==</span><span style="color:#24292E;"> targetId)</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·å¾—åˆ°çš„æ˜¯ä¸€ä¸ª <strong>æ–°æ•°ç»„</strong> ï¼ŒåŸæ•°ç»„ä¸è¢«ä¿®æ”¹ã€‚ <a href="https://react.dev/learn/updating-arrays-in-state" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><hr><h3 id="_3-è½¬æ¢-æ›´æ–°å…ƒç´ -transform-replace" tabindex="-1"><a class="header-anchor" href="#_3-è½¬æ¢-æ›´æ–°å…ƒç´ -transform-replace" aria-hidden="true">#</a> 3. è½¬æ¢/æ›´æ–°å…ƒç´ ï¼ˆTransform / Replaceï¼‰</h3><p>å½“ä½ æƒ³æ›´æ–°æ•°ç»„ä¸­æŸäº›å…ƒç´ ï¼ˆä¾‹å¦‚æ”¹å˜æŸé¡¹å±æ€§ï¼‰ï¼š</p><p>æ¨èä½¿ç”¨ <code>map()</code>ï¼š</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">setItems</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  items.</span><span style="color:#6F42C1;">map</span><span style="color:#24292E;">(</span><span style="color:#E36209;">item</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">    item.id </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> targetId </span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> { </span><span style="color:#D73A49;">...</span><span style="color:#24292E;">item, someProp: newValue }  </span><span style="color:#6A737D;">// åˆ›å»ºæ–°å¯¹è±¡</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> item  </span><span style="color:#6A737D;">// ä¿æŒåŸå¯¹è±¡</span></span>
<span class="line"><span style="color:#24292E;">  )</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ç§æ–¹å¼ä¿è¯ â€œæ•°ç»„å¼•ç”¨â€ å’Œ â€œè¢«æ›¿æ¢å¯¹è±¡â€ éƒ½æ˜¯æ–°çš„ã€‚å¦åˆ™å¦‚æœä½ åªæ˜¯ä¿®æ”¹æ—§å¯¹è±¡ï¼Œå°±ä¼šå’Œæ—§çŠ¶æ€å…±äº«å¯¹è±¡å¼•ç”¨ï¼Œå¯èƒ½å¼•å‘éš¾ä»¥å¯Ÿè§‰çš„ bugã€‚ <a href="https://react.dev/learn/updating-arrays-in-state" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><hr><h3 id="_4-æ’å…¥å…ƒç´ åˆ°ä¸­é—´ä½ç½®-insert" tabindex="-1"><a class="header-anchor" href="#_4-æ’å…¥å…ƒç´ åˆ°ä¸­é—´ä½ç½®-insert" aria-hidden="true">#</a> 4. æ’å…¥å…ƒç´ åˆ°ä¸­é—´ä½ç½®ï¼ˆInsertï¼‰</h3><p>å¦‚æœè¦åœ¨æ•°ç»„ä¸­é—´æŸä¸ªä½ç½®æ’å…¥ä¸€ä¸ªæ–°é¡¹ï¼š</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">index</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6F42C1;">setItems</span><span style="color:#24292E;">([</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">...</span><span style="color:#24292E;">items.</span><span style="color:#6F42C1;">slice</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, index),</span></span>
<span class="line"><span style="color:#24292E;">  newItem,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">...</span><span style="color:#24292E;">items.</span><span style="color:#6F42C1;">slice</span><span style="color:#24292E;">(index)</span></span>
<span class="line"><span style="color:#24292E;">]);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œ <code>slice()</code> è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„å­æ•°ç»„ï¼Œå› æ­¤ä½ åœ¨æ‹¼å‡ºæ–°çš„æ•°ç»„æ—¶ä¹Ÿæ˜¯åœ¨æ„é€ ä¸€ä¸ªæ–°çš„ç»“æ„ã€‚ <a href="https://react.dev/learn/updating-arrays-in-state" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><hr><h3 id="_5-å…¶ä»–éœ€è¦æ³¨æ„çš„å˜åŠ¨-æ’åºã€åè½¬ã€æ·±å±‚åµŒå¥—ä¿®æ”¹" tabindex="-1"><a class="header-anchor" href="#_5-å…¶ä»–éœ€è¦æ³¨æ„çš„å˜åŠ¨-æ’åºã€åè½¬ã€æ·±å±‚åµŒå¥—ä¿®æ”¹" aria-hidden="true">#</a> 5. å…¶ä»–éœ€è¦æ³¨æ„çš„å˜åŠ¨ï¼ˆæ’åºã€åè½¬ã€æ·±å±‚åµŒå¥—ä¿®æ”¹ï¼‰</h3><ul><li>æ–¹æ³•å¦‚ <code>sort()</code>ã€<code>reverse()</code> ä¼š <strong>åŸåœ°ä¿®æ”¹æ•°ç»„</strong> ï¼Œå¦‚æœç›´æ¥åœ¨ state çš„æ•°ç»„ä¸Šè°ƒç”¨ï¼Œä¼šç ´åä¸å¯å˜åŸåˆ™ã€‚æ¨èå…ˆåš <code>const newArr = [...oldArr]</code>ï¼Œç„¶å <code>newArr.sort()</code> æˆ– <code>newArr.reverse()</code>ï¼Œæœ€å <code>setItems(newArr)</code>ã€‚ <a href="https://react.dev/learn/updating-arrays-in-state" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>æ³¨æ„ï¼šå³ä¾¿ä½ å¤åˆ¶äº†æ•°ç»„ï¼ˆå¦‚ <code>[...oldArr]</code>ï¼‰ï¼Œå¦‚æœæ•°ç»„å…ƒç´ æ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆè¿™äº›å¯¹è±¡è¿˜æ˜¯æ—§çš„å¼•ç”¨ã€‚å¦‚æœä½ ä¿®æ”¹äº†å…¶ä¸­æŸä¸ªå¯¹è±¡çš„å±æ€§ï¼Œä¹Ÿå¯èƒ½æ˜¯ç›´æ¥ä¿®æ”¹åŸå¯¹è±¡ï¼Œä»ç„¶ä¼šç ´å state çš„ä¸å¯å˜æ€§ã€‚æ–‡æ¡£ä¸¾äº†ä¸€ä¸ªä¾‹å­ï¼šæ‹·è´æ•°ç»„ä½†æœªæ·±æ‹·è´å¯¹è±¡ï¼Œç»“æœä¸¤ä¸ªçŠ¶æ€ hook å…±äº«å¯¹è±¡å¼•ç”¨ï¼Œæ“ä½œä¸€ä¸ªä¼šå½±å“å¦ä¸€ä¸ªã€‚ <a href="https://react.dev/learn/updating-arrays-in-state" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><hr><h2 id="_6-reducer" tabindex="-1"><a class="header-anchor" href="#_6-reducer" aria-hidden="true">#</a> 6. Reducer</h2><p>å½“æœ‰ä¸€ä¸ªç»„ä»¶çš„çŠ¶æ€é€»è¾‘éå¸¸å¤æ‚ï¼ˆæ¯”å¦‚éœ€è¦è¿›è¡Œæ·»åŠ ï¼Œåˆ é™¤ï¼Œä¿®æ”¹ç­‰æ“ä½œï¼‰ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ reducerï¼Œè€Œä¸æ˜¯ stateã€‚åœ¨ Reduxã€MobX ç­‰çŠ¶æ€ç®¡ç†åº“æµè¡Œä¹‹å‰ï¼Œè¿™ç§æ¨¡å¼å°±å·²è¢«å¹¿æ³›é‡‡ç”¨ã€‚React è‡ªèº«ä¹Ÿé¼“åŠ±åœ¨é€‚åˆåœºæ™¯ä¸‹ä½¿ç”¨ <code>useReducer</code>ã€‚</p><h3 id="ç¼–å†™-reducer-å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#ç¼–å†™-reducer-å‡½æ•°" aria-hidden="true">#</a> ç¼–å†™ reducer å‡½æ•°</h3><ul><li><p><code>reducer</code> å‡½æ•°ç­¾åé€šå¸¸ä¸º <code>(state, action) =&gt; nextState</code>ã€‚ <a href="https://react.dev/learn/extracting-state-logic-into-a-reducer" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p>åœ¨ä¾‹å­ä¸­ï¼Œ<code>tasksReducer(tasks, action)</code> æ ¹æ® <code>action.type</code> è¿”å›æ–°çš„æ•°ç»„çŠ¶æ€ï¼š</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">tasksReducer</span><span style="color:#24292E;">(</span><span style="color:#E36209;">tasks</span><span style="color:#24292E;">, </span><span style="color:#E36209;">action</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">switch</span><span style="color:#24292E;">(action.type) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">case</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;added&#39;</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> [</span><span style="color:#D73A49;">...</span><span style="color:#24292E;">tasks, { id: action.id, text: action.text, done: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;"> }];</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">case</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;changed&#39;</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> tasks.</span><span style="color:#6F42C1;">map</span><span style="color:#24292E;">(</span><span style="color:#E36209;">t</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> t.id </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> action.task.id </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> action.task </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> t);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">case</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;deleted&#39;</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> tasks.</span><span style="color:#6F42C1;">filter</span><span style="color:#24292E;">(</span><span style="color:#E36209;">t</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> t.id </span><span style="color:#D73A49;">!==</span><span style="color:#24292E;"> action.id);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">default</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">throw</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Error</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;Unknown action: &#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> action.type);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://react.dev/learn/extracting-state-logic-into-a-reducer" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p>å†™å¥½ä¹‹åï¼Œå¯ä»¥æŠŠå®ƒæå–åˆ°ç»„ä»¶å¤–éƒ¨æˆ–ç‹¬ç«‹æ–‡ä»¶ï¼Œä½¿ç»„ä»¶æ›´ç®€æ´ã€‚ <a href="https://react.dev/learn/extracting-state-logic-into-a-reducer" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li></ul><h3 id="åœ¨ç»„ä»¶ä¸­ä½¿ç”¨-usereducer" tabindex="-1"><a class="header-anchor" href="#åœ¨ç»„ä»¶ä¸­ä½¿ç”¨-usereducer" aria-hidden="true">#</a> åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ useReducer</h3><ul><li><p>åœ¨ç»„ä»¶é‡Œç”¨ï¼š</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">tasks</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">dispatch</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useReducer</span><span style="color:#24292E;">(tasksReducer, initialTasks);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ›¿ä»£ä¹‹å‰çš„ <code>const [tasks, setTasks] = useState(initialTasks)</code>ã€‚ <a href="https://react.dev/learn/extracting-state-logic-into-a-reducer" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p>ç„¶ååœ¨äº‹ä»¶å¤„ç†å™¨é‡Œè°ƒç”¨ <code>dispatch(...)</code>ã€‚æ¯”å¦‚ï¼š</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleAddTask</span><span style="color:#24292E;">(</span><span style="color:#E36209;">text</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">dispatch</span><span style="color:#24292E;">({ type: </span><span style="color:#032F62;">&#39;added&#39;</span><span style="color:#24292E;">, id: nextId</span><span style="color:#D73A49;">++</span><span style="color:#24292E;">, text });</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://react.dev/learn/extracting-state-logic-into-a-reducer" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li></ul><hr><h2 id="_7-context" tabindex="-1"><a class="header-anchor" href="#_7-context" aria-hidden="true">#</a> 7. Context</h2><p>Context æ˜¯ä¸€ç§â€œè·¨å±‚çº§â€ä¼ é€’æ•°æ®çš„æ–¹å¼ï¼Œé¿å…ä¸­é—´ç»„ä»¶çš„é‡å¤ä¼ é€’ã€‚</p><p><strong>ä½¿ç”¨ Context çš„å…¸å‹åœºæ™¯</strong> ï¼š</p><ul><li>ä¸»é¢˜ï¼ˆthemeï¼‰ï¼šå…¨å±€é¢œè‰²ã€æš—é»‘æ¨¡å¼ç­‰ã€‚<a href="https://react.dev/learn/passing-data-deeply-with-context" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>å½“å‰ç”¨æˆ· (current account / auth)ï¼šå¾ˆå¤šç»„ä»¶å¯èƒ½éœ€è¦çŸ¥é“ç™»å½•çŠ¶æ€æˆ–ç”¨æˆ·ä¿¡æ¯ã€‚<a href="https://react.dev/learn/passing-data-deeply-with-context" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>è·¯ç”±çŠ¶æ€ï¼šå…¶å®è·¯ç”±åº“æœ¬èº«å°±ç”¨ context æ¥å®ç°çš„ã€‚<a href="https://react.dev/learn/passing-data-deeply-with-context" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>å¤§å‹çŠ¶æ€ç®¡ç†ï¼šç»“åˆ <code>useReducer + Context</code> ä¼ é€’å¤æ‚çŠ¶æ€è‡³æ·±å±‚ç»„ä»¶ã€‚</li></ul><h3 id="_1-åˆ›å»º-context" tabindex="-1"><a class="header-anchor" href="#_1-åˆ›å»º-context" aria-hidden="true">#</a> 1. åˆ›å»º Context</h3><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { createContext } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;react&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">LevelContext</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createContext</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œ <code>1</code> æ˜¯é»˜è®¤å€¼ï¼Œå½“ç»„ä»¶åœ¨æ ‘ä¸­â€œæ²¡æœ‰â€è¢«å¯¹åº”çš„ Provider åŒ…è£¹æ—¶ï¼Œä¼šç”¨è¿™ä¸ªé»˜è®¤å€¼ã€‚<a href="https://react.dev/learn/passing-data-deeply-with-context" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><blockquote><p>è®°ä½ï¼š<code>createContext(defaultValue)</code> çš„ defaultValue æ˜¯æœ‰æ„ä¹‰çš„ï¼Œåœ¨æ²¡æœ‰ Provider æ—¶ä¹Ÿèƒ½æœ‰â€œå…œåº•â€çš„æœºåˆ¶ã€‚</p></blockquote><h3 id="_2-åœ¨éœ€è¦è¯»å–æ•°æ®çš„ç»„ä»¶ä¸­ä½¿ç”¨-usecontext" tabindex="-1"><a class="header-anchor" href="#_2-åœ¨éœ€è¦è¯»å–æ•°æ®çš„ç»„ä»¶ä¸­ä½¿ç”¨-usecontext" aria-hidden="true">#</a> 2. åœ¨éœ€è¦è¯»å–æ•°æ®çš„ç»„ä»¶ä¸­ä½¿ç”¨ <code>useContext</code></h3><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { useContext } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;react&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { LevelContext } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./LevelContext&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Heading</span><span style="color:#24292E;">({ </span><span style="color:#E36209;">children</span><span style="color:#24292E;"> }) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">level</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useContext</span><span style="color:#24292E;">(LevelContext);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// â€¦</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ · <code>Heading</code> å°±ä¸å†ä¾èµ–è‡ªå·±è¢«ä¼  <code>level</code> propï¼Œè€Œæ˜¯â€œè‡ªå·±å»æ‰¾â€æœ€è¿‘çš„ <code>LevelContext</code> æä¾›è€…ï¼ˆæ ¹æ®å½“å‰ component æ‰€åœ¨ä½ç½®ï¼Œå¾€çˆ¶ç»„ä»¶æ–¹å‘å¯»æ‰¾ <code>LevelContext.Prodiver</code>ï¼‰ã€‚<a href="https://react.dev/learn/passing-data-deeply-with-context" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="_3-åœ¨æä¾›æ•°æ®çš„ç»„ä»¶ä¸­ä½¿ç”¨-provider" tabindex="-1"><a class="header-anchor" href="#_3-åœ¨æä¾›æ•°æ®çš„ç»„ä»¶ä¸­ä½¿ç”¨-provider" aria-hidden="true">#</a> 3. åœ¨æä¾›æ•°æ®çš„ç»„ä»¶ä¸­ä½¿ç”¨ Provider</h3><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { LevelContext } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./LevelContext&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Section</span><span style="color:#24292E;">({ </span><span style="color:#E36209;">level</span><span style="color:#24292E;">, </span><span style="color:#E36209;">children</span><span style="color:#24292E;"> }) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">section</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">className</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;section&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#005CC5;">LevelContext.Provider</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">value</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{level}&gt;</span></span>
<span class="line"><span style="color:#24292E;">        {children}</span></span>
<span class="line"><span style="color:#24292E;">      &lt;/</span><span style="color:#005CC5;">LevelContext.Provider</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">section</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ · <code>Section</code> æŠŠ <code>level</code> å€¼â€œæä¾›â€ç»™å…¶ä¸‹å±‚æ‰€æœ‰ç”¨åˆ° <code>LevelContext</code> çš„ç»„ä»¶</p><hr><h2 id="_8-ref" tabindex="-1"><a class="header-anchor" href="#_8-ref" aria-hidden="true">#</a> 8. Ref</h2><p>å½“ä¸€ä¸ªç»„ä»¶å¸Œæœ› â€œè®°ä½ï¼ˆrememberï¼‰â€ æŸäº›ä¿¡æ¯ï¼Œä½† <strong>ä¸å¸Œæœ›è¿™äº›ä¿¡æ¯çš„å˜åŒ–è§¦å‘é‡æ–°æ¸²æŸ“ï¼ˆre-renderï¼‰</strong> æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>useRef()</code></p><h3 id="_1-å¯¼å…¥-useref" tabindex="-1"><a class="header-anchor" href="#_1-å¯¼å…¥-useref" aria-hidden="true">#</a> 1. å¯¼å…¥ useRef</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#24292e;">import { useRef } from &#39;react&#39;;</span></span>
<span class="line"><span style="color:#24292e;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2-åœ¨ç»„ä»¶å†…éƒ¨è°ƒç”¨-æŒ‡å®šåˆå§‹å€¼" tabindex="-1"><a class="header-anchor" href="#_2-åœ¨ç»„ä»¶å†…éƒ¨è°ƒç”¨-æŒ‡å®šåˆå§‹å€¼" aria-hidden="true">#</a> 2. åœ¨ç»„ä»¶å†…éƒ¨è°ƒç”¨ï¼ŒæŒ‡å®šåˆå§‹å€¼</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#24292e;">const myRef = useRef(0);</span></span>
<span class="line"><span style="color:#24292e;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™é‡Œ <code>myRef.current</code> åˆå§‹ä¸º <code>0</code>ã€‚ <a href="https://react.dev/learn/referencing-values-with-refs" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="_3-è®¿é—®æˆ–ä¿®æ”¹-ref-current" tabindex="-1"><a class="header-anchor" href="#_3-è®¿é—®æˆ–ä¿®æ”¹-ref-current" aria-hidden="true">#</a> 3. è®¿é—®æˆ–ä¿®æ”¹ <code>ref.current</code></h3><p>ä¾‹å¦‚ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#24292e;">myRef.current = myRef.current + 1;</span></span>
<span class="line"><span style="color:#24292e;">alert(&#39;å½“å‰å€¼ï¼š&#39; + myRef.current);</span></span>
<span class="line"><span style="color:#24292e;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤æ“ä½œä¸ä¼šå¯¼è‡´ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼ˆé™¤éä½ è‡ªå·±ç”¨ state åšæ›´æ–°ï¼‰â€“â€“å› æ­¤ï¼Œç”¨æ¥å­˜å‚¨ â€œæ¸²æŸ“ä¹‹å¤–çš„å¯å˜å€¼â€ ååˆ†åˆé€‚ã€‚ <a href="https://react.dev/learn/referencing-values-with-refs" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><table><thead><tr><th>ç‰¹æ€§</th><th>refs (<code>useRef</code>)</th><th>state (<code>useState</code>)</th></tr></thead><tbody><tr><td>è¿”å›å€¼</td><td><code>{ current: initialValue }</code> å¯¹è±¡ (<a href="https://react.dev/learn/referencing-values-with-refs" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>)</td><td><code>[value, setValue]</code> æ•°ç»„ (<a href="https://react.dev/learn/referencing-values-with-refs" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>)</td></tr><tr><td>å˜åŒ–æ˜¯å¦è§¦å‘æ¸²æŸ“</td><td><strong>ä¸ä¼š</strong> (<a href="https://react.dev/learn/referencing-values-with-refs" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>)</td><td><strong>ä¼š</strong> (<a href="https://react.dev/learn/referencing-values-with-refs" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>)</td></tr><tr><td>å€¼æ˜¯å¦å¯å˜</td><td>å¯å˜ï¼ˆä½ å¯ä»¥ç›´æ¥å†™ <code>ref.current = ...</code>ï¼‰ (<a href="https://react.dev/learn/referencing-values-with-refs" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>)</td><td>â€œä¸å¯å˜â€æ„ä¹‰ä¸Šï¼Œå¿…é¡»é€šè¿‡ <code>setValue(...)</code> æ›´æ–°</td></tr><tr><td>åœ¨æ¸²æŸ“æœŸé—´è¯»å–</td><td>ä¸æ¨èåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­è¯»å–ï¼å†™å…¥ <code>ref.current</code>ï¼Œå› ä¸º React æ— æ³•è¿½è¸ªå®ƒï¼Œå¯èƒ½å¯¼è‡´ä¸å¯é¢„æµ‹è¡Œä¸ºã€‚ (<a href="https://react.dev/learn/referencing-values-with-refs" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>)</td><td>å¯ä»¥ç›´æ¥åœ¨æ¸²æŸ“å‡½æ•°ä¸­è¯»å– stateï¼ŒReact ä¼šæ­£ç¡®è¿½è¸ª</td></tr><tr><td>ç”¨é€”</td><td>å­˜å‚¨ï¼šå®šæ—¶å™¨ IDã€æµè§ˆå™¨ APIsã€DOM å…ƒç´ å¼•ç”¨ã€è¿‡ç¨‹çŠ¶æ€ç­‰ï¼Œä¸å½±å“ UI æ¸²æŸ“ã€‚ (<a href="https://react.dev/learn/referencing-values-with-refs" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>)</td><td>å­˜å‚¨ä¼šç”¨äº UI æ˜¾ç¤ºæˆ–å†³å®šæ¸²æŸ“é€»è¾‘çš„æ•°æ®ï¼ˆç”¨æˆ·è¾“å…¥ã€æ˜¯å¦å±•ç¤ºã€è®¡æ•°å™¨ç­‰ï¼‰</td></tr></tbody></table><p>Ref ä½¿ç”¨ç¤ºä¾‹</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { useRef } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;react&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Form</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">inputRef</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useRef</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">null</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleClick</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    inputRef.current.</span><span style="color:#6F42C1;">focus</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    &lt;&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">input</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{inputRef} /&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{handleClick}&gt;</span></span>
<span class="line"><span style="color:#24292E;">        Focus the input</span></span>
<span class="line"><span style="color:#24292E;">      &lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä¸ºä½•éœ€è¦ Refsï¼ˆå¼•ç”¨ï¼‰ï¼Ÿ</strong> React é»˜è®¤è´Ÿè´£æ›´æ–° DOMï¼Œä»¥åŒ¹é…ç»„ä»¶è¾“å‡ºã€‚é€šå¸¸ä½ ä¸éœ€è¦æ‰‹åŠ¨æ“ä½œ DOMã€‚ä½†åœ¨æŸäº›æƒ…å½¢ï¼ˆå¦‚ï¼šè®©è¾“å…¥æ¡†è‡ªåŠ¨èšç„¦ã€æ»šåŠ¨åˆ°æŸä¸ªå…ƒç´ ã€æµ‹é‡å…ƒç´ å°ºå¯¸/ä½ç½®ï¼‰ä¸‹ï¼Œå°±éœ€è¦è·å– React ç®¡ç†çš„ DOM èŠ‚ç‚¹ã€‚â€‚<a href="https://react.dev/learn/manipulating-the-dom-with-refs" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥ç”¨ â€œrefâ€ æ¥è®¿é—® DOM èŠ‚ç‚¹å¹¶è°ƒç”¨æµè§ˆå™¨åŸç”Ÿ APIã€‚â€‚<a href="https://react.dev/learn/manipulating-the-dom-with-refs" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><strong>å¦‚ä½•è·å– DOM èŠ‚ç‚¹å¼•ç”¨ï¼Ÿ</strong></p><ul><li>ä½¿ç”¨ <code>useRef()</code> Hook åˆ›å»ºä¸€ä¸ª ref å¯¹è±¡ï¼ˆä¾‹å¦‚ <code>const myRef = useRef(null);</code>ï¼‰â€‚<a href="https://react.dev/learn/manipulating-the-dom-with-refs" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>åœ¨ JSX å…ƒç´ ä¸ŠåŠ ä¸Š <code>ref={myRef}</code>ï¼ŒReact åœ¨ commit é˜¶æ®µä¼šæŠŠè¯¥ DOM èŠ‚ç‚¹èµ‹å€¼ç»™ <code>myRef.current</code>ã€‚â€‚<a href="https://react.dev/learn/manipulating-the-dom-with-refs" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>æ³¨æ„ï¼šåœ¨ render é˜¶æ®µ <code>myRef.current</code> å¯èƒ½ä»ä¸º <code>null</code>ï¼Œå› ä¸º DOM èŠ‚ç‚¹å°šæœªåˆ›å»ºæˆ–å°šæœªæ›´æ–°ã€‚<a href="https://react.dev/learn/manipulating-the-dom-with-refs" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><p><strong>ä½•æ—¶ä½¿ç”¨ Refsï¼Ÿ</strong> å¸¸è§åœºæ™¯åŒ…æ‹¬ï¼š</p><ul><li>è®©è¾“å…¥æ¡†èšç„¦ï¼ˆfocusï¼‰â€‚<a href="https://react.dev/learn/manipulating-the-dom-with-refs" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>æ»šåŠ¨åˆ°æŸä¸ªå…ƒç´ ï¼ˆscrollIntoViewï¼‰â€‚<a href="https://react.dev/learn/manipulating-the-dom-with-refs" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>æµ‹é‡å…ƒç´ å¤§å°ã€ä½ç½®ï¼ˆgetBoundingClientRectï¼‰</li><li>æˆ–è€…è°ƒç”¨æµè§ˆå™¨ APIï¼ˆå¦‚ video çš„ play/pauseï¼‰â€‚<a href="https://react.dev/learn/manipulating-the-dom-with-refs" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ä¹Ÿå°±æ˜¯è¯´ï¼ŒRefs æ˜¯ä¸€ç§ â€œé€ƒç”Ÿèˆ±â€ï¼ˆescape hatchï¼‰â€”â€”åœ¨ React æ§åˆ¶ä¹‹å¤–éœ€è¦ç›´æ¥æ“ä½œ DOM æ—¶æ‰ç”¨ã€‚</li></ul><hr><h2 id="_9-effect" tabindex="-1"><a class="header-anchor" href="#_9-effect" aria-hidden="true">#</a> 9. Effect</h2><p>åœ¨ React é‡Œï¼Œç»„ä»¶ä¸»è¦åšä¸¤ä»¶äº‹ï¼š</p><ul><li><strong>æ¸²æŸ“é€»è¾‘</strong> ï¼šæ ¹æ® <code>props</code> å’Œ <code>state</code> è®¡ç®—å‡ºè¦è¿”å›çš„ JSXï¼ˆå¿…é¡»æ˜¯â€œçº¯å‡½æ•°â€â€”â€”åªç®—ç»“æœï¼Œä¸åšå‰¯ä½œç”¨ï¼‰ã€‚<a href="https://react.dev/learn/synchronizing-with-effects" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><strong>äº‹ä»¶å¤„ç†</strong> ï¼šå“åº”ç”¨æˆ·ç‚¹å‡»ã€è¾“å…¥ç­‰äº‹ä»¶ï¼Œå»å‘è¯·æ±‚ã€æ›´æ–°çŠ¶æ€ã€è·³è½¬é¡µé¢ï¼Œè¿™äº›éƒ½æ˜¯â€œå‰¯ä½œç”¨â€ã€‚<a href="https://react.dev/learn/synchronizing-with-effects" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><p>ä½†æ˜¯æœ‰ä¸€ç±»äº‹æƒ…æ¯”è¾ƒå°´å°¬ï¼š å®ƒä¸æ˜¯ç”¨æˆ·ç‚¹äº†æŸä¸ªæŒ‰é’®æ‰å‘ç”Ÿï¼Œè€Œæ˜¯ <strong>â€œåªè¦ç»„ä»¶å‡ºç°åœ¨å±å¹•ä¸Šï¼Œå°±åº”è¯¥å‘ç”Ÿâ€</strong> ã€‚ æ¯”å¦‚ï¼šè¿æ¥èŠå¤©å®¤ã€æ’­æ”¾è§†é¢‘ã€æ³¨å†Œæµè§ˆå™¨äº‹ä»¶ç›‘å¬ã€åŸ‹ç‚¹ç»Ÿè®¡â€¦â€¦ è¿™æ—¶å€™å°±è½®åˆ° <strong>Effect</strong> ä¸Šåœºäº†ã€‚</p><h3 id="ä¾‹å­-ç”¨-effect-æ§åˆ¶-video-æ’­æ”¾" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-ç”¨-effect-æ§åˆ¶-video-æ’­æ”¾" aria-hidden="true">#</a> ä¾‹å­ï¼šç”¨ Effect æ§åˆ¶ <code>&lt;video&gt;</code> æ’­æ”¾</h3><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç®€å•çš„è§†é¢‘æ’­æ”¾å™¨ç»„ä»¶ï¼Œå¸Œæœ›é€šè¿‡ <code>isPlaying</code> æ§åˆ¶å®ƒæ˜¯ã€Œæ’­æ”¾ã€è¿˜æ˜¯ã€Œæš‚åœã€ï¼š</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { useEffect, useRef } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">VideoPlayer</span><span style="color:#24292E;">({ </span><span style="color:#E36209;">src</span><span style="color:#24292E;">, </span><span style="color:#E36209;">isPlaying</span><span style="color:#24292E;"> }) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">videoRef</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useRef</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">null</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">useEffect</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">video</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> videoRef.current;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">!</span><span style="color:#24292E;">video) </span><span style="color:#D73A49;">return</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (isPlaying) {</span></span>
<span class="line"><span style="color:#24292E;">      video.</span><span style="color:#6F42C1;">play</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      video.</span><span style="color:#6F42C1;">pause</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  }, [isPlaying]); </span><span style="color:#6A737D;">// åªæœ‰ isPlaying å˜åŒ–æ—¶æ‰é‡æ–°åŒæ­¥</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> &lt;</span><span style="color:#22863A;">video</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{videoRef} </span><span style="color:#6F42C1;">src</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{src} </span><span style="color:#6F42C1;">loop</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">playsInline</span><span style="color:#24292E;"> /&gt;;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¤–å±‚å†åŒ…ä¸€å±‚æŒ‰é’®åˆ‡æ¢çŠ¶æ€ï¼š</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { useState } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">App</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">isPlaying</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">setIsPlaying</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">false</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    &lt;&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setIsPlaying</span><span style="color:#24292E;">(</span><span style="color:#E36209;">p</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">!</span><span style="color:#24292E;">p)}&gt;</span></span>
<span class="line"><span style="color:#24292E;">        {isPlaying </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;æš‚åœ&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;æ’­æ”¾&quot;</span><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">      &lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#005CC5;">VideoPlayer</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">src</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">isPlaying</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{isPlaying}</span></span>
<span class="line"><span style="color:#24292E;">      /&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/&gt;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œå‘ç”Ÿäº†å‡ ä»¶äº‹ï¼š</p><ol><li>ç»„ä»¶æ¸²æŸ“æ—¶ï¼Œåªæ˜¯è¿”å›äº†ä¸€ä¸ªå¸¦ <code>ref</code> çš„ <code>&lt;video&gt;</code> æ ‡ç­¾ â€”â€” <strong>æ¸²æŸ“æœ¬èº«ä¸ç¢° DOM API</strong> ã€‚</li><li>React æŠŠè¿™æ®µ JSX â€œæäº¤ï¼ˆcommitï¼‰â€åˆ°çœŸå® DOM ä¸Šã€‚</li><li>æäº¤ç»“æŸåï¼ŒReact æ‰è°ƒç”¨ <code>useEffect</code> é‡Œçš„å›è°ƒï¼Œåœ¨é‚£é‡Œæˆ‘ä»¬ç”¨ <code>video.play()</code>/<code>video.pause()</code> å»æ“ä½œçœŸå® DOMã€‚<a href="https://react.dev/learn/synchronizing-with-effects" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ol><p>ç”¨ä¸€å¥è¯æ€»ç»“ï¼š</p><blockquote><p><strong>Effect = æ¸²æŸ“ä¹‹åï¼Œç”¨å½“å‰çš„ props/state å»â€œåŒæ­¥â€å¤–éƒ¨ç³»ç»Ÿçš„çŠ¶æ€ã€‚</strong></p></blockquote><h3 id="ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–æ•°ç»„" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–æ•°ç»„" aria-hidden="true">#</a> ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–æ•°ç»„ï¼Ÿ</h3><p>å¦‚æœä¸ç»™ <code>useEffect</code> ä¼ ä¾èµ–æ•°ç»„ï¼š</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">useEffect</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£å®ƒä¼šåœ¨ <strong>æ¯ä¸€æ¬¡æ¸²æŸ“åéƒ½æ‰§è¡Œ</strong> ã€‚æœ‰æ—¶è¿™ä¼šï¼š</p><ul><li>æ€§èƒ½ä¸å¥½ï¼šæ¯”å¦‚æ¯æ¬¡è¾“å…¥éƒ½é‡æ–°è¿ä¸€æ¬¡æœåŠ¡å™¨ã€‚<a href="https://react.dev/learn/synchronizing-with-effects" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>è¡Œä¸ºé”™è¯¯ï¼šæ¯”å¦‚æ¯æ¬¡æ¸²æŸ“éƒ½é‡æ–°è§¦å‘ä¸€æ¬¡ã€Œæ·¡å…¥åŠ¨ç”»ã€ã€‚</li></ul><p>æ‰€ä»¥æˆ‘ä»¬é€šå¸¸ä¼šåƒä¸Šé¢çš„ä¾‹å­ä¸€æ ·ä¼ å…¥ä¾èµ–æ•°ç»„ï¼š</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">useEffect</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// æ ¹æ® isPlaying åŒæ­¥è§†é¢‘çŠ¶æ€</span></span>
<span class="line"><span style="color:#24292E;">}, [isPlaying]);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å«ä¹‰æ˜¯ï¼š <strong>åªæœ‰å½“ <code>isPlaying</code> å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰éœ€è¦å†æ¬¡è¿è¡Œè¿™ä¸ª Effect</strong> ã€‚</p><h3 id="ä¸€ä¸ªç»å…¸å‘-åœ¨-effect-é‡Œç›´æ¥-setstate" tabindex="-1"><a class="header-anchor" href="#ä¸€ä¸ªç»å…¸å‘-åœ¨-effect-é‡Œç›´æ¥-setstate" aria-hidden="true">#</a> ä¸€ä¸ªç»å…¸å‘ï¼šåœ¨ Effect é‡Œç›´æ¥ setState</h3><p>çœ‹ä¸‹é¢è¿™æ®µâ€œåä¾‹â€ä»£ç ï¼ˆç®€åŒ–è‡ªæ–‡æ¡£ï¼‰ï¼š<a href="https://react.dev/learn/synchronizing-with-effects" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">count</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">setCount</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">useEffect</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">setCount</span><span style="color:#24292E;">(count </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p><ol><li>ç»„ä»¶æ¸²æŸ“å®Œï¼ŒEffect è¿è¡Œï¼Œ<code>setCount(count + 1)</code>ã€‚</li><li>çŠ¶æ€å˜äº†ï¼Œåˆè§¦å‘ä¸€æ¬¡æ¸²æŸ“ã€‚</li><li>æ¸²æŸ“å®Œåˆè¿è¡Œ Effectï¼Œå†æ¬¡ <code>setCount</code>â€¦â€¦</li><li>æ— é™å¾ªç¯ ğŸ”„ï¼Œé¡µé¢ç›´æ¥ç‚¸æ‰ã€‚</li></ol><p>è®°ä½ä¸€æ¡ç»éªŒï¼š</p><blockquote><p><strong>Effect æ›´é€‚åˆâ€œå’Œå¤–éƒ¨ä¸–ç•ŒåŒæ­¥â€ï¼Œè€Œä¸æ˜¯åœ¨å†…éƒ¨â€œçº¯ç²¹æ”¹ stateâ€ã€‚ å¦‚æœåªæ˜¯æƒ³æ ¹æ®ä¸€ä¸ª state æ¨å‡ºå¦ä¸€ä¸ª stateï¼Œé€šå¸¸å¯ä»¥ç”¨è®¡ç®—å±æ€§æˆ–åœ¨äº‹ä»¶é‡Œå¤„ç†ï¼Œè€Œä¸æ˜¯ä¸Šæ¥å°±å†™ Effectã€‚</strong><a href="https://react.dev/learn/synchronizing-with-effects" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><hr><h2 id="_10-react-ç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#_10-react-ç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a> 10. React ç”Ÿå‘½å‘¨æœŸ</h2><p>åœ¨ React ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ç†Ÿæ‚‰ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼šç»„ä»¶ä¼šæŒ‚è½½ï¼ˆmountï¼‰ã€æ›´æ–°ï¼ˆupdateï¼‰ã€å¸è½½ï¼ˆunmountï¼‰ã€‚ä½†å½“ä½ ä½¿ç”¨ React Hooks ä¸­çš„ <code>useEffect</code>ã€æˆ–å…¶ä»– â€œå‰¯ä½œç”¨â€ æ—¶ï¼Œå…¶å®éœ€è¦æ¢ä¸€ç§è§†è§’æ¥çœ‹ â€” <strong>æ¯ä¸€ä¸ª Effectï¼ˆå‰¯ä½œç”¨ï¼‰æœ¬èº«ä¹Ÿæœ‰è‡ªå·±çš„â€œåŒæ­¥å¯åŠ¨ï¼åœæ­¢â€è¿‡ç¨‹</strong> ã€‚æ–‡æ¡£æŒ‡å‡ºï¼š</p><blockquote><p>â€œEffects have a different lifecycle from componentsâ€¦ An Effect can only do two things: to start synchronizing something, and later to stop synchronizing it.â€ <a href="https://react.dev/learn/lifecycle-of-reactive-effects" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ä¹Ÿå°±æ˜¯è¯´ï¼šæˆ‘ä»¬ä¸å†å•çº¯å»æƒ³â€œç»„ä»¶ä½•æ—¶æŒ‚è½½ï¼æ›´æ–°ï¼å¸è½½â€ï¼Œè€Œæ˜¯å»æƒ³ï¼šâ€œè¿™ä¸ª Effect æ˜¯ä»€ä¹ˆæ—¶å€™å¼€å§‹åŒæ­¥ï¼Ÿä»€ä¹ˆæ—¶å€™åœæ­¢åŒæ­¥ï¼Ÿâ€ã€‚</p></blockquote><h3 id="æ ¸å¿ƒç¤ºä¾‹-chatroom" tabindex="-1"><a class="header-anchor" href="#æ ¸å¿ƒç¤ºä¾‹-chatroom" aria-hidden="true">#</a> æ ¸å¿ƒç¤ºä¾‹ï¼šChatRoom</h3><p>æ–‡æ¡£ä¸­ç»™äº†ä¸€ä¸ªéå¸¸ç›´è§‚çš„ç¤ºä¾‹ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#24292e;">const serverUrl = &#39;https://localhost:1234&#39;;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">function ChatRoom({ roomId }) {</span></span>
<span class="line"><span style="color:#24292e;">  useEffect(() =&gt; {</span></span>
<span class="line"><span style="color:#24292e;">    const connection = createConnection(serverUrl, roomId);</span></span>
<span class="line"><span style="color:#24292e;">    connection.connect();</span></span>
<span class="line"><span style="color:#24292e;">    return () =&gt; {</span></span>
<span class="line"><span style="color:#24292e;">      connection.disconnect();</span></span>
<span class="line"><span style="color:#24292e;">    };</span></span>
<span class="line"><span style="color:#24292e;">  }, [roomId]);</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">  return &lt;h1&gt;Welcome to the {roomId} room!&lt;/h1&gt;;</span></span>
<span class="line"><span style="color:#24292e;">}</span></span>
<span class="line"><span style="color:#24292e;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªä¾‹å­å¸®åŠ©æˆ‘ä»¬ç†è§£ Effect çš„â€œå¯åŠ¨â€ï¼ˆconnectï¼‰ä¸â€œæ¸…ç†ï¼åœæ­¢â€ï¼ˆdisconnectï¼‰æœºåˆ¶ã€‚ <a href="https://react.dev/learn/lifecycle-of-reactive-effects" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="ä¸ºä»€ä¹ˆä¸ä»…ä»…æ˜¯-æŒ‚è½½-å¸è½½" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆä¸ä»…ä»…æ˜¯-æŒ‚è½½-å¸è½½" aria-hidden="true">#</a> ä¸ºä»€ä¹ˆä¸ä»…ä»…æ˜¯â€œæŒ‚è½½ï¼å¸è½½â€ï¼Ÿ</h3><p>å‡è®¾ç”¨æˆ·æœ€åˆè¿›å…¥ <code>&quot;general&quot;</code> roomï¼Œç„¶ååˆ‡æ¢åˆ° <code>&quot;travel&quot;</code> roomã€‚ç»„ä»¶å¹¶æ²¡æœ‰å¸è½½â€”â€”åªæ˜¯ <code>roomId</code> è¿™ä¸ª prop å‘ç”Ÿäº†å˜åŒ–ã€‚é‚£ Effect åº”è¯¥æ€ä¹ˆåšï¼Ÿ</p><ol><li>åœæ­¢åŒæ­¥æ—§çš„ roomId ï¼ˆæ–­å¼€ â€œgeneralâ€ è¿æ¥ï¼‰</li><li>å¯åŠ¨åŒæ­¥æ–°çš„ roomId ï¼ˆè¿æ¥ â€œtravelâ€ï¼‰ æ–‡æ¡£é‡Œæè¿°ï¼š</li></ol><blockquote><p>â€œAt this point, you want React to do two things: 1. Stop synchronizing with the old <code>roomId</code> â€¦ 2. Start synchronizing with the new <code>roomId</code>.â€ <a href="https://react.dev/learn/lifecycle-of-reactive-effects" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> è¿™æ­£è¯´æ˜ï¼šEffect çš„åŒæ­¥å¹¶éåªåœ¨æŒ‚è½½æˆ–å¸è½½æ—¶è§¦å‘ä¸€æ¬¡ï¼Œè€Œå¯èƒ½åœ¨ç»„ä»¶ä»ç„¶æŒ‚è½½çš„çŠ¶æ€ä¸‹åå¤ â€œåœæ­¢æ—§çš„â†’å¯åŠ¨æ–°çš„â€ã€‚</p></blockquote><hr><h3 id="ä»-effect-è§’åº¦æ€è€ƒ" tabindex="-1"><a class="header-anchor" href="#ä»-effect-è§’åº¦æ€è€ƒ" aria-hidden="true">#</a> ä» Effect è§’åº¦æ€è€ƒ</h3><p>æ–‡æ¡£å¼ºè°ƒä¸€ç§æ€è€ƒæ–¹å¼ï¼š</p><blockquote><p>â€œInstead, always focus on a single start/stop cycle at a time. â€¦ All you need to do is to describe how to start synchronization and how to stop it.â€ <a href="https://react.dev/learn/lifecycle-of-reactive-effects" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ä¹Ÿå°±æ˜¯è¯´ï¼šä½ å†™ <code>useEffect</code> æ—¶ï¼Œåˆ«æ€»æƒ³ç€ â€œç»„ä»¶ä»€ä¹ˆæ—¶å€™æŒ‚è½½ï¼æ›´æ–°ï¼å¸è½½â€ã€‚è€Œç›´æ¥é—®è‡ªå·±ä¸¤ä¸ªé—®é¢˜ï¼š</p></blockquote><ul><li>å½“è¿™ä¸ª Effect å¯åŠ¨ï¼ˆsynchronizeï¼‰æ—¶ï¼Œæˆ‘è¯¥åšä»€ä¹ˆï¼Ÿ</li><li>å½“è¿™ä¸ª Effect åœæ­¢ï¼ˆcleanupï¼‰æ—¶ï¼Œæˆ‘è¯¥åšä»€ä¹ˆï¼Ÿ</li></ul><p>åœ¨ä¸Šé¢ ChatRoom çš„ä¾‹å­é‡Œï¼š</p><ul><li>å¯åŠ¨ â†’ <code>createConnection(...).connect()</code></li><li>åœæ­¢ â†’ <code>connection.disconnect()</code></li></ul><p>æ— è®ºæ˜¯å› ä¸º roomId å˜äº†ï¼Œè¿˜æ˜¯ç»„ä»¶å¸è½½äº†ï¼Œè¿™ä¸¤ä¸ªæµç¨‹éƒ½è¦è¢«æ­£ç¡®æ‰§è¡Œã€‚</p><hr><h3 id="ä¾èµ–æ•°ç»„-dependencies-è¦ç‚¹" tabindex="-1"><a class="header-anchor" href="#ä¾èµ–æ•°ç»„-dependencies-è¦ç‚¹" aria-hidden="true">#</a> ä¾èµ–æ•°ç»„ï¼ˆDependenciesï¼‰è¦ç‚¹</h3><p>Effect çš„è¡Œä¸ºå…³é”®è¿˜åœ¨äºä¾èµ–æ•°ç»„ï¼š<code>[]</code> æˆ– <code>[roomId]</code> ç­‰ã€‚æ–‡æ¡£æŒ‡å‡ºï¼š</p><ul><li><p>å¦‚æœä½ åœ¨ Effect å†…è¯»å–äº†ä¸€ä¸ªå¯èƒ½éšæ¸²æŸ“æ”¹å˜çš„å€¼ï¼ˆå³â€œreactive valueâ€ï¼‰ï¼Œå°±å¿…é¡»æŠŠå®ƒæ”¾è¿›ä¾èµ–æ•°ç»„ã€‚ <a href="https://react.dev/learn/lifecycle-of-reactive-effects" target="_blank" rel="noopener noreferrer">React+1<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p>åœ¨å‰ä¾‹ä¸­ï¼Œ<code>roomId</code> æ˜¯ propï¼Œä¼šå˜ï¼Œå› æ­¤æ”¾ <code>[roomId]</code>ã€‚è€Œ <code>serverUrl = &#39;https://localhost:1234&#39;</code> æ˜¯ä¸€ä¸ªå›ºå®šå¸¸é‡ï¼Œä¸ä¼šå˜ï¼Œå› æ­¤ä¸å¿…æ”¾è¿›æ•°ç»„ã€‚ <a href="https://react.dev/learn/lifecycle-of-reactive-effects" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p>å¦‚æœä½ æŠŠæ‰€æœ‰ç”¨åˆ°çš„ reactive å€¼éƒ½â€œç§»å‡ºâ€ç»„ä»¶æˆ– effect å†…éƒ¨ï¼ˆå³å˜æˆå¸¸é‡ï¼‰ï¼Œé‚£å°±å¯ä»¥ç”¨ç©ºæ•°ç»„ <code>[]</code>ï¼Œè¡¨ç¤ºâ€œåªå¯åŠ¨ä¸€æ¬¡ã€åœæ­¢ä¸€æ¬¡â€ã€‚ä¾‹å¦‚ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#24292e;">const serverUrl = &#39;https://localhost:1234&#39;;</span></span>
<span class="line"><span style="color:#24292e;">const roomId = &#39;general&#39;;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">function ChatRoom() {</span></span>
<span class="line"><span style="color:#24292e;">  useEffect(() =&gt; {</span></span>
<span class="line"><span style="color:#24292e;">    const connection = createConnection(serverUrl, roomId);</span></span>
<span class="line"><span style="color:#24292e;">    connection.connect();</span></span>
<span class="line"><span style="color:#24292e;">    return () =&gt; connection.disconnect();</span></span>
<span class="line"><span style="color:#24292e;">  }, []);</span></span>
<span class="line"><span style="color:#24292e;">  return &lt;h1&gt;Welcome to the {roomId} room!&lt;/h1&gt;;</span></span>
<span class="line"><span style="color:#24292e;">}</span></span>
<span class="line"><span style="color:#24292e;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://react.dev/learn/lifecycle-of-reactive-effects" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li></ul><hr><h3 id="å°ç»“" tabindex="-1"><a class="header-anchor" href="#å°ç»“" aria-hidden="true">#</a> å°ç»“</h3><ul><li>æ¯ä¸ª Effect æ˜¯ä¸€ä¸ªâ€œåŒæ­¥è¿‡ç¨‹â€ï¼šå¯åŠ¨â†’è¿è¡Œâ†’åœæ­¢ï¼Œè€Œä¸æ˜¯ç®€å•ç»‘å®šç»„ä»¶ç”Ÿå‘½å‘¨æœŸã€‚</li><li>å½“ä½ å†™ <code>useEffect(() =&gt; { â€¦ }, [deps])</code> æ—¶ï¼Œè¦æ€è€ƒ â€œæˆ‘ä»€ä¹ˆæ—¶å€™å¯åŠ¨â€â€œæˆ‘ä»€ä¹ˆæ—¶å€™åœæ­¢â€è¿™ä¸ªåŒæ­¥ã€‚</li><li>ä¾èµ–æ•°ç»„çš„æ¯ä¸€ä¸ªå€¼éƒ½å¿…é¡»æ˜¯ä½ åœ¨ Effect å†…è¯»å–çš„ã€ä¸”å¯èƒ½å˜çš„ reactive å€¼ã€‚æ¼æ‰å°±å®¹æ˜“å‡º bugã€‚</li><li>ç”¨ç©ºä¾èµ–ï¼ˆ<code>[]</code>ï¼‰æ„å‘³ç€ â€œç»„ä»¶æŒ‚è½½æ—¶å¯åŠ¨ï¼ŒåŒå¸è½½æ—¶åœæ­¢ï¼›ä¸­é—´ä¸éš prop/state å˜åŠ¨è€Œé‡æ–°åŒæ­¥â€ã€‚</li><li>ç”¨éç©ºä¾èµ–ï¼ˆå¦‚ <code>[roomId]</code>ï¼‰æ„å‘³ç€ â€œåªè¦æŸä¸ªå…³é”®å€¼å˜äº†ï¼Œå°±åœæ­¢æ—§åŒæ­¥ã€å¯åŠ¨æ–°åŒæ­¥â€ã€‚</li></ul><hr><h2 id="_11-hook" tabindex="-1"><a class="header-anchor" href="#_11-hook" aria-hidden="true">#</a> 11. Hook</h2><p>å†™ React çš„æ—¶å€™ï¼Œä½ ç»å¸¸ä¼šé‡åˆ°â€œä¸¤ä¸ªåœ°æ–¹åšäº†åŒä¸€ä»¶äº‹â€çš„æƒ…å†µï¼šæœ‰ä¸€æ®µ state + handler + JSX é€»è¾‘ï¼Œåœ¨ä¸€ä¸ªç»„ä»¶é‡Œå‡ºç°ä¸¤æ¬¡ï¼Œæˆ–è€…åœ¨å¤šä¸ªç»„ä»¶é‡Œé‡å¤ã€‚å®˜æ–¹çš„å»ºè®®æ˜¯ï¼šæŠŠ <strong>å¯å¤ç”¨çš„ã€æœ‰çŠ¶æ€çš„é€»è¾‘</strong> æŠ½æˆè‡ªå®šä¹‰ Hookã€‚æ³¨æ„è¿™é‡Œçš„å…³é”®è¯æ˜¯â€œé€»è¾‘â€ï¼Œä¸æ˜¯â€œçŠ¶æ€â€â€”â€”æ¯æ¬¡è°ƒç”¨ Hook éƒ½ä¼šåˆ›å»ºè‡ªå·±ç‹¬ç«‹çš„ä¸€ä»½ stateã€‚ <a href="https://react.dev/learn/reusing-logic-with-custom-hooks?utm_source=chatgpt.com" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="ä¾‹å­-æŠŠè¡¨å•è¾“å…¥çš„é‡å¤é€»è¾‘æŠ½å‡ºæ¥" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-æŠŠè¡¨å•è¾“å…¥çš„é‡å¤é€»è¾‘æŠ½å‡ºæ¥" aria-hidden="true">#</a> ä¾‹å­ï¼šæŠŠè¡¨å•è¾“å…¥çš„é‡å¤é€»è¾‘æŠ½å‡ºæ¥</h3><p>å…ˆçœ‹ä¸€ä¸ªæ²¡æœ‰è‡ªå®šä¹‰ Hook çš„ <code>Form</code> ç»„ä»¶ï¼šå®ƒå¯¹ firstName/lastName ä¸¤ä¸ªè¾“å…¥æ¡†åˆ†åˆ«ç»´æŠ¤ stateï¼Œå¹¶å†™ä¸¤ä¸ªå‡ ä¹ä¸€æ ·çš„ onChange å¤„ç†å‡½æ•°ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#24292e;">import { useState } from &quot;react&quot;;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">export default function Form() {</span></span>
<span class="line"><span style="color:#24292e;">  const [firstName, setFirstName] = useState(&quot;Mary&quot;);</span></span>
<span class="line"><span style="color:#24292e;">  const [lastName, setLastName] = useState(&quot;Poppins&quot;);</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">  return (</span></span>
<span class="line"><span style="color:#24292e;">    &lt;&gt;</span></span>
<span class="line"><span style="color:#24292e;">      &lt;label&gt;</span></span>
<span class="line"><span style="color:#24292e;">        First name:</span></span>
<span class="line"><span style="color:#24292e;">        &lt;input</span></span>
<span class="line"><span style="color:#24292e;">          value={firstName}</span></span>
<span class="line"><span style="color:#24292e;">          onChange={(e) =&gt; setFirstName(e.target.value)}</span></span>
<span class="line"><span style="color:#24292e;">        /&gt;</span></span>
<span class="line"><span style="color:#24292e;">      &lt;/label&gt;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">      &lt;label&gt;</span></span>
<span class="line"><span style="color:#24292e;">        Last name:</span></span>
<span class="line"><span style="color:#24292e;">        &lt;input</span></span>
<span class="line"><span style="color:#24292e;">          value={lastName}</span></span>
<span class="line"><span style="color:#24292e;">          onChange={(e) =&gt; setLastName(e.target.value)}</span></span>
<span class="line"><span style="color:#24292e;">        /&gt;</span></span>
<span class="line"><span style="color:#24292e;">      &lt;/label&gt;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">      &lt;p&gt;&lt;b&gt;Good morning, {firstName} {lastName}.&lt;/b&gt;&lt;/p&gt;</span></span>
<span class="line"><span style="color:#24292e;">    &lt;/&gt;</span></span>
<span class="line"><span style="color:#24292e;">  );</span></span>
<span class="line"><span style="color:#24292e;">}</span></span>
<span class="line"><span style="color:#24292e;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‡å¤ç‚¹å¾ˆæ˜æ˜¾ï¼š</p><ul><li>æ¯ä¸ªå­—æ®µéƒ½è¦ä¸€ä»½ state</li><li>æ¯ä¸ªå­—æ®µéƒ½è¦ä¸€ä¸ª change handler</li><li>æ¯ä¸ª input éƒ½è¦å†™ <code>value</code> å’Œ <code>onChange</code></li></ul><p>äºæ˜¯æˆ‘ä»¬å¯ä»¥æç‚¼å‡ºä¸€ä¸ª <code>useFormInput</code>ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#24292e;">import { useState } from &quot;react&quot;;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">export function useFormInput(initialValue) {</span></span>
<span class="line"><span style="color:#24292e;">  const [value, setValue] = useState(initialValue);</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">  function handleChange(e) {</span></span>
<span class="line"><span style="color:#24292e;">    setValue(e.target.value);</span></span>
<span class="line"><span style="color:#24292e;">  }</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">  return {</span></span>
<span class="line"><span style="color:#24292e;">    value,</span></span>
<span class="line"><span style="color:#24292e;">    onChange: handleChange,</span></span>
<span class="line"><span style="color:#24292e;">  };</span></span>
<span class="line"><span style="color:#24292e;">}</span></span>
<span class="line"><span style="color:#24292e;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶å <code>Form</code> å˜å¾—æ›´å¹²å‡€ï¼šæˆ‘ä»¬åªå£°æ˜â€œæˆ‘è¦ä¸¤ä¸ªè¾“å…¥æ¡†â€ï¼Œè‡³äºè¾“å…¥æ¡†æ€ä¹ˆåŒæ­¥ stateï¼Œç”± Hook å†…éƒ¨å¤„ç†ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki github-light" style="background-color:#fff;" tabindex="0"><code><span class="line"><span style="color:#24292e;">import { useFormInput } from &quot;./useFormInput&quot;;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">export default function Form() {</span></span>
<span class="line"><span style="color:#24292e;">  const firstNameProps = useFormInput(&quot;Mary&quot;);</span></span>
<span class="line"><span style="color:#24292e;">  const lastNameProps = useFormInput(&quot;Poppins&quot;);</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">  return (</span></span>
<span class="line"><span style="color:#24292e;">    &lt;&gt;</span></span>
<span class="line"><span style="color:#24292e;">      &lt;label&gt;</span></span>
<span class="line"><span style="color:#24292e;">        First name:</span></span>
<span class="line"><span style="color:#24292e;">        &lt;input {...firstNameProps} /&gt;</span></span>
<span class="line"><span style="color:#24292e;">      &lt;/label&gt;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">      &lt;label&gt;</span></span>
<span class="line"><span style="color:#24292e;">        Last name:</span></span>
<span class="line"><span style="color:#24292e;">        &lt;input {...lastNameProps} /&gt;</span></span>
<span class="line"><span style="color:#24292e;">      &lt;/label&gt;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">      &lt;p&gt;&lt;b&gt;Good morning, {firstNameProps.value} {lastNameProps.value}.&lt;/b&gt;&lt;/p&gt;</span></span>
<span class="line"><span style="color:#24292e;">    &lt;/&gt;</span></span>
<span class="line"><span style="color:#24292e;">  );</span></span>
<span class="line"><span style="color:#24292e;">}</span></span>
<span class="line"><span style="color:#24292e;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œæœ€é‡è¦çš„ç‚¹ï¼š</p><ul><li><code>useFormInput</code> åªå†™äº†ä¸€ä»½é€»è¾‘</li><li><code>Form</code> è°ƒäº†ä¸¤æ¬¡ <code>useFormInput</code></li><li>æ‰€ä»¥å¾—åˆ°çš„æ˜¯ä¸¤ä»½ <strong>äº’ä¸å½±å“</strong> çš„ stateï¼ˆfirstName çš„è¾“å…¥ä¸ä¼šæ”¹ lastNameï¼‰ã€‚</li></ul><p>è¿™æ­£æ˜¯â€œå¤ç”¨é€»è¾‘ï¼Œä¸å¤ç”¨çŠ¶æ€â€çš„å«ä¹‰ã€‚ <a href="https://react.dev/learn/reusing-logic-with-custom-hooks?utm_source=chatgpt.com" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><hr><h3 id="å°ç»“-1" tabindex="-1"><a class="header-anchor" href="#å°ç»“-1" aria-hidden="true">#</a> å°ç»“</h3><p>å½“ä½ å‘ç°ç»„ä»¶é‡Œå‡ºç°å¯é‡å¤çš„ stateful é€»è¾‘æ—¶ï¼š</p><ol><li>å…ˆç¡®è®¤å®ƒç¡®å®åŒ…å« Hookï¼ˆæ¯”å¦‚ <code>useState/useEffect</code>ï¼‰</li><li>å†æŠŠé‡å¤éƒ¨åˆ†æŠ½æˆ <code>useXxx</code></li><li>è®©ç»„ä»¶åªè¡¨è¾¾æ„å›¾ï¼Œé€»è¾‘ç»†èŠ‚äº¤ç»™ Hook</li></ol><p>è‡ªå®šä¹‰ Hook çš„ä»·å€¼å°±åœ¨äºï¼šè®©ä½ çš„ç»„ä»¶æ›´åƒâ€œå£°æ˜å¼çš„ UIâ€ï¼Œè€Œä¸æ˜¯â€œåˆ°å¤„æ•£è½ç€é‡å¤çš„å®ç°ç»†èŠ‚â€ã€‚</p></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><!----><!----></div></footer><!----><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer"><a href="https://beian.miit.gov.cn/" target="_blank">æ²ªICPå¤‡2023027904å·-1</a>&nbsp;<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=" target="_blank"><img src="/assets/gongan.png">å…¬å®‰å¤‡æ¡ˆå· </a></div><div class="vp-copyright">Copyright Â© 2025 Kevin å´å˜‰æ–‡</div></footer></div><!--]--><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-c09ad24c.js" defer></script>
  </body>
</html>
