<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.61" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="http://antarina.tech/posts/notes/articles/%E7%AC%94%E8%AE%B0rasa1.html"><meta property="og:site_name" content="è®°å¿†ç¬”ä¹¦"><meta property="og:title" content="RASA å›å¿†å½•ï¼ˆä¸€ï¼‰ - è‡ªå®šä¹‰ RASA NLU æ¨¡å—"><meta property="og:description" content="RASA æ„Ÿè§‰åƒæ˜¯æ—¶ä»£çš„çœ¼æ³ªäº†ï¼Œè‡ªåŠ¨ LLM ç«äº†ä¹‹åï¼Œç±»ä¼¼ RASA ä¸€ç±»çš„ä¼ ç»Ÿ NLP å¯¹è¯æ¶æ„å˜å¾—å†·é—¨ï¼Œä¸å°‘æŠ€æœ¯ä¼¼ä¹ä¹Ÿè¢«æ‘’å¼ƒã€‚ä½†å¦‚ä»Šä¸å°‘å‚å®¶åœ¨å®ç°å¯¹è¯æœºå™¨äººã€æ™ºèƒ½æœåŠ¡ç­‰ AIGC æœåŠ¡ï¼Œå´ä¹Ÿä¼šç”¨åˆ°è¿™ç±»å‹çš„æ¡†æ¶ã€‚å¸‚é¢ä¸Šæä¾›ç±»ä¼¼ RASA æœåŠ¡çš„ low code å¹³å°ä¹Ÿä¸å°‘ï¼Œå¦‚ Nuance, Omilia, Kore.ai ç­‰ã€‚ è¯¥ç³»åˆ—æ–‡ç« ä¸»è¦å›´ç»• RASA æºç ï¼Œå¯¹è½åœ°éƒ¨ç½²ä¼ ç»Ÿ NLP å¯¹è¯æ¡†æ¶çš„ç›¸å…³è¯é¢˜å±•å¼€ã€‚æœ¬æ–‡é’ˆå¯¹ RASA è‡ªå®šä¹‰ NLU åŠŸèƒ½å±•å¼€ã€‚ RASA é»˜è®¤çš„ NLU ç­–ç•¥ä¸æ”¯æŒæ¯”å¦‚ç»†è…»åº¦æƒ…æ„Ÿåˆ†æã€æŒ‡ä»£æ¶ˆè§£ç­‰æ–¹æ¡ˆã€‚é€šè¿‡è‡ªå®šä¹‰ NLU æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥ä»»æ„ NLU æ–¹æ¡ˆï¼Œæ¯”å¦‚æ·»åŠ é¢å¤–çš„å®ä½“é“¾æ¥ã€å®ä½“çº é”™ã€ä¿¡æ¯æŠ½å–æ¨¡å—ã€‚"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-09-23T03:51:36.000Z"><meta property="article:author" content="Kevin å´å˜‰æ–‡"><meta property="article:tag" content="NLP"><meta property="article:published_time" content="2022-09-25T00:00:00.000Z"><meta property="article:modified_time" content="2023-09-23T03:51:36.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"RASA å›å¿†å½•ï¼ˆä¸€ï¼‰ - è‡ªå®šä¹‰ RASA NLU æ¨¡å—","image":[""],"datePublished":"2022-09-25T00:00:00.000Z","dateModified":"2023-09-23T03:51:36.000Z","author":[{"@type":"Person","name":"Kevin å´å˜‰æ–‡"}]}</script><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;700&display=swap" rel="stylesheet"><link rel="icon" href="/logo.svg"><title>RASA å›å¿†å½•ï¼ˆä¸€ï¼‰ - è‡ªå®šä¹‰ RASA NLU æ¨¡å— | è®°å¿†ç¬”ä¹¦</title><meta name="description" content="RASA æ„Ÿè§‰åƒæ˜¯æ—¶ä»£çš„çœ¼æ³ªäº†ï¼Œè‡ªåŠ¨ LLM ç«äº†ä¹‹åï¼Œç±»ä¼¼ RASA ä¸€ç±»çš„ä¼ ç»Ÿ NLP å¯¹è¯æ¶æ„å˜å¾—å†·é—¨ï¼Œä¸å°‘æŠ€æœ¯ä¼¼ä¹ä¹Ÿè¢«æ‘’å¼ƒã€‚ä½†å¦‚ä»Šä¸å°‘å‚å®¶åœ¨å®ç°å¯¹è¯æœºå™¨äººã€æ™ºèƒ½æœåŠ¡ç­‰ AIGC æœåŠ¡ï¼Œå´ä¹Ÿä¼šç”¨åˆ°è¿™ç±»å‹çš„æ¡†æ¶ã€‚å¸‚é¢ä¸Šæä¾›ç±»ä¼¼ RASA æœåŠ¡çš„ low code å¹³å°ä¹Ÿä¸å°‘ï¼Œå¦‚ Nuance, Omilia, Kore.ai ç­‰ã€‚ è¯¥ç³»åˆ—æ–‡ç« ä¸»è¦å›´ç»• RASA æºç ï¼Œå¯¹è½åœ°éƒ¨ç½²ä¼ ç»Ÿ NLP å¯¹è¯æ¡†æ¶çš„ç›¸å…³è¯é¢˜å±•å¼€ã€‚æœ¬æ–‡é’ˆå¯¹ RASA è‡ªå®šä¹‰ NLU åŠŸèƒ½å±•å¼€ã€‚ RASA é»˜è®¤çš„ NLU ç­–ç•¥ä¸æ”¯æŒæ¯”å¦‚ç»†è…»åº¦æƒ…æ„Ÿåˆ†æã€æŒ‡ä»£æ¶ˆè§£ç­‰æ–¹æ¡ˆã€‚é€šè¿‡è‡ªå®šä¹‰ NLU æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥ä»»æ„ NLU æ–¹æ¡ˆï¼Œæ¯”å¦‚æ·»åŠ é¢å¤–çš„å®ä½“é“¾æ¥ã€å®ä½“çº é”™ã€ä¿¡æ¯æŠ½å–æ¨¡å—ã€‚">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-47e996ca.css" as="style"><link rel="stylesheet" href="/assets/style-47e996ca.css">
    <link rel="modulepreload" href="/assets/app-272a06b6.js"><link rel="modulepreload" href="/assets/framework-d5c0d2cb.js"><link rel="modulepreload" href="/assets/ç¬”è®°rasa1.html-f1796ea5.js"><link rel="modulepreload" href="/assets/ç¬”è®°rasa1.html-51f3c7f1.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container no-sidebar has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button type="button" class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><!----><!----><span class="site-name">è®°å¿†ç¬”ä¹¦</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="ä¸»é¡µ"><span class="font-icon icon iconfont icon-home" style=""></span>ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="åšæ–‡"><span class="title"><span class="font-icon icon iconfont icon-blog" style=""></span>åšæ–‡</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/posts/notes/" class="nav-link active" aria-label="çŸ¥è¯†ç¬”è®°"><span class="font-icon icon iconfont icon-note" style=""></span>çŸ¥è¯†ç¬”è®°<!----></a></li><li class="dropdown-item"><a href="/posts/hometown/" class="nav-link" aria-label="æ³‰å·å¿†å¾€æ˜”"><span class="font-icon icon iconfont icon-like" style=""></span>æ³‰å·å¿†å¾€æ˜”<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/timeline/" class="nav-link" aria-label="å½’æ¡£"><span class="font-icon icon iconfont icon-categoryselected" style=""></span>å½’æ¡£<!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/kevinng77" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><!----><!--[--><button type="button" class="search-pro-button" role="search" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="placeholder">æœç´¢</div><div class="key-hints"><kbd class="key">Ctrl</kbd><kbd class="key">K</kbd></div></button><!--]--><!--[--><!----><!--]--><button type="button" class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->RASA å›å¿†å½•ï¼ˆä¸€ï¼‰ - è‡ªå®šä¹‰ RASA NLU æ¨¡å—</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">Kevin å´å˜‰æ–‡</span></span><span property="author" content="Kevin å´å˜‰æ–‡"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2022-09-25T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 11 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT11M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="page-category-item category7 clickable" role="navigation">çŸ¥è¯†ç¬”è®°</span><meta property="articleSection" content="çŸ¥è¯†ç¬”è®°"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><span class="page-tag-item tag8 clickable" role="navigation">NLP</span><meta property="keywords" content="NLP"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<!----></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/notes/articles/%E7%AC%94%E8%AE%B0rasa1.html#ä¼ ç»Ÿ-nlp-å¯¹è¯æ¡†æ¶" class="router-link-active router-link-exact-active toc-link level2">ä¼ ç»Ÿ NLP å¯¹è¯æ¡†æ¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/notes/articles/%E7%AC%94%E8%AE%B0rasa1.html#rasa-æ¶æ„" class="router-link-active router-link-exact-active toc-link level2">RASA æ¶æ„</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/notes/articles/%E7%AC%94%E8%AE%B0rasa1.html#rasa-è‡ªå®šä¹‰-nlu" class="router-link-active router-link-exact-active toc-link level2">RASA è‡ªå®šä¹‰ NLU</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/notes/articles/%E7%AC%94%E8%AE%B0rasa1.html#ç›®å½•" class="router-link-active router-link-exact-active toc-link level3">ç›®å½•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/notes/articles/%E7%AC%94%E8%AE%B0rasa1.html#ä»£ç ä¸å®è·µ" class="router-link-active router-link-exact-active toc-link level3">ä»£ç ä¸å®è·µ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/notes/articles/%E7%AC%94%E8%AE%B0rasa1.html#è‡ªå®šä¹‰-graphcomponent-for-nlu" class="router-link-active router-link-exact-active toc-link level3">è‡ªå®šä¹‰  GraphComponent (for NLU)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/notes/articles/%E7%AC%94%E8%AE%B0rasa1.html#rasa-nlu-éƒ¨ç½²" class="router-link-active router-link-exact-active toc-link level3">RASA NLU éƒ¨ç½²</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/notes/articles/%E7%AC%94%E8%AE%B0rasa1.html#è¿›ä¸€æ­¥è§£æç»“æœæ¥æº" class="router-link-active router-link-exact-active toc-link level3">è¿›ä¸€æ­¥è§£æç»“æœæ¥æº</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/notes/articles/%E7%AC%94%E8%AE%B0rasa1.html#nlu-æ¨¡å—æ€è€ƒ" class="router-link-active router-link-exact-active toc-link level3">NLU æ¨¡å—æ€è€ƒ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/notes/articles/%E7%AC%94%E8%AE%B0rasa1.html#å°ç»“" class="router-link-active router-link-exact-active toc-link level2">å°ç»“</a></li><!----><!--]--></ul></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><p>RASA æ„Ÿè§‰åƒæ˜¯æ—¶ä»£çš„çœ¼æ³ªäº†ï¼Œè‡ªåŠ¨ LLM ç«äº†ä¹‹åï¼Œç±»ä¼¼ RASA ä¸€ç±»çš„ä¼ ç»Ÿ NLP å¯¹è¯æ¶æ„å˜å¾—å†·é—¨ï¼Œä¸å°‘æŠ€æœ¯ä¼¼ä¹ä¹Ÿè¢«æ‘’å¼ƒã€‚ä½†å¦‚ä»Šä¸å°‘å‚å®¶åœ¨å®ç°å¯¹è¯æœºå™¨äººã€æ™ºèƒ½æœåŠ¡ç­‰ AIGC æœåŠ¡ï¼Œå´ä¹Ÿä¼šç”¨åˆ°è¿™ç±»å‹çš„æ¡†æ¶ã€‚å¸‚é¢ä¸Šæä¾›ç±»ä¼¼ RASA æœåŠ¡çš„ low code å¹³å°ä¹Ÿä¸å°‘ï¼Œå¦‚ Nuance, Omilia, Kore.ai ç­‰ã€‚</p><p>è¯¥ç³»åˆ—æ–‡ç« ä¸»è¦å›´ç»• RASA æºç ï¼Œå¯¹è½åœ°éƒ¨ç½²ä¼ ç»Ÿ NLP å¯¹è¯æ¡†æ¶çš„ç›¸å…³è¯é¢˜å±•å¼€ã€‚æœ¬æ–‡é’ˆå¯¹ RASA è‡ªå®šä¹‰ NLU åŠŸèƒ½å±•å¼€ã€‚</p><p>RASA é»˜è®¤çš„ NLU ç­–ç•¥ä¸æ”¯æŒæ¯”å¦‚ç»†è…»åº¦æƒ…æ„Ÿåˆ†æã€æŒ‡ä»£æ¶ˆè§£ç­‰æ–¹æ¡ˆã€‚é€šè¿‡è‡ªå®šä¹‰ NLU æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥ä»»æ„ NLU æ–¹æ¡ˆï¼Œæ¯”å¦‚æ·»åŠ é¢å¤–çš„å®ä½“é“¾æ¥ã€å®ä½“çº é”™ã€ä¿¡æ¯æŠ½å–æ¨¡å—ã€‚</p><h2 id="ä¼ ç»Ÿ-nlp-å¯¹è¯æ¡†æ¶" tabindex="-1"><a class="header-anchor" href="#ä¼ ç»Ÿ-nlp-å¯¹è¯æ¡†æ¶" aria-hidden="true">#</a> ä¼ ç»Ÿ NLP å¯¹è¯æ¡†æ¶</h2><p>ä»¥ä¸‹æ˜¯ä¸€ç§ä¼ ç»Ÿçš„ NLP å¯¹è¯æ¡†æ¶ï¼Œç”¨æˆ·è¾“å…¥è¯­å¥åï¼Œä¼šç»è¿‡ NLU å’Œ Dialog ä¸¤ä¸ªæ¨¡å—ï¼Œæœ€åå¾—åˆ°å›å¤ã€‚</p><p>NLU æ¨¡å—ï¼š</p><ol start="2"><li>ä½¿ç”¨å„ç§ç®—æ³•å¯¹è¯­å¥è¿›è¡Œ Embeddingï¼Œç„¶åå°†å„ç§ Embedding æ‹¼æ¥ã€‚ï¼ˆæ¯”å¦‚ç”¨ Conv 1D æŠ½å–ä¸Šä¸‹æ–‡æ„æ€ï¼Œå¯¹è¯­å¥ä¸­å•è¯è¿›è¡Œåˆ†è¯åè¿›è¡Œé¢å¤– Embedding ç­‰ï¼‰</li><li>å°†æ‹¼æ¥åçš„ Embedding ä¼ å…¥æ¨¡å‹å½“ä¸­ï¼Œå¦‚ LSTMï¼ŒTransformer ç­‰ï¼Œå¾—åˆ° hidden state</li><li>å°† hidden state é“¾æ¥ä¸åŒçš„ output layer è¿›è¡Œä¸åŒ NLU ä»»åŠ¡çš„è§£æã€‚æ¯”å¦‚é“¾æ¥ linear layer åšå¤šåˆ†ç±»æˆ–å®ä½“è¯†åˆ«ï¼Œé“¾æ¥ pointer Network åšå…³ç³»æŠ½å–ç­‰ç­‰ã€‚</li><li>å°†æ‰€æœ‰æ„å›¾æ•´ç†åœ¨å¯¹è¯çŠ¶æ€ä¸­ï¼Œä¼ å…¥ç»™ dialog æ¨¡å—ã€‚</li></ol><p>å¯¹è¯æ¨¡å—ï¼ˆdialog æ¨¡å—ï¼‰</p><ol><li>é‡‡ç”¨ rule baseï¼šæå‰è®¾è®¡å¥½ç”¨æˆ·æ•…äº‹çº¿ï¼Œä»¥ä¹°å’–å•¡ä¸ºä¾‹ï¼›é‚£ä¹ˆæˆ‘ä»¬éœ€è¦ç”¨æ¡ä»¶è¯­å¥ï¼Œåˆ†åˆ«ä»ç”¨æˆ·é‚£è¾¹é—®é“å’–å•¡çš„å¤§å°ã€ç”œåº¦ã€åŠ å†°ä¸å¦ã€æ‰“åŒ…è¿˜æ˜¯å ‚é£Ÿç­‰ä¿¡æ¯ï¼ˆç±»ä¼¼æ§½ä½å¡«å……ï¼‰ã€‚åœ¨è·å¾—æ‰€æœ‰ä¿¡æ¯ä¹‹åï¼Œå¯¹ç”¨æˆ·çš„å’–å•¡è¿›è¡Œä¸‹å•ã€‚</li><li>é‡‡ç”¨å…¶ä»–æ–¹å¼ï¼šä½¿ç”¨ rule base çš„é—®é¢˜åœ¨äºï¼Œæˆ‘ä»¬éœ€è¦å¤šæ‰€æœ‰çš„åœºæ™¯è¿›è¡Œè§„åˆ™æ„å»ºï¼Œå½“ç”¨æˆ·é—®ä¸€ç‚¹ç‚¹è§„åˆ™ä»¥å¤–çš„å†…å®¹æ—¶ï¼Œè¿™ä¸ªå¯¹è¯ session å¯èƒ½ä¼šè¢«å½±å“ï¼Œç”šè‡³æ‰“ä¹±ã€‚å› æ­¤æœ‰ä¸å°‘é’ˆå¯¹å¤šè½®å¯¹è¯çš„ä¼ ç»Ÿç­–ç•¥æå‡ºï¼Œæ¯”å¦‚å°†å¯¹è¯çŠ¶æ€ç¼–ç ï¼Œä¸ç”¨æˆ·è¾“å…¥çš„ hidden state ä¸€èµ·ç”Ÿæˆå›å¤ç­‰ï¼›æˆ–å°†ç”¨æˆ·è¾“å…¥ä¸æœºå™¨äººçš„ä¸€äº›å€™é€‰å†³ç­–è¿›è¡Œç›¸å…³æ€§åŒ¹é…ï¼ˆRASA çš„ Action ç­–ç•¥ï¼‰ã€‚</li></ol><h2 id="rasa-æ¶æ„" tabindex="-1"><a class="header-anchor" href="#rasa-æ¶æ„" aria-hidden="true">#</a> RASA æ¶æ„</h2><p>RASA çš„æ¶æ„åˆ†æˆ nlu æ¨¡å—å’Œ core æ¨¡å—ã€‚</p><p>Core æ¨¡å—ï¼ˆå³ä¸Šæ–‡ä¸­çš„ dialog æ¨¡å—ï¼‰éœ€è¦çš„æ“ä½œæœ‰ï¼š</p><ol><li>å†™ Ruleï¼šå®šä¹‰å¦‚ä¸Šæ–‡ä¸­æåˆ°çš„åŸºäºè§„åˆ™çš„å¯¹è¯é€»è¾‘</li><li>å†™æ•…äº‹ï¼š <ul><li>å®šä¹‰æœºå™¨äººçš„ Actionï¼Œæ¯”å¦‚æœºå™¨äººå¯èƒ½ä¼šå‘é€é‚®ä»¶ï¼Œæˆ–è€…ä¸ºå®¢æˆ·ä¸‹å•ä¸€ä¸ªå’–å•¡ï¼Œæˆ–è€…è®©å®¢æˆ·ä»˜æ¬¾ã€‚</li><li>å‡†å¤‡ä¸€äº›å¤šè½®å¯¹è¯æ•°æ®é›†ä½œä¸ºè®­ç»ƒé›†ï¼Œç”¨äºè®­ç»ƒæ¨¡å‹çš„å¯¹è¯èƒ½åŠ›ã€‚æ¯”å¦‚è®­ç»ƒé›†ä¸­ä¼šåŒ…å«æœ‰ç”¨æˆ·æé—®ä»¥åŠæœºå™¨äººé‡‡å–çš„å¯¹åº” Action ä¿¡æ¯ã€‚æ¨¡å‹å°±ä¼šæ ¹æ®è¿™éƒ¨åˆ†ä¿¡æ¯ï¼Œè®­ç»ƒä¸€ä¸ª Action å’Œ Query åŒ¹é…å™¨ã€‚</li></ul></li></ol><p>NLU éœ€è¦çš„æ“ä½œæœ‰ï¼š</p><ol><li>å‡†å¤‡è®­ç»ƒé›†ï¼šå¡«å†™ä½ è¦è®­ç»ƒçš„ intentï¼Œentity ç­‰ä¿¡æ¯ã€‚äººå·¥å‡†å¤‡ä¸€äº›è¯­æ–™å¹¶é’ˆå¯¹ä¸åŒä»»åŠ¡è¿›è¡Œæ‰“æ ‡ç­¾ã€‚</li><li>é…ç½® NLU æµç¨‹ï¼šé€‰æ‹©ä½ è¦è¿›è¡Œçš„ NLU æµç¨‹ï¼Œæ¯”å¦‚ä½ å¸Œæœ›ç”¨å“ªäº› Embedding è¿›è¡Œæ‹¼æ¥ã€‚è€Œåé‡‡ç”¨é‚£ä¸ªæ¨¡å‹æ¶æ„å¯¹æ‹¼æ¥åçš„ Embedding è¿›è¡Œè§£æï¼Œå¾—åˆ° hidden stateã€‚æœ€åç”¨å“ªäº›è§£æå™¨æ¥è®² hidden state è½¬æ¢ä¸ºè¾“å‡ºç»“æœã€‚</li><li>è®­ç»ƒæ¨¡å‹ï¼šRASA æä¾›äº†ä¸€é”®è®­ç»ƒï¼Œè®­ç»ƒé€Ÿåº¦å’Œé…ç½®å–å†³äºä½ é€‰æ‹©çš„ NLU é…ç½®ã€‚</li></ol><p>å½“ç„¶å¦‚ä½•é…ç½® RASA NLUï¼Œå¯å‚è€ƒå®˜æ–¹ç»™å‡ºçš„è¯¦ç»†æ–‡æ¡£ã€‚ä»¥ä¸‹é’ˆå¯¹è‡ªå®šä¹‰ RASA NLU æ¨¡å—åšä»‹ç»ã€‚</p><h2 id="rasa-è‡ªå®šä¹‰-nlu" tabindex="-1"><a class="header-anchor" href="#rasa-è‡ªå®šä¹‰-nlu" aria-hidden="true">#</a> RASA è‡ªå®šä¹‰ NLU</h2><h3 id="ç›®å½•" tabindex="-1"><a class="header-anchor" href="#ç›®å½•" aria-hidden="true">#</a> ç›®å½•</h3><p>è¯¥èŠ‚å±•ç¤ºäº†</p><ol><li>å¦‚ä½•ä½¿ç”¨ Huggingface ä¸Šçš„æ¨¡å‹ï¼Œä½œä¸º RASA çš„ embedding å·¥å…·ã€‚ï¼ˆé»˜è®¤ RASA é‡‡ç”¨ TF æ¨¡å‹ï¼‰</li><li>å¦‚ä½•æ·»åŠ ä¸€ä¸ªæƒ…æ„Ÿåˆ†æå¼•æ“ï¼ˆè¿™åœ¨ RASA ä¸­æ˜¯æ²¡æœ‰çš„ï¼‰ã€‚</li></ol><p>é€šè¿‡è¿™ä¸ªå±•ç¤ºï¼Œæˆ‘ä»¬èƒ½å¤Ÿå»¶ç”³åˆ°ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ol><li>å‚è€ƒè¿™ä¸ªä»£ç ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå®ç°ä½¿ç”¨ä»»ä½•å½¢å¼çš„æ¨¡å‹ä½œä¸ºæˆ‘ä»¬çš„ Feature/Embedding å·¥å…·ï¼Œæ¯”å¦‚ paddle, onnx ç­‰ã€‚</li><li>å½“ RASA é»˜è®¤çš„è®­ç»ƒæ•ˆæœä¸å¥½æ—¶ï¼Œä½ åº”è¯¥æ„è¯†åˆ° RASA çš„è‡ªå¸¦ Featurizer å­˜åœ¨å¾ˆå¤§é—®é¢˜ï¼šä»–ä¸èƒ½å¤Ÿè¢«è®­ç»ƒã€‚</li><li>RASA é»˜è®¤ä½¿ç”¨ CLS ä½ç½®çš„ feature ä½œä¸º sentence embedding è¿›è¡Œåˆ†ç±»ï¼Œè€Œå…¶ä»–ä½ç½®çš„ feature ä½œä¸º sequence embedding è¿›è¡Œ NER ç­‰ä»»åŠ¡ã€‚ <strong>å¤§éƒ¨åˆ†çš„ Transformer ä½¿ç”¨äº† SUB-TOKEN çš„åˆ†è¯æ–¹å¼ï¼Œè€Œ RASA é»˜è®¤çš„ NER æ–¹å¼æ—¶å°† subtoken å¯¹åº”çš„ embedding ç»“åˆï¼Œä½œä¸ºå®Œæˆ token çš„ embeddingã€‚</strong></li><li>çŒœæµ‹ï¼šåœ¨ featurizer ä¸­ï¼Œæ²¡æœ‰è¾“å‡ºä»»ä½•å®Œæ•´ token ä¿¡æ¯ï¼Œä¼°è®¡åœ¨ NER ç¯èŠ‚ä½¿ç”¨çš„ token ä¿¡æ¯ï¼Œæ˜¯ä» Tokenizer ä¼ è¿‡å»çš„ï¼Œå› æ­¤å¦‚æœ Featurizer è¾“å‡º feature ç»´åº¦å’Œ Tokenizer å¯¹åº”ä¸ä¸Šï¼Œå°±ä¼šæŠ¥é”™ã€‚</li><li>RASA è®­ç»ƒç­–ç•¥æ¯”è¾ƒå•è°ƒï¼Œå¦‚æœä½ äº«å—è°ƒå‚ç­‰è‡ªå®šä¹‰æ¨¡å‹è®­ç»ƒæ–¹æ³•ã€‚å¯ä»¥åœ¨è‡ªå·±æœºå™¨ä¸Šè®­ç»ƒå¥½æƒé‡ï¼Œç„¶åæŠŠä»–æ”¾åœ¨ RASA ä¸­ç›´æ¥ç”¨ï¼Œè¿™å°†å¤§å¤§å‡å°‘æ¨¡å‹è®­ç»ƒæ—¶é—´ã€‚æœ€åé€šè¿‡è‡ªå®šä¹‰ Component é›†æˆåˆ° RASA ä¸­ã€‚</li><li>æˆ‘ä»¬èƒ½å¤Ÿåœ¨ RASA NLU çš„åŸºæœ¬åŠŸèƒ½ï¼ˆIntentï¼ŒNERï¼‰ä¸Šï¼Œæ·»åŠ ä¸Šä»»æ„çš„ NLU å¤„ç†ç»“æœï¼Œæ¯”å¦‚æ·»åŠ é¢å¤–çš„ç»†è…»åº¦æƒ…æ„Ÿåˆ†æç»“æœã€æ·»åŠ é¢å¤–çš„å®ä½“é“¾æ¥ã€å®ä½“çº é”™ã€ä¿¡æ¯æŠ½å–ç»“æœã€‚</li></ol><h3 id="ä»£ç ä¸å®è·µ" tabindex="-1"><a class="header-anchor" href="#ä»£ç ä¸å®è·µ" aria-hidden="true">#</a> ä»£ç ä¸å®è·µ</h3><p>https://github.com/kevinng77/rasa_example/tree/master/examples/2_custom_clu</p><h4 id="rasa-é…ç½®æ–‡ä»¶-config-py-ä¸­çš„-pipeline" tabindex="-1"><a class="header-anchor" href="#rasa-é…ç½®æ–‡ä»¶-config-py-ä¸­çš„-pipeline" aria-hidden="true">#</a> RASA é…ç½®æ–‡ä»¶ Config.py ä¸­çš„ Pipeline</h4><p>Pipeline ç”±å¤šä¸ª RASA GraphComponent ç»„æˆï¼Œå½“ç”¨æˆ·å‘å‡ºæ¶ˆæ¯åï¼Œæ¶ˆæ¯ä¼š <strong>ä¾æ¬¡</strong> ç»è¿‡ Pipeline çš„æ¯ä¸€ä¸ª GraphComponent å¤„ç†ï¼Œä»¥å®Œæˆ NLUã€‚æ¯”å¦‚ä¸€ä¸‹æ˜¯ä¸€ä¸ªç»å…¸çš„ Pipeline å†™æ³•ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>pipeline:
  - name: &quot;WhitespaceTokenizer&quot;  
  - name: &quot;CountVectorsFeaturizer&quot;
  - name: &quot;DIETClassifier&quot;
    epochs: 100
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ä¸Šé¢çš„ Pipeline ä¸ºä¾‹ï¼Œrasa è¿›è¡Œ nlu çš„æ—¶å€™ï¼Œä¼šä»ä¸Šåˆ°ä¸‹è¿›è¡Œæ¯ä¸€ä¸ª GraphComponentã€‚</p><p>å¦‚æœç”¨ä¼ªä»£ç æ¥è¡¨ç¤ºè¿™ä¸ªæµç¨‹ï¼Œå°±æ˜¯ï¼š</p><div class="language-PYTHON line-numbers-mode" data-ext="PYTHON"><pre class="language-PYTHON"><code># æ¯•ç«Ÿæ˜¯ä¼ªä»£ç ï¼Œå› æ­¤é€»è¾‘ä¸ä¼šå¾ˆä¸¥è°¨
message = parse_user_input
# message ä¸ºæ•°æ®ç»“æ„ï¼Œåœ¨ `rasa.shared.nlu.training_data.message` å¯æŸ¥çœ‹ã€‚
for GraphComponent in pipeline.name:
    message = GraphComponent.process(message)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¯ä¸ª Component å¯ä»¥åœ¨ <code>rasa.rasa.nlu</code> æ–‡ä»¶å¤¹ä¸‹é¢æ‰¾åˆ°ï¼Œå¦‚ <code>WhitespaceTokenizer</code> å¯¹åº” <code>rasa.rasa.nlu.tokenizer.whitespace_tokenizer.WhitespaceTokenizer</code>ã€‚</p><h3 id="è‡ªå®šä¹‰-graphcomponent-for-nlu" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰-graphcomponent-for-nlu" aria-hidden="true">#</a> è‡ªå®šä¹‰ GraphComponent (for NLU)</h3><p>ä½¿ç”¨è‡ªå®šä¹‰ NLU GraphComponent éœ€è¦ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ol><li><p>å†™ä¸€ä¸ª <code>.py</code> æ–‡ä»¶ï¼Œé‡Œé¢å®šä¹‰å¥½ä½ è¦çš„ <code>GraphComponent</code>ã€‚æœ¬æ¡ˆä¾‹ä¸­çš„è‡ªå®šä¹‰ GraphComponent éƒ½å†™åœ¨ Component æ–‡ä»¶å¤¹ä¸‹é¢äº†ã€‚</p></li><li><p>åœ¨ Pipeline ä¸­å¼•ç”¨å¯¹åº”çš„ <code>GraphComponent</code></p></li></ol><h4 id="_1-å®šä¹‰-custom-graphcomponent" tabindex="-1"><a class="header-anchor" href="#_1-å®šä¹‰-custom-graphcomponent" aria-hidden="true">#</a> 1. å®šä¹‰ Custom GraphComponent</h4><p>åœ¨ <code>rasa.data.test_classes</code> ä¸­ï¼Œæˆ‘ä»¬èƒ½å¤Ÿçœ‹åˆ°ä¸€äº›å®˜æ–¹æä¾›çš„ <code>GraphComponent</code> è‡ªå®šä¹‰æ–¹æ³•å’Œæ¨¡æ¿ã€‚å¦‚ <code>nlu_component_skeleton.py</code>ã€‚ä»ä¸‹é¢çš„ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼ŒGraphComponent ä¸»è¦çš„å…¥å£å°±æ˜¯ <code>create</code>, <code>train</code>, <code>process</code>, <code>process_training_data</code> å››ä¸ªæ–¹æ³•ã€‚</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token decorator annotation punctuation">@DefaultV1Recipe<span class="token punctuation">.</span>register</span><span class="token punctuation">(</span>
    <span class="token punctuation">[</span>DefaultV1Recipe<span class="token punctuation">.</span>ComponentType<span class="token punctuation">.</span>INTENT_CLASSIFIER<span class="token punctuation">]</span><span class="token punctuation">,</span> is_trainable<span class="token operator">=</span><span class="token boolean">True</span>
<span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">CustomNLUComponent</span><span class="token punctuation">(</span>GraphComponent<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token decorator annotation punctuation">@classmethod</span>
    <span class="token keyword">def</span> <span class="token function">create</span><span class="token punctuation">(</span>
        cls<span class="token punctuation">,</span>
        config<span class="token punctuation">:</span> Dict<span class="token punctuation">[</span>Text<span class="token punctuation">,</span> Any<span class="token punctuation">]</span><span class="token punctuation">,</span>
        model_storage<span class="token punctuation">:</span> ModelStorage<span class="token punctuation">,</span>
        resource<span class="token punctuation">:</span> Resource<span class="token punctuation">,</span>
        execution_context<span class="token punctuation">:</span> ExecutionContext<span class="token punctuation">,</span>
    <span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> GraphComponent<span class="token punctuation">:</span>
        <span class="token comment"># TODO: Implement this</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token keyword">def</span> <span class="token function">train</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> training_data<span class="token punctuation">:</span> TrainingData<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> Resource<span class="token punctuation">:</span>
        <span class="token comment"># TODO: Implement this if your component requires training</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token keyword">def</span> <span class="token function">process_training_data</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> training_data<span class="token punctuation">:</span> TrainingData<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> TrainingData<span class="token punctuation">:</span>
        <span class="token comment"># TODO: Implement this if your component augments the training data with</span>
        <span class="token comment">#       tokens or message features which are used by other components</span>
        <span class="token comment">#       during training.</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

        <span class="token keyword">return</span> training_data

    <span class="token keyword">def</span> <span class="token function">process</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> messages<span class="token punctuation">:</span> List<span class="token punctuation">[</span>Message<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> List<span class="token punctuation">[</span>Message<span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token comment"># TODO: This is the method which Rasa Open Source will call during inference.</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token keyword">return</span> messages
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› æ­¤è‡ªå®šä¹‰çš„ <code>GraphComponent</code> ä¸­ï¼Œå¿…é¡»è¦†ç›–é‡å†™ä»¥ä¸Šå››ä¸ªæ–¹æ³•ã€‚æˆ‘ä»¬æ ¹æ® <code>rasa.rasa.nlu</code> ä¸­çš„æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œå°è¯•ä½¿ç”¨ pytorch çš„æ¨¡å‹æ¥è®¡ç®—æ¨¡å‹çš„ embeddingã€‚å¤§è‡´æ–¹æ³•æ˜¯ç»§æ‰¿ <code>rasa.nlu.featurizers.dense_featurizer.dense_featurizer</code> ä¸­çš„ <code>DenseFeaturizer</code> æŠ½è±¡ç±»ï¼Œ</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token decorator annotation punctuation">@DefaultV1Recipe<span class="token punctuation">.</span>register</span><span class="token punctuation">(</span>
    DefaultV1Recipe<span class="token punctuation">.</span>ComponentType<span class="token punctuation">.</span>MESSAGE_FEATURIZER<span class="token punctuation">,</span> is_trainable<span class="token operator">=</span><span class="token boolean">False</span>
<span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">LanguageModelFeaturizer</span><span class="token punctuation">(</span>DenseFeaturizer<span class="token punctuation">,</span> GraphComponent<span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token comment">#...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…·ä½“æŸ¥çœ‹è¯¥æ–‡ä»¶å¤¹ä¸‹çš„ <code>components/myintent.py</code>ã€‚æ¯”è¾ƒå€¼å¾—æ³¨æ„çš„ç‚¹æ˜¯ï¼š <strong>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„ Featurizer éƒ½æ˜¯ä¸èƒ½è¢« train çš„</strong> ï¼ŒåŒ…æ‹¬ RASA è‡ªå¸¦çš„ TF transformersã€‚è€Œæˆ‘ä»¬çŸ¥é“ï¼ŒTransformer ç³»åˆ—å°æ¨¡å‹åœ¨ä¸å¾®è°ƒçš„æƒ…å†µä¸‹ï¼Œæ•ˆæœæ˜¯ä¸æ€ä¹ˆå¥½çš„ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥è€ƒè™‘ï¼Œ</p><ol><li>å°† Featurizer å’Œ Intent Classifier åˆå¹¶æˆä¸€ä¸ª Compoentï¼Œè€Œåç»Ÿä¸€åœ¨ RASA ä¸­è®­ç»ƒã€‚</li><li>æˆ–è€…é€‰ä¸ªé¢†åŸŸé¢„è®­ç»ƒ+å¾®è°ƒå¥½çš„ embedding transformer</li><li>å…¶ä»–éªšæ“ä½œ</li></ol><h4 id="_2-pipeline-ä¸­å¼•ç”¨è‡ªå®šä¹‰æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#_2-pipeline-ä¸­å¼•ç”¨è‡ªå®šä¹‰æ¨¡å—" aria-hidden="true">#</a> 2. Pipeline ä¸­å¼•ç”¨è‡ªå®šä¹‰æ¨¡å—</h4><p>æˆ‘ä»¬å°†åŸå…ˆçš„è¯è¢‹æ¨¡å‹æ›¿æ¢ä¸ºæˆ‘ä»¬è‡ªå®šä¹‰çš„æ¨¡å‹ <code>components.myintent.LanguageModelFeaturizer</code>ï¼Œ å¹¶ä½¿ç”¨ huggingface ä¸Šçš„æƒé‡<code>kevinng77/TinyBERT_4L_312D_SIMCSE_finetune</code>ï¼Œè¿™ä¾¿æ˜¯è‡ªå®šä¹‰æ¨¡å‹çš„å¥½å¤„ä¹‹ä¸€ï¼šè¿™æ˜¯ä¸€ä¸ªåœ¨ä¸ªäºº GPU ä¸Šè’¸é¦å¥½çš„æ¨¡å‹ï¼Œé€Ÿåº¦æ¯”æ ‡å‡† bert å¿« 20+å€ï¼Œä¸”åœ¨ NLI æ•°æ®é›†ä¸Šçš„ç²¾åº¦ï¼ˆè¾ƒ SIMCSEï¼‰ä¿ç•™äº† 98%ã€‚æˆ‘ä»¬èƒ½å¤Ÿè¿›ä¸€æ­¥å¯¹ä»–è¿›è¡Œé‡åŒ–ã€æ£€ç´¢ã€æ¨ç†éƒ¨ç½²ç­‰ï¼Œä»¥è¿›ä¸€æ­¥æé«˜é¢„æµ‹é€Ÿåº¦ã€‚</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>pipeline<span class="token punctuation">:</span>
  <span class="token operator">-</span> name<span class="token punctuation">:</span> <span class="token string">&quot;WhitespaceTokenizer&quot;</span>
  <span class="token operator">-</span> name<span class="token punctuation">:</span> components<span class="token punctuation">.</span>myintent<span class="token punctuation">.</span>LanguageModelFeaturizer
    model_name<span class="token punctuation">:</span> kevinng77<span class="token operator">/</span>TinyBERT_4L_312D_SIMCSE_finetune 
  <span class="token operator">-</span> name<span class="token punctuation">:</span> <span class="token string">&quot;DIETClassifier&quot;</span>
    epochs<span class="token punctuation">:</span> <span class="token number">100</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-æˆ‘ä»¬æ·»åŠ é¢å¤–çš„æƒ…æ„Ÿåˆ†ææ¨¡å—-ä»ç”¨æˆ·å›ç­”ä¸­æå–æ›´å¤šä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#_3-æˆ‘ä»¬æ·»åŠ é¢å¤–çš„æƒ…æ„Ÿåˆ†ææ¨¡å—-ä»ç”¨æˆ·å›ç­”ä¸­æå–æ›´å¤šä¿¡æ¯" aria-hidden="true">#</a> 3. æˆ‘ä»¬æ·»åŠ é¢å¤–çš„æƒ…æ„Ÿåˆ†ææ¨¡å—ï¼Œä»ç”¨æˆ·å›ç­”ä¸­æå–æ›´å¤šä¿¡æ¯</h4><p>æ ¹æ® <code>rasa.nlu</code> ä¸‹çš„ä»£ç ï¼Œå¤§è‡´å¯ä»¥çŒœæµ‹åˆ°ï¼Œæ•´ä¸ª Pipeline çš„ NLU è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰çš„ç»“æœéƒ½ä¼šè¢«è®°å½•åœ¨ <code>Message</code> ä¸Šã€‚</p><p>å› æ­¤å¦‚æœæˆ‘ä»¬æƒ³è¦æ·»åŠ é¢å¤–çš„ nlu ä¿¡æ¯ï¼Œå¦‚å®ä½“é—´å…³ç³»ã€ç»†è…»åº¦æƒ…æ„Ÿåˆ†æã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬å°±å¯ä»¥è‡ªå®šä¹‰ <code>Component</code> æ¨¡å—ï¼Œè€Œåé€šè¿‡ <code>process()</code> å‡½æ•°ï¼Œå°† NLU å¤„ç†çš„ç»“æœæ·»åŠ åˆ° <code>Message</code> ä¸­å°±è¡Œã€‚<code>Message</code> ä¸­æœ‰ <code>data</code> å­—å…¸ï¼Œå¯ä»¥ç”¨æ¥å‚¨å­˜å…¶ä»–ç‰¹å¾ä¿¡æ¯ã€‚</p><p>æ¯”å¦‚è¯´ï¼Œæˆ‘æƒ³è¦åœ¨ intent åˆ†æå’Œ NER åˆ†æçš„åŸºç¡€ä¸Šï¼ŒåŠ ä¸Šä¸€å±‚æƒ…æ„Ÿåˆ†æï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">pipeline</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;WhitespaceTokenizer&quot;</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> components.myintent.LanguageModelFeaturizer
    <span class="token key atrule">model_name</span><span class="token punctuation">:</span> distilbert
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> components.sentiment_classifier.SentimentClassifier
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;DIETClassifier&quot;</span>
    <span class="token key atrule">epochs</span><span class="token punctuation">:</span> <span class="token number">50</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ <code>components.sentiment_classifier.SentimentClassifier</code> ä¸­ï¼Œæˆ‘ä»¬æä¾›ä»¥ä¸‹æ–¹æ³•ï¼ˆå…·ä½“å¯æŸ¥çœ‹æ–‡ä»¶å¤¹ä¸­ä»£ç ï¼‰ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token decorator annotation punctuation">@DefaultV1Recipe<span class="token punctuation">.</span>register</span><span class="token punctuation">(</span>
    DefaultV1Recipe<span class="token punctuation">.</span>ComponentType<span class="token punctuation">.</span>INTENT_CLASSIFIER<span class="token punctuation">,</span> is_trainable<span class="token operator">=</span><span class="token boolean">False</span>
<span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">SentimentClassifier</span><span class="token punctuation">(</span>GraphComponent<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;Intent classifier using the Logistic Regression.&quot;&quot;&quot;</span>
    
    <span class="token comment"># ...</span>
    
	<span class="token keyword">def</span> <span class="token function">process</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> messages<span class="token punctuation">:</span> List<span class="token punctuation">[</span>Message<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> List<span class="token punctuation">[</span>Message<span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;Return the most likely intent and its probability for a message.&quot;&quot;&quot;</span>

        <span class="token keyword">for</span> idx<span class="token punctuation">,</span> message <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>messages<span class="token punctuation">)</span><span class="token punctuation">:</span>
            sentiment<span class="token punctuation">,</span> score <span class="token operator">=</span> <span class="token string">&quot;Positive&quot;</span><span class="token punctuation">,</span> <span class="token number">0.666</span>  <span class="token comment"># this should come from your model</span>
            message<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">&quot;sentiment&quot;</span><span class="token punctuation">,</span> sentiment<span class="token punctuation">,</span> add_to_output<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
            message<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">&quot;sentiment_confidence&quot;</span><span class="token punctuation">,</span> score<span class="token punctuation">,</span> add_to_output<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> messages
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£ä¹ˆåœ¨è¾“å‡ºç»“æœä¸­ï¼Œæˆ‘ä»¬å°±èƒ½çœ‹åˆ° <code>Message.data</code> ä¸­ï¼Œå¤šäº†æƒ…æ„Ÿåˆ†æçš„ç»“æœï¼Œæ‰§è¡Œä»¥ä¸‹è¯­å¥è¿›è¡Œæµ‹è¯• ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>rasa train nlu
rasa shell
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å…¥ <code>hello world</code>ï¼Œç³»ç»Ÿå›å¤å†…å®¹ä¸­ï¼Œå°±ä¼šå¤šå‡ºæ¥ <code>sentiment</code> å’Œ <code>sentiment_confidence</code> ä¸¤ä¸ªå­—æ®µäº†ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>NLU model loaded. Type a message and press enter to parse it.
Next message:
hello world
<span class="token punctuation">{</span>
  <span class="token string">&quot;text&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;hello world&quot;</span>,
  <span class="token string">&quot;intent&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;greet&quot;</span>,
    <span class="token string">&quot;confidence&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0.4089217782020569</span>
  <span class="token punctuation">}</span>,
  <span class="token string">&quot;entities&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>,
  <span class="token string">&quot;text_tokens&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token number">0</span>,
      <span class="token number">5</span>
    <span class="token punctuation">]</span>,
   <span class="token comment"># ...</span>
  <span class="token punctuation">]</span>,
  <span class="token string">&quot;sentiment&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;Positive&quot;</span>,
  <span class="token string">&quot;sentiment_confidence&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0.666</span>,
  <span class="token string">&quot;intent_ranking&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;greet&quot;</span>,
      <span class="token string">&quot;confidence&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0.4089217782020569</span>
    <span class="token punctuation">}</span>,
	<span class="token comment">#...</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="rasa-nlu-éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#rasa-nlu-éƒ¨ç½²" aria-hidden="true">#</a> RASA NLU éƒ¨ç½²</h3><p>é»˜è®¤ RASA NLU æ˜¯å•ç‹¬éƒ¨ç½²æˆä¸€ä¸ª API çš„ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥è®²å®ç°å¥½çš„è‡ªå®šä¹‰ NLU æ¨¡å—éƒ¨ç½²æˆ APIï¼Œè€Œåè¿›è¡Œæµ‹è¯•ã€‚é¦–å…ˆè¿è¡ŒæœåŠ¡ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>rasa run --enable-api
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å‘é€ POST è¯·æ±‚åˆ° <code>http://localhost:5005/model/parse</code>ï¼Œ body ä¸­ä¸ºï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;what restaurants do you recomment?&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sender&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test_user&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>RASA è¿”å› Message ç»“æœã€‚è€Œ Message æ¶æ„å¦‚ä¸‹ï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token comment">// request è¿”å›çš„ç»“æœ</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;what restaurants do you recomment?&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// ç”¨æˆ· query</span>
  <span class="token property">&quot;intent&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;query_knowledge_base&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;confidence&quot;</span><span class="token operator">:</span> <span class="token number">1.0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">// æœ€ç»ˆåˆ¤æ–­æ„å›¾</span>
  <span class="token property">&quot;entities&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// æ‰€æœ‰å®ä½“æŠ½å–çš„ç»“æœ</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;entity&quot;</span><span class="token operator">:</span> <span class="token string">&quot;object_type&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end&quot;</span><span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
      <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;restaurants&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;extractor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;RegexEntityExtractor&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;entity&quot;</span><span class="token operator">:</span> <span class="token string">&quot;object_type&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end&quot;</span><span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
      <span class="token property">&quot;confidence_entity&quot;</span><span class="token operator">:</span> <span class="token number">0.9987316727638245</span><span class="token punctuation">,</span>
      <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;restaurants&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;extractor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DIETClassifier&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;text_tokens&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// ... æ‰€æœ‰ token å¯¹åº”çš„ idx</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;intent_ranking&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;query_knowledge_base&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;confidence&quot;</span><span class="token operator">:</span> <span class="token number">1.0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;greet&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;confidence&quot;</span><span class="token operator">:</span> <span class="token number">4.942866560497805e-9</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä»–çš„ API æœåŠ¡æ¥å£å¯ä»¥åœ¨ <a href="https://rasa.com/docs/rasa/pages/http-api" target="_blank" rel="noopener noreferrer">RASA API<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æŸ¥çœ‹ã€‚</p><h3 id="è¿›ä¸€æ­¥è§£æç»“æœæ¥æº" tabindex="-1"><a class="header-anchor" href="#è¿›ä¸€æ­¥è§£æç»“æœæ¥æº" aria-hidden="true">#</a> è¿›ä¸€æ­¥è§£æç»“æœæ¥æº</h3><p>åœ¨ <code>rasa.server.create_app</code> ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ° NLU api çš„å…¥å£ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>post</span><span class="token punctuation">(</span><span class="token string">&quot;/model/parse&quot;</span><span class="token punctuation">)</span>
<span class="token decorator annotation punctuation">@requires_auth</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> auth_token<span class="token punctuation">)</span>
<span class="token decorator annotation punctuation">@ensure_loaded_agent</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>request<span class="token punctuation">:</span> Request<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> HTTPResponse<span class="token punctuation">:</span>
    <span class="token comment"># NLU å¤„ç†</span>
    <span class="token keyword">return</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span>response_data<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä¸­çš„ NLU å¤„ç†æµç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>rasa.rasa.core.agent.Agent.parse_message</code> æŸ¥çœ‹åˆ°ã€‚</p><p>åœ¨ä¸Šä¸€ä¸ªä»“åº“<code>2-custom_nlu</code> ä¸­ï¼Œæˆ‘ä»¬æåˆ°äº† RASA nlu çš„æ‰§è¡Œå•å…ƒ <code>GraphComponent</code> å¯ä»¥åœ¨ <code>rasa/rasa/nlu</code> ï¼Œå¦‚æœä½ å®šä¹‰äº†è¿™æ ·ä¸€ä¸ª Pipelineï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">pipeline</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;WhitespaceTokenizer&quot;</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;CountVectorsFeaturizer&quot;</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;CountVectorsFeaturizer&quot;</span>
    <span class="token key atrule">analyzer</span><span class="token punctuation">:</span> <span class="token string">&quot;char_wb&quot;</span>
    <span class="token key atrule">min_ngram</span><span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token key atrule">max_ngram</span><span class="token punctuation">:</span> <span class="token number">4</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> RegexEntityExtractor
    <span class="token key atrule">use_regexes</span><span class="token punctuation">:</span> <span class="token boolean important">True</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> components.diet_cls.DIETClassifier
    <span class="token key atrule">epochs</span><span class="token punctuation">:</span> <span class="token number">100</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£ä¹ˆï¼ŒNLU å¤„ç†çš„è¿‡ç¨‹å¤§æ¦‚å°±æ˜¯ï¼š</p><ol><li><p>é€šè¿‡<code>rasa/nlu/emulators</code> é¢„å¤„ç†è¯·æ±‚ï¼ˆå¯æŸ¥çœ‹ <code>emulators.normalise_request_json</code>æ–¹æ³•ï¼‰ã€‚</p></li><li><p>åœ¨ <code>rasa/core/processor</code> ä¸­å°†æ–‡æœ¬ä¿¡æ¯åŒ…è£…åˆ° <code>Message</code> ä¸­ã€‚æ­¤æ—¶çš„ <code>Message</code> ä»…åŒ…æ‹¬ <code>text</code> ç­‰åŸºç¡€å­—æ®µ</p></li><li><p>é€šè¿‡ <code>rasa/nlu/tokneizers/whitespace_tokenizer</code> ä¸­ <code>WhitespaceTokenizer.tokenize()</code> å¾€ <code>Message</code> ä¸­æ·»åŠ  <code>text_tokens</code> ç»“æœå’Œå­—æ®µã€‚</p></li><li><p>é€šè¿‡ <code>rasa/nlu/featurizers/sparse_featurizer/count_vectors_featurizer.py</code> ä¸­ <code>CountVectorsFeaturizer.process()</code> ï¼Œå¾€ <code>Message.features</code> ä¸­æ·»åŠ  <code>features</code> å†…å®¹ã€‚ï¼ˆ<code>Message.features</code> ä¸­çš„æ‰€æœ‰å†…å®¹ä»…è¢«ç”¨äºè¾…åŠ© å…¶ä»– NLU ç¯èŠ‚å¤„ç†ï¼Œä¸ä¼šè¢«å½“æˆæœ€ç»ˆç»“æœè¿”å›ï¼‰</p><blockquote><p>å¦‚æœæœ‰å¤šä¸ª <code>featurizer</code>ï¼Œé‚£ä¹ˆä»–ä»¬çš„è¾“å‡ºå°†ä¼šè¢«ç»Ÿä¸€å‚¨å­˜åœ¨ <code>Message.features</code> åˆ—è¡¨ä¸­ã€‚</p></blockquote></li><li><p>é€šè¿‡ <code>rasa/nlu/extractors/regex_entity_extractor.py</code> ä¸­çš„ <code>RegexEntityExtractor.process()</code>ï¼Œå¾€ <code>Message</code> ä¸­æ·»åŠ  <code>entities</code> ç»“æœå’Œå­—æ®µã€‚</p></li><li><p>é€šè¿‡ <code>rasa/nlu/classifier/diet_classifier.py</code> ä¸­çš„ <code>DIETClassifier.process()</code>ï¼Œå¾€ <code>Message</code> ä¸­æ·»åŠ  <code>intent</code>, <code>intent_ranking</code>, <code>entities</code> ç»“æœå’Œå­—æ®µã€‚</p></li><li><p>æœ€ç»ˆç»“æœç»è¿‡ <code>emulator.normalise_response_json</code> åå¤„ç†ï¼Œè¢«åŒ…è£…æˆ json è¿”å›ã€‚</p></li></ol><h3 id="nlu-æ¨¡å—æ€è€ƒ" tabindex="-1"><a class="header-anchor" href="#nlu-æ¨¡å—æ€è€ƒ" aria-hidden="true">#</a> NLU æ¨¡å—æ€è€ƒ</h3><ol><li><p>æ•´ä¸ª NLU è¿‡ç¨‹é‡‡ç”¨äº†å‡ å¹´å‰ NLU é¢†åŸŸç‰¹å¾å·¥ç¨‹å¤§æ‚çƒ© + åŸºç¡€æ¨¡å‹è®­ç»ƒçš„æ“ä½œã€‚ä½ å¯ä»¥ä»»æ„çš„æ·»åŠ  Featuresï¼Œä½†æ˜¯ features åœ¨æœ€åè¿›è¡Œæ„å›¾è¯†åˆ«ï¼Œæˆ–è€…å®ä½“è¯†åˆ«æ—¶å€™ï¼Œå°†ä¼šä»¥æ‹¼æ¥çš„æ–¹å¼ç»“åˆï¼ˆå¦‚ <code>rasa.utils.tensorfloe.ConcatenateSparseDenseFeatures</code>ï¼‰ï¼Œè€ŒååŠ ä¸Šä¸‹æ¸¸æ¨¡å‹è¿›è¡Œè®­ç»ƒå’Œé¢„æµ‹ã€‚</p></li><li><p>å¦‚æœè¦è‡ªå®šä¹‰ Intent å’Œ NER æ¨¡å—ï¼Œåªéœ€è¦é‡æ–°åŒ…è£…å¥½ <code>GraphComponent</code>ï¼Œç¡®ä¿åœ¨ <code>process()</code> æ–¹æ³•ä¸­ï¼Œå°† <code>entities</code>ï¼Œ <code>intent</code>ï¼Œ<code>intent_ranking</code> æ·»åŠ åˆ° Message ä¸­å³å¯ã€‚</p></li><li><p>å¯¹äº RASA ä¸­çš„ Transformerï¼Œæ„å›¾è¯†åˆ«é»˜è®¤ä½¿ç”¨ CLS ä½ç½®çš„ <code>hidden_state</code> è¿›è¡Œåˆ†ç±»ï¼›å®ä½“æŠ½å–ä»»åŠ¡é»˜è®¤ä½¿ç”¨å…¶ä»–ä½ç½®çš„ <code>hidden_state</code> è¿›è¡Œé¢„æµ‹ã€‚é¢„æµ‹çš„åŸºç¡€å•ä½å–å†³äº Pipeline ä¸­çš„ <code>Tokenizer</code>ã€‚æ¯”å¦‚ä½ ä½¿ç”¨äº† <code>WhitespaceTokenizer</code>ã€‚å‡è®¾ç”¨æˆ·è¾“å…¥ <code>say HelloWorld</code> ï¼Œé‚£ä¹ˆå¤§è‡´çš„å®ä½“æŠ½å–æµç¨‹ä¼šæ˜¯ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>tokens <span class="token operator">=</span> <span class="token string">&quot;say HelloWorld&quot;</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span>
token_features <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> token <span class="token keyword">in</span> tokens<span class="token punctuation">:</span>
    sub_token <span class="token operator">=</span> MybertTokenzier<span class="token punctuation">(</span>token<span class="token punctuation">)</span>
    sub_token_feature <span class="token operator">=</span> MyBertModel<span class="token punctuation">(</span>sub_token<span class="token punctuation">)</span>
    token_feature <span class="token operator">=</span> combine<span class="token punctuation">(</span>sub_token_feature<span class="token punctuation">)</span> 
    token_features<span class="token punctuation">.</span>append<span class="token punctuation">(</span>token_feature<span class="token punctuation">)</span>
NER_result <span class="token operator">=</span> my_ner_model<span class="token punctuation">(</span>token_features<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>éƒ¨åˆ† Transformer æ¨¡å‹åœ¨ tokenize ä¹‹å‰éƒ½ä¼šè¿›è¡ŒåŸºç¡€ tokenizeï¼ˆå¦‚ <code>.split()</code>ï¼‰ã€‚ä½†å¯¹é‚£äº›ä¸è¿›è¡ŒåŸºç¡€ tokenize çš„ Transformer æ¨¡å‹ï¼Œåˆ™ä¼šä½¿ X åˆ†å¸ƒåç§»ï¼Œå¯¼è‡´æ•ˆæœå—å½±å“ã€‚</p></li></ol><p>å‚è€ƒä»£ç ï¼š</p><p><a href="https://link.zhihu.com/?target=https%3A//github.com/kevinng77/rasa_example/tree/master/examples/2_custom_clu" target="_blank" rel="noopener noreferrer">https://github.com/kevinng77/rasa_example/tree/master/examples/2_custom_clugithub.com/kevinng77/rasa_example/tree/master/examples/2_custom_clu<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="å°ç»“" tabindex="-1"><a class="header-anchor" href="#å°ç»“" aria-hidden="true">#</a> å°ç»“</h2><p>ä¸å°‘ low code å¯¹è¯ç³»ç»Ÿå¼€å‘å¹³å°çš„ NLU æ¨¡å—ä¸ RASA å‡ ä¹ä¸€è‡´ï¼Œåç»­çš„ç³»åˆ—æ–‡ç« ä¹Ÿä¼šåˆ†æè½åœ°éƒ¨ç½²ç±»ä¼¼çš„ NLU å¼•æ“ï¼Œä»¥åŠéƒ¨ç½² huggingface NLU æ¨¡å‹å®ç°é«˜ååé‡æ–¹æ¡ˆã€‚</p><p>å°è±¡ä¸­ç ”ç©¶ RASA ä¹Ÿå°±ä¸€å¹´å‰å·¦å³ï¼Œè€Œä»Š LLM å’Œ Agent ç­‰ AIGC è¯é¢˜çš„ç«çƒ­ï¼Œä½¿å¾— RASA è¿™æ ·çš„å¯¹è¯æ¡†æ¶å—åˆ°çš„å…³æ³¨å‡å°‘ã€‚ä¸çŸ¥å¤šä¹…åï¼ŒRASA ä¼šå˜æˆ NLP çš„å†å²äº§ç‰©ã€‚</p></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: 417333277@qq.com">kevinng77</span><!--]--><!--]--></div></div></footer><!----><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer"><a href="https://beian.miit.gov.cn/" target="_blank">æ²ªICPå¤‡2023027904å·-1</a>&nbsp;<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=" target="_blank"><img src="/assets/gongan.png">å…¬å®‰å¤‡æ¡ˆå· </a></div><div class="copyright">Copyright Â© 2023 Kevin å´å˜‰æ–‡</div></footer></div><!--]--><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-272a06b6.js" defer></script>
  </body>
</html>
